{"version":3,"sources":["components/SubmitButton/SubmitButton.view.js","components/ErrorDisplay/ErrorDisplay.view.js","components/LoginForm/LoginForm.view.js","components/LoginForm/LoginForm.container.js","components/Auth/Auth.actions.js","components/LoginForm/LoginForm.redux.js","components/SignupForm/ValidateableInput/ValidateableInput.actions.js","components/SignupForm/ValidateableInput/ValidateableInput.view.js","components/SignupForm/ValidateableInput/ValidateableInput.utils.js","components/SignupForm/ValidateableInput/ValidateableInput.inputs.js","components/SignupForm/ValidateableInput/ValidateableInput.factory.js","components/SignupForm/ApprovableInput/ApprovableInput.view.js","components/SignupForm/ApprovableInput/ApprovableInput.factory.js","components/SignupForm/Username/Username.container.js","components/SignupForm/Username/Username.validator.js","components/SignupForm/Password/Password.container.js","components/SignupForm/Password/Password.validator.js","components/SignupForm/PasswordConfirmation/PasswordConfirmation.container.js","components/SignupForm/PasswordConfirmation/PasswordConfirmation.validator.js","components/SignupForm/PasswordConfirmation/PasswordConfirmation.redux.js","components/SignupForm/Email/Email.container.js","components/SignupForm/Email/Email.validator.js","components/SignupForm/Phone/Phone.container.js","components/SignupForm/Phone/Phone.validator.js","components/SignupForm/Birthdate/Birthdate.container.js","components/SignupForm/Birthdate/Birthdate.validator.js","components/SignupForm/Newsletters/Newsletters.container.js","components/SignupForm/Biography/Biography.container.js","components/SignupForm/Biography/Biography.validator.js","components/SignupForm/PersonalInformationProcessing/PersonalInformationProcessing.container.js","components/SignupForm/PersonalInformationProcessing/PersonalInformationProcessing.validator.js","components/SignupForm/Photo/Photo.view.js","components/SignupForm/Photo/Photo.container.js","components/SignupForm/Photo/Photo.redux.js","components/SignupForm/Photo/Photo.validator.js","components/SignupForm/Firstname/Firstname.container.js","components/SignupForm/Firstname/Firstname.validator.js","components/SignupForm/Lastname/Lastname.container.js","components/SignupForm/Lastname/Lastname.validator.js","components/SignupForm/SubmitButton/SubmitButton.redux.js","components/SignupForm/Demo/Demo.view.js","utils.js","components/SignupForm/Demo/Demo.utils.js","components/SignupForm/Demo/Demo.container.js","components/SignupForm/SignupForm.view.js","components/SignupForm/SignupForm.container.js","components/SignupForm/SignupForm.actions.js","components/SignupForm/SignupForm.redux.js","components/FullscreenSpinner/FullscreenSpinner.view.js","components/Dashboard/LogoutButton/LogoutButton.view.js","components/Dashboard/LogoutButton/LogoutButton.redux.js","components/Dashboard/Dashboard.view.js","components/Dashboard/Dashboard.utils.js","components/Dashboard/Dashboard.redux.js","components/Auth/Auth.redux.js","components/Auth/Auth.container.js","components/LocaleSwitcher/LocaleSwitcher.view.js","components/IntlProvider/IntlProvider.actions.js","components/LocaleSwitcher/LocaleSwitcher.redux.js","components/App/App.view.js","components/App/App.container.js","components/App/App.actions.js","components/App/App.redux.js","serviceWorker.js","components/Auth/Auth.logic.js","components/IntlProvider/IntlProvider.logic.js","components/SignupForm/ApprovableInput/ApprovableInput.actions.js","components/SignupForm/ApprovableInput/ApprovableInput.logic.js","components/SignupForm/PasswordConfirmation/PasswordConfirmation.logic.js","components/SignupForm/PasswordConfirmation/PasswordConfirmation.actions.js","components/SignupForm/SignupForm.utils.js","components/SignupForm/SignupForm.logic.js","components/App/App.logic.js","logic.js","configureLogic.js","components/IntlProvider/IntlProvider.reducers.js","components/Auth/Auth.reducers.js","components/SignupForm/ApprovableInput/ApprovableInput.reducer.js","components/SignupForm/ValidateableInput/ValidateableInput.reducer.js","components/SignupForm/SignupForm.reducers.js","components/SignupForm/PasswordConfirmation/PasswordConfirmation.reducer.js","components/App/App.reducers.js","reducers.js","configureStore.js","components/IntlProvider/IntlProvider.redux.js","index.js"],"names":["SubmitButton_SubmitButton_view","_ref","disabled","className","isPending","inProgressCaption","caption","react_default","a","createElement","Button","type","size","color","Fragment","Spinner","View","title","errorMsg","Alert","messages","defineMessages","formTitle","id","defaultMessage","formHint","usernameLabel","passwordLabel","submitButtonCaption","submitButtonInProgressCaption","authErrorTitle","msgNoAccountQuestion","signupLinkCaption","injectIntl","formatMessage","intl","externalError","isAuthenticated","onSubmit","onChange","lib_default","delay","es_Container","Row","Col","Card","body","CardTitle","LoginForm_view_messages","CardText","Form","FormGroup","Label","htmlFor","Input","name","defaultValue","ErrorDisplay_ErrorDisplay_view","FormText","react_router_dom","to","actionTypes","onAuthResponse","token","connect","state","auth","dispatch","event","preventDefault","form","target","credentials","username","elements","value","password","sha256","data","fieldName","validityStatus","onBlur","getActions","label","inputType","isInvalid","isDisabled","isValid","validMsg","children","InputComponent","valid","invalid","FormFeedback","propTypes","PropTypes","string","isRequired","oneOf","bool","error","func","getErrorIntl","status","errorStrings","arguments","length","undefined","isTypingFinished","inProgressFilter","PROPER_VALUE","some","filteredStatus","shouldShowError","getEnhancedValidator","validate","errorCodes","keys","Object","i","getErrorCodes","validationResult","DefaultInput","AlternativeInput","_ref2","CustomInput","checked","ValidateableInput_factory","_ref$validate","_getActions","enhancedValidate","Component","ownProps","_state$signup$data$fi","signup","_ref2$isInvalid","_ref2$isValid","validMsgFormatted","isApproved","oneOfType","instanceOf","ApprovableInput_factory","approvedMsg","rejectedMsg","ValidateableInput","validateableInputFactory","_ref3","statusCodes","E_EMPTY","E_FIRST_LETTER","E_LAST_SYMBOL","E_INVALID_FORMAT","E_TOO_SHORT","E_TOO_LONG","resultStrings","rejected","approved","approvableInputFactory","test","charAt","E_INSUFFICIENT","format","concat","RegExp","E_PASSWORDS_MISMATCH","E_PASSWORD_NOT_VALID","resultMessages","_state$signup$data$pa","E_FIRST_SYMBOL","E_INVALID_CHARS","E_TOO_OLD","E_TOO_EARLY","tsBirthdate","Date","parse","isNaN","tsToday","now","E_IMPOSED","fileName","E_NOT_SELECTED","E_WRONG_EXTENTION","E_TOO_BIG","Container","fieldLabel","Photo_Photo_view","photoPickerButtonCaption","file","ext","split","pop","toLowerCase","acceptedExt","files","E_WRONG_ENDING","areAllApprovableFieldsApproved","fields","every","field","isFormFilledInCorrectly","formData","values","passwordConfirmation","item","onClick","sleeper","ms","Promise","resolve","setTimeout","serverConnectionError","somethingWentWrong","ajaxErrorParser","err","response","console","log","errorDetails","details","statusText","request","message","fetchStoredMessages","localeId","serializedLocale","localStorage","getItem","_JSON$parse","JSON","storedLocaleId","locale","simulateFormFillIn","_x","_x2","_simulateFormFillIn","apply","this","_callee","sequences","elementId","regenerator_default","wrap","_context","prev","next","t0","t1","done","runSequence","pauseDelayMultiplier","stop","inputEvent","Event","bubbles","blurEvent","focusEvent","fieldBlurDelayMultiplier","putTextInTextarea","element","simulateTypingTextarea","_callee2","sequence","_context2","abrupt","simulateTyping","simulateTypingInputElements","_callee3","_context3","setNativeValue","_callee4","strategy","_context4","slice","dispatchEvent","clickElement","click","putTextAtOnce","_callee5","_context5","document","getElementById","focus","valueSetter","getOwnPropertyDescriptor","set","prototype","getPrototypeOf","prototypeValueSetter","call","onDemo","asyncToGenerator","mark","firstname","lastname","email","newsletters","phone","birthdate","biography","Demo_Demo_view","signupFormTitle","signupFormHint","firstNameLabel","lastNameLabel","userIdLabel","userIdHint","passwordHint","passwordConfirmationLabel","passwordConfirmationHint","emailLabel","emailHint","newslettersLabel","newslettersHint","phoneLabel","phoneHint","birthdateLabel","birthdateHint","biographyLabel","photoLabel","photoHint","personalInformationProcessingLabel","personalInformationProcessingHint","signupErrorTitle","alreadySignedUp","loginLinkCaption","signupSuccessTitle","signupSuccessMessage","btnDemoCaption","isRegistered","steps","onPopulateValidClick","onPopulateInvalidClick","onFocus","md","lg","xl","SignupForm_view_messages","Demo_container","Firstname_container","Lastname_container","Username_container","Password_container","PasswordConfirmation_redux","Email_container","Newsletters_container","Phone_container","Birthdate_container","Biography_container","Photo_redux","PersonalInformationProcessing_container","SubmitButton_redux","showProceedButton","intlShape","setVisibilityFilter","signupState","filter","step","push","currentKeyField","currentAwaitingKeyField","fieldValueIsProper","fieldIsNotPending","fieldIsBeingEdited","onLogout","dataLoadingSpinnerMsg","dataLoadingErrorTitle","logoutButtonCaption","newslettersStatusIndicatorLabel","biographyBlockTitle","FullscreenSpinner_FullscreenSpinner_view","Dashboard_view_messages","sm","src","photo","LogoutButton_redux","age","defaultChecked","postProcessUserProfile","userProfileInfo","ageDiffMs","getTime","ageDate","Math","abs","getUTCFullYear","calculateAge","_state$userProfile","userProfile","updateReduxAuthState","updateReduxAuthStatem","useEffect","setItem","removeItem","switchTo","onSwitchLocaleRequest","onSwitchLocaleResponse","onSwitchLocaleFailure","onSwitchLocaleReset","e","localeSwitchErrorTitle","AppView","isLocaleSwitchPending","localeSwitchError","Auth_redux","App_view_messages","LocaleSwitcher_redux","react_router","App_view_LoginRoute","exact","path","component","SignupForm_redux","App_view_ProtectedRoute","Dashboard_redux","redirectTo","App_view_DefaultRoute","ProtectedRoute","actualComponent","render","DefaultRoute","LoginRoute","_ref4","LoginForm_redux","withRouter","fetchUserProfile","logicMiddleware","appContext","history","resetUI","addDeps","listen","location","action","App_App_view","i18n","Boolean","window","hostname","match","Auth_logic","createLogic","processOptions","successType","failType","process","_process","axios","url","params","sent","reject","IntlProvider_logic","allow","cookie","stringify","REQUEST_APPROVAL","RESPONSE_APPROVAL","RESPONSE_APPROVAL_ERROR","fieldApprovalLogic","validateableInputActionTypes","getState","ctx","requestApproval","responseApproval","responseApprovalError","assign","config","_x3","PasswordConfirmation_logic","passwordValidityStatus","passwordValue","passwordConfirmationValidityStatus","passwordConfirmationValue","areEqual","passwordsCheckedAction","_ref5","_ref6","exractFormData","originalFormData","refinedFormData","FormData","SignupForm_logic","method","headers","Content-Type","timeout","catch","toConsumableArray","passwordConfirmationLogic","notAuthorizedException","App_logic","Authorization","deps","logic","authLogic","switchLocaleLogic","signupFormLogic","dataFetchLogic","createLogicMiddleware","monitor$","subscribe","x","initialState","objectSpread","defineProperty","fieldData","reduceReducers","combineReducers","inputActionTypes","keyFields","previousValue","fieldNameIndex","indexOf","reduce","index","approvable","validateable","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","key","IntlProvider","addLocaleData","ru","middleware","get","hydrate","externalState","store","applyMiddleware","createStore","rootReducer","ReactDOM","es","IntlProvider_redux","App_redux","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"2oBAIeA,UAAA,SAAAC,GAAA,IACdC,EADcD,EACdC,SAAUC,EADIF,EACJE,UAAWC,EADPH,EACOG,UAAWC,EADlBJ,EACkBI,kBAAmBC,EADrCL,EACqCK,QADrC,OAkBfC,EAAAC,EAAAC,cAAAC,EAAA,GAAAC,KAAA,SAAAT,WAAAU,KAAA,KAAAC,MAAA,UAAAV,UAAA,cAAAA,GAPAC,EAIAG,EAAAC,EAAAC,cAAAF,EAAAC,EAAAM,SAAA,KAHAT,EAGAE,EAAAC,EAAAC,cAAA,OAAAN,UAAA,mBAAAI,EAAAC,EAAAC,cAAAM,EAAA,GAAAH,KAAA,KAAAC,MAAA,QAAAF,KAAA,WAGAL,cCVeU,UARF,SAAAf,GAAA,IACZgB,EADYhB,EACZgB,MAAOC,EADKjB,EACLiB,SADK,OAMbX,EAAAC,EAAAC,cAAAU,EAAA,GAAAN,MAAA,SAAAV,UAAA,iBADAI,EAAAC,EAAAC,cAAA,MAAAN,UAAA,iBAAAc,GACAV,EAAAC,EAAAC,cAAA,KAAAN,UAAA,QAAAe,uBCDME,UAAWC,YAAe,CAC/BC,UAAS,CAAAC,GAAA,iCAAAC,eAAE,UACXC,SAAQ,CAAAF,GAAA,gCAAAC,eAAE,2EACVE,cAAa,CAAAH,GAAA,qCAAAC,eAAE,YACfG,cAAa,CAAAJ,GAAA,qCAAAC,eAAE,YACfI,oBAAmB,CAAAL,GAAA,2CAAAC,eAAE,UACrBK,8BAA6B,CAAAN,GAAA,qDAAAC,eAAE,WAC/BM,eAAc,CAAAP,GAAA,sCAAAC,eAAE,wBAChBO,qBAAoB,CAAAR,GAAA,4CAAAC,eAAE,eACtBQ,kBAAiB,CAAAT,GAAA,yCAAAC,eAAE,eChBLS,cDmBA,SAAAhC,GAAA,IACNiC,EADMjC,EACdkC,KAAQD,cAAiB9B,EADXH,EACWG,UAA4BgC,GADvCnC,EACsBoC,gBADtBpC,EACuCmC,eAAeE,EADtDrC,EACsDqC,SAAUC,EADhEtC,EACgEsC,SADhE,OAsCfhC,EAAAC,EAAAC,cAAA,OAAAc,GAAA,aAAAhB,EAAAC,EAAAC,cAAA+B,EAAAhC,EAAA,CAAAiC,MAAA,KAAAlC,EAAAC,EAAAC,cAAAiC,EAAA,OAAAnC,EAAAC,EAAAC,cAAAkC,EAAA,GAAAxC,UAAA,sBAAAI,EAAAC,EAAAC,cAAAmC,EAAA,GAAAzC,UAAA,WAAAI,EAAAC,EAAAC,cAAAoC,EAAA,GAAAC,MAAA,GA5BAvC,EAAAC,EAAAC,cAAAsC,EAAA,GAAA5C,UAAA,QAAA+B,EAAAc,EAAA1B,YAEAf,EAAAC,EAAAC,cAAAwC,EAAA,GAAA9C,UAAA,2BAAA+B,EAAAc,EAAAvB,WA0BAlB,EAAAC,EAAAC,cAAAyC,EAAA,GAAAZ,YArBA/B,EAAAC,EAAAC,cAAA0C,EAAA,OADA5C,EAAAC,EAAAC,cAAA2C,EAAA,GAAAC,QAAA,YAAAnB,EAAAc,EAAAtB,gBACAnB,EAAAC,EAAAC,cAAA6C,EAAA,GAAA3C,KAAA,OAAA4C,KAAA,WAAAhC,GAAA,WAAAgB,WAAAiB,aAAA,oBAIAjD,EAAAC,EAAAC,cAAA0C,EAAA,OADA5C,EAAAC,EAAAC,cAAA2C,EAAA,GAAAC,QAAA,YAAAnB,EAAAc,EAAArB,gBACApB,EAAAC,EAAAC,cAAA6C,EAAA,GAAA3C,KAAA,WAAA4C,KAAA,WAAAhC,GAAA,WAAAgB,WAAAiB,aAAA,oBAKAjD,EAAAC,EAAAC,cAAAT,EAAA,CAAAM,QAAA4B,EAAAc,EAAApB,qBAAAvB,kBAAA6B,EAAAc,EAAAnB,+BAAA3B,SAAAE,cAAAD,UAAA,uBAOAiC,EACA7B,EAAAC,EAAAC,cAAAgD,EAAA,CAAAxC,MAAAiB,EAAAc,EAAAlB,gBAAAZ,SAAAkB,IAAA,KAIA7B,EAAAC,EAAAC,cAAAiD,EAAA,GAAAvD,UAAA,QAFA+B,EAAAc,EAAAjB,sBACA,IACAxB,EAAAC,EAAAC,cAAAkD,EAAA,GAAAC,GAAA,YAAA1B,EAAAc,EAAAhB,8BE3Da6B,EACG,eADHA,EAEI,gBAFJA,EAGG,eAHHA,EAIE,cAJFA,EAKC,aAQDC,EAAiB,SAACC,GAAD,MAAY,CACzCpD,KAAMkD,EACNE,kBCQcC,cAlBS,SAACC,GAAD,MAAY,CACnC7D,UAAW6D,EAAMC,KAAK9D,UACtBiC,gBAAiB4B,EAAMC,KAAK7B,gBAC5BD,cAAe6B,EAAMC,KAAK9B,gBAGA,SAAC+B,GAAD,MAAe,CACzC7B,SAAU,SAAC8B,GACVA,EAAMC,iBACN,IAAMC,EAAOF,EAAMG,OACbC,EAAc,CACnBC,SAAUH,EAAKI,SAAL,SAA0BC,MACpCC,SAAUC,iBAAOP,EAAKI,SAAL,SAA0BC,QAE5CR,EDXsC,CACvCxD,KAAMkD,EACNiB,KCSwBN,OAIVR,CAA6Cd,4BCvB/CW,EACK,gBADLA,EAEI,eAGJtB,EAAW,SAACwC,EAAWJ,EAAOK,GAAnB,MAAuC,CAC9DrE,KAAMkD,EACNkB,YACAJ,QACAK,mBAGYC,EAAS,SAACF,GAAD,MAAgB,CACrCpE,KAAMkD,EACNkB,cAIM,SAASG,EAAWH,GAG1B,MAAO,CACNxC,SAHqB,SAACoC,EAAOK,GAAR,OAA2BzC,EAASwC,EAAWJ,EAAOK,IAI3EC,OAHmB,kBAAMA,EAAOF,kBChB5B/D,EAAO,SAAAf,GAAA,IAEX8E,EAFW9E,EAEX8E,UAAWJ,EAFA1E,EAEA0E,MAAOQ,EAFPlF,EAEOkF,MAAOC,EAFdnF,EAEcmF,UAAWC,EAFzBpF,EAEyBoF,UAAWnE,EAFpCjB,EAEoCiB,SAC/CoE,EAHWrF,EAGXqF,WAAYC,EAHDtF,EAGCsF,QAASC,EAHVvF,EAGUuF,SAAUC,EAHpBxF,EAGoBwF,SAAUC,EAH9BzF,EAG8ByF,eAEzCnD,EALWtC,EAKXsC,SAAU0C,EALChF,EAKDgF,OALC,OA0Bb1E,EAAAC,EAAAC,cAAA0C,EAAA,OAAA5C,EAAAC,EAAAC,cAAAiF,EAAA,CAAA/E,KAAAyE,EAAA7B,KAAAwB,EAAAxD,GAAAwD,EAAAI,QAAAR,QAAAgB,MAAAJ,EAAAK,QAAAP,EAAAnF,SAAAoF,EAAA/C,WAAA0C,UALA1E,EAAAC,EAAAC,cAAAoF,EAAA,GAAAF,OAAA,GAAAH,GAGAjF,EAAAC,EAAAC,cAAAoF,EAAA,GAAAF,OAAA,GAAApF,EAAAC,EAAAC,cAAA,WAAAS,IAEAuE,KAEAzE,EAAK8E,UAAY,CAChBf,UAAWgB,IAAUC,OAAOC,WAC5Bd,MAAOY,IAAUC,OAAOC,WACxBb,UAAWW,IAAUG,MAAM,CAAC,OAAQ,WAAW,QAAS,WAAY,MAAO,OAAQ,WAAY,WAC/Fb,UAAWU,IAAUI,KACrBC,MAAOL,IAAUC,OACjBT,QAASQ,IAAUI,KACnBX,SAAUO,IAAUC,OACpBzD,SAAUwD,IAAUM,KACpBpB,OAAQc,IAAUM,MAGJrF,QClBFsF,EAAe,SAACnE,EAAMoE,GAA8E,IAAtEC,EAAsEC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAvD,GACzD,OApBuB,SAACF,EAAQK,GAA4C,IAA1BC,EAA0BJ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAP,GAGrE,SAAOF,GAAUA,IAAWO,QAKvBF,IAIEC,EAAiBE,KAAM,SAAAC,GAAc,OAAIA,IAAmBT,KAQ5DU,CAAgBV,IADyFE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAAAA,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAP,IAEtGtE,EAAKD,cAAcsE,EAAaD,IAChC,IAmBG,SAASW,EAAqBC,GAA6B,IAC3DC,EAfA,SAAuBZ,GAG7B,IAFA,IAAMa,EAAOC,OAAOD,KAAKb,GACrBY,EAAa,GACPG,EAAI,EAAGA,EAAIF,EAAKX,OAAQa,IACjCH,EAAWC,EAAKE,IAAMF,EAAKE,GAE5B,OAAOH,EASYI,CAD8Cf,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,IAE7D,OAAO,SAAC9B,GACP,IAAM8C,EAAmBN,EAASxC,EAAOyC,GACzC,OAA4B,IAArBK,EACJX,GACAW,gBCnDCC,EAAe,SAAAzH,GAAA,IACpBU,EADoBV,EACpBU,KAAM4C,EADctD,EACdsD,KAAM4B,EADQlF,EACRkF,MAAOR,EADC1E,EACD0E,MAAOgB,EADN1F,EACM0F,MAAOC,EADb3F,EACa2F,QAAS1F,EADtBD,EACsBC,SAAUqC,EADhCtC,EACgCsC,SAAU0C,EAD1ChF,EAC0CgF,OAAQQ,EADlDxF,EACkDwF,SADlD,OAmBrBlF,EAAAC,EAAAC,cAAA,WAdAF,EAAAC,EAAAC,cAAA2C,EAAA,GAAAC,QAAAE,GAAA4B,GAEA5E,EAAAC,EAAAC,cAAA6C,EAAA,GAAA3C,OAAA4C,OAAAhC,GAAAgC,EAAAoB,QAAAgB,QAAAC,UAAA1F,WAAAqC,WAAA0C,WAYAQ,IAEMkC,EAAmB,SAAAC,GAAA,IACxBjH,EADwBiH,EACxBjH,KAAM4C,EADkBqE,EAClBrE,KAAM4B,EADYyC,EACZzC,MAAOR,EADKiD,EACLjD,MAAOgB,EADFiC,EACEjC,MAAOC,EADTgC,EACShC,QAAS1F,EADlB0H,EACkB1H,SAAUqC,EAD5BqF,EAC4BrF,SAAUkD,EADtCmC,EACsCnC,SADtC,OAezBlF,EAAAC,EAAAC,cAAAoH,EAAA,GAAAlH,OAAA4C,OAAAhC,GAAAgC,EAAA4B,QAAA2C,QAAAnD,EAAAgB,QAAAC,UAAA1F,WAAAqC,YAAAkD,IC9BaqB,GAAe,eAEbiB,GAAA,SAAA9H,GAGT,IA2CDyF,EA7CSX,EAER9E,EAFQ8E,UAAWK,EAEnBnF,EAFmBmF,UAAWoB,EAE9BvG,EAF8BuG,aAAcK,EAE5C5G,EAF4C4G,iBAAkBrB,EAE9DvF,EAF8DuF,SAE9DwC,EAAA/H,EADWkH,gBACX,IAAAa,EADsB,kBAAM,GAC5BA,EAAAC,EAcwB/C,EAAWH,GAAhCxC,EAdH0F,EAcG1F,SAAU0C,EAdbgD,EAcahD,OAIZiD,EAAmBhB,EAAqBC,EAAUX,GAapD2B,EAAYnE,YA9BQ,SAACC,EAAOmE,GAAa,IAAAC,EACQpE,EAAMqE,OAAOxD,KAAKC,GAA9DC,EADoCqD,EACpCrD,eAAgB4B,EADoByB,EACpBzB,iBAAkBjC,EADE0D,EACF1D,MACpCzD,EAAWkH,EAASlH,SACvBkH,EAASlH,SACToF,EAAa8B,EAASjG,KAAM6C,EAAgBwB,EAAcI,EAAkBC,GAC/E,MAAO,CACNxB,YAAanE,EACbA,WACAyD,UAYyB,SAAAR,GAAQ,MAAK,CACvC5B,SAAU,SAAA6B,GACT,IAAMG,EAASH,EAAMG,OACfI,EAAwB,aAAhBJ,EAAO5D,KAAsB4D,EAAOuD,QAAUvD,EAAOI,MAC7DK,EAAiBkD,EAAiBvD,GACxCR,EAAS5B,EAASoC,EAAOK,KAE1BC,OAAQ,kBAAMd,EAASc,QAGRjB,CAGdhD,GAUF,OAPAmH,EAAUrC,UAAY,CACrBf,UAAWgB,IAAUC,OAAOC,WAC5Bb,UAAWW,IAAUG,MAAM,CAAC,OAAQ,WAAY,QAAS,WAAY,MAAO,OAAQ,WAAY,WAAWD,YAKnGb,GACR,IAAK,WACL,IAAK,SACJM,EAAiBiC,EACjB,MAED,QACCjC,EAAiBgC,EA0BnB,OAAOzF,YAtBW,SAAA2F,GAEZA,EADLtC,WACK,IAAAiD,EAAAX,EADOvC,iBACP,IAAAkD,KAAAC,EAAAZ,EAD0BrC,eAC1B,IAAAiD,KAD2CtH,EAC3C0G,EAD2C1G,SAAUuE,EACrDmC,EADqDnC,SAAUN,EAC/DyC,EAD+DzC,MAAOhD,EACtEyF,EADsEzF,KAErEsG,EAAoBjD,EACvBrD,EAAKD,cAAcsD,GACnB,KACH,OAaFjF,EAAAC,EAAAC,cAAA0H,EAAA,CAAApD,YAAAK,YAAAD,QAAAE,YAAAnE,WAAAqE,UAAAC,SAAAiD,EAAA/C,iBAAAvD,QAAAsD,MCpFMzE,GAAO,SAAAf,GAAA,IACEoF,EADFpF,EACEoF,UAAWjF,EADbH,EACaG,UAAWsI,EADxBzI,EACwByI,WAAYvD,EADpClF,EACoCkF,MACnCjE,EAFDjB,EAECiB,SAAUwE,EAFXzF,EAEWyF,eAFX,OAabnF,EAAAC,EAAAC,cAAAiF,EAAA,CAAAJ,WAAAlF,EAAAiF,YAAAE,QAAAmD,EAAAxH,WAAAiE,SADA/E,EACAG,EAAAC,EAAAC,cAAAM,EAAA,GAAAH,KAAA,KAAAC,MAAA,mBAEAG,GAAK8E,UAAY,CAChBT,UAAWU,IAAUI,KACrB/F,UAAW2F,IAAUI,KACrBZ,QAASQ,IAAU4C,UAAU,CAC3B5C,IAAUI,KACVJ,IAAU6C,WAAW,eAEvB1H,SAAU6E,IAAUC,QAGNhF,UCvBA6H,GAAA,SAAA5I,GAGT,IAFQ8E,EAER9E,EAFQ8E,UAAWK,EAEnBnF,EAFmBmF,UAAW0D,EAE9B7I,EAF8B6I,YAAaC,EAE3C9I,EAF2C8I,YAAsCvC,GAEjFvG,EAFwDwF,SAExDxF,EAFkEmC,cAElEnC,EAFiFuG,cAAcK,EAE/F5G,EAF+F4G,iBACpFM,EACXlH,EADWkH,SAmBZgB,EAAYnE,YAjBQ,SAACC,EAAOmE,GAAa,IAAAR,EACuB3D,EAAMqE,OAAOxD,KAAKC,IAAc,GAA3F3C,EADoCwF,EACpCxF,cAAewE,EADqBgB,EACrBhB,iBAAkBxG,EADGwH,EACHxH,UAAWsI,EADRd,EACQc,WAChDxH,EAAW,GAKf,OAJKkB,EACJlB,EAAWkB,EACFwE,IAAmC,IAAf8B,IAC7BxH,EAAWkH,EAASjG,KAAKD,cAAc6G,IACjC,CACN1D,YAAanE,EACbA,WACAd,YAEAsI,WAAYA,GAAc9B,IAKZ5C,CAEdhD,IAEFmH,EAAYlG,YAAWkG,GAEvB,IAAMa,EAAoBC,GAAyB,CAClDlE,YACAK,YACAI,SAAUsD,EACV3B,WACAX,eACAK,qBAGD,OAAO,SAAAqC,GAAA,IAAG/D,EAAH+D,EAAG/D,MAAH,OAER5E,EAAAC,EAAAC,cAAA0H,EAAA,CAAAzC,eAAAsD,EAAA7D,YCxCO,IAAMgE,GACA,UADAA,GAGK,gBAHLA,GAKG,cAIH3C,GAAenF,YAAe,CAC1C+H,QAAO,CAAA7H,GAAA,yCAAAC,eAAK,2DACZ6H,eAAc,CAAA9H,GAAA,gDAAAC,eAAG,0DACjB8H,cAAa,CAAA/H,GAAA,+CAAAC,eAAI,0CACjB+H,iBAAgB,CAAAhI,GAAA,kDAAAC,eAAG,gFACnBgI,YAAW,CAAAjI,GAAA,6CAAAC,eAAI,6CACfiI,WAAU,CAAAlI,GAAA,4CAAAC,eAAI,iDAGTkI,GAAgBrI,YAAe,CACpCsI,SAAQ,CAAApI,GAAA,0CAAAC,eAAE,qFACVoI,SAAQ,CAAArI,GAAA,0CAAAC,eAAE,qCAGIqI,MAAuB,CACrC9E,UAAW,WACXK,UAAW,OACX+B,SC9Bc,SAAkBxC,GAAyB,IAAlBwE,EAAkB1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAGrD,GAAsB,IAAjB9B,EAAM+B,OACV,OAAOyC,EAAYC,QAGpB,GAAKzE,EAAM+B,OAAS,GACnB,OAAOyC,EAAYM,WAGpB,IACIlE,EADqB,UACMuE,KAAKnF,EAAMoF,OAAO,IACjD,OAAOxE,GAMPA,EADsB,eACEuE,KAAKnF,IAMxBA,EAAM+B,OAAS,EACZyC,EAAYK,eAIpBjE,EADwB,aACEuE,KAAKnF,EAAMoF,OAAOpF,EAAM+B,OAAS,MAEnDyC,EAAYG,cAXZH,EAAYI,iBAPZJ,EAAYE,gBDiBpBK,iBACAlD,gBACAK,iBAAkB,CAACsC,GAAqBA,GAAyBA,IACjEJ,YAAaW,GAAcC,SAC3Bb,YAAaY,GAAcE,WE/BrB,IAAMT,GACA,UADAA,GAGK,iBAHLA,GAIG,cAIH3C,GAAenF,YAAe,CAC1C+H,QAAO,CAAA7H,GAAA,yCAAAC,eAAK,sDACZ+H,iBAAgB,CAAAhI,GAAA,kDAAAC,eAAE,iFAClBwI,eAAc,CAAAzI,GAAA,gDAAAC,eAAG,+EACjBgI,YAAW,CAAAjI,GAAA,6CAAAC,eAAG,8CACdiI,WAAU,CAAAlI,GAAA,4CAAAC,eAAI,mFAGAyH,MAAyB,CACvClE,UAAW,WACXK,UAAW,WACX+B,SCvBc,SAAkBxC,EAAOwE,GAGvC,GAAsB,IAAjBxE,EAAM+B,OACV,OAAOyC,EAAYC,QAGpB,GAAKzE,EAAM+B,OAAS,IACnB,OAAOyC,EAAYM,WAEpB,IAGMQ,EAAM,MAAAC,OAHO,WAGP,KAAAA,OAFM,QAEN,KAAAA,OADO,GACP,OAIZ,OAHa,IAAIC,OAAOF,GACf,uDACYH,KAAKnF,GASjB,WACiBmF,KAAKnF,GAEtB,QACgBmF,KAAKnF,GAErB,iCACiBmF,KAAKnF,GAEY,EACnCwE,EAAYa,iBAGfrF,EAAM+B,OAAS,IACZyC,EAAYK,YArBZL,EAAYI,kBDMpB/C,gBACAK,iBAAkB,CAACsC,GAAqBA,GAAyBA,MErB3D,IAAMA,GACC,UADDA,GAEW,uBAFXA,GAGW,uBAGX3C,GAAenF,YAAe,CAC1C+H,QAAO,CAAA7H,GAAA,qDAAAC,eAAM,sEACb4I,qBAAoB,CAAA7I,GAAA,kEAAAC,eAAG,yBACvB6I,qBAAoB,CAAA9I,GAAA,kEAAAC,eAAG,kEAGlB8I,GAAiBjJ,YAAe,CACrCsE,MAAK,CAAApE,GAAA,mDAAAC,eAAE,qBAYO2G,GATGc,GAAyB,CAC1ClE,UAAW,uBACXK,UAAW,WACXI,SAAU8E,GAAe3E,MACzBwB,SCxBc,SAAkBxC,EAAOwE,GAEvC,OAAsB,IAAjBxE,EAAM+B,QACHyC,EAAYC,SDsBpB5C,gBACAK,iBAAkB,CAACsC,MEhBLnF,eAPS,SAACC,EAAOmE,GAAa,IAAAmC,EACNtG,EAAMqE,OAAOxD,KAAb,qBAA9BS,EADoCgF,EACpChF,QAASqB,EAD2B2D,EAC3B3D,iBACjB,MAAO,CACNrB,QAASA,GAAWqB,IAIP5C,CAAyBmE,ICNjC,IAAMgB,GACA,UADAA,GAEO,mBAIP3C,GAAenF,YAAe,CAC1C+H,QAAO,CAAA7H,GAAA,sCAAAC,eAAK,oDACZiI,WAAU,CAAAlI,GAAA,yCAAAC,eAAI,iFACd+H,iBAAgB,CAAAhI,GAAA,+CAAAC,eAAG,6FAGd8I,GAAiBjJ,YAAe,CACrCsI,SAAQ,CAAApI,GAAA,uCAAAC,eAAE,2EACVoI,SAAQ,CAAArI,GAAA,uCAAAC,eAAE,iCAGIqI,MAAuB,CACrC9E,UAAW,QACXK,UAAW,QACX+B,SCxBc,SAAkBxC,GAAyB,IAAlBwE,EAAkB1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAGrD,OAAsB,IAAjB9B,EAAM+B,OACHyC,EAAYC,QAGfzE,EAAM+B,OAAS,IACZyC,EAAYM,aAID,4IACMK,KAAKnF,IAEtBwE,EAAYI,kBDUpB/C,gBACAK,iBAAkB,CAACsC,GAAqBA,IACxCJ,YAAauB,GAAeX,SAC5Bb,YAAawB,GAAeV,WExBtB,IAAMT,GACA,UADAA,GAIO,mBAJPA,GAKG,cAIH3C,GAAenF,YAAe,CAC1C+H,QAAO,CAAA7H,GAAA,sCAAAC,eAAK,2DACZgJ,eAAc,CAAAjJ,GAAA,6CAAAC,eAAG,mDACjBgI,YAAW,CAAAjI,GAAA,0CAAAC,eAAI,mGACfiI,WAAU,CAAAlI,GAAA,yCAAAC,eAAI,8DACdiJ,gBAAe,CAAAlJ,GAAA,8CAAAC,eAAG,oGAClB+H,iBAAgB,CAAAhI,GAAA,+CAAAC,eAAG,8FAGd8I,GAAiBjJ,YAAe,CACrCsI,SAAQ,CAAApI,GAAA,uCAAAC,eAAE,yEACVoI,SAAQ,CAAArI,GAAA,uCAAAC,eAAE,kCAGIqI,MAAuB,CACrC9E,UAAW,QACXK,UAAW,MACX+B,SC9Bc,SAAkBxC,GAAyB,IAAlBwE,EAAkB1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAGrD,GAAsB,IAAjB9B,EAAM+B,OACV,OAAOyC,EAAYC,QAGpB,GAAKzE,EAAM+B,OAAS,GACnB,OAAOyC,EAAYM,WAGpB,IACIlE,EADqB,MACMuE,KAAKnF,EAAMoF,OAAO,IACjD,OAAOxE,GAMPA,EADwB,cACEuE,KAAKnF,KAO/BY,EAD0B,6DACEuE,KAAKnF,MAM5BA,EAAM+B,OAAS,KACZyC,EAAYK,YALZL,EAAYI,iBAPZJ,EAAYsB,gBAPZtB,EAAYqB,gBDiBpBhE,gBACAK,iBAAkB,CAACsC,GAAqBA,GAAyBA,IACjEJ,YAAauB,GAAeX,SAC5Bb,YAAawB,GAAeV,WE9BtB,IAAMT,GACA,UADAA,GAEE,YAFFA,GAGG,cAHHA,GAIQ,mBAGR3C,GAAenF,YAAe,CAC1C+H,QAAO,CAAA7H,GAAA,0CAAAC,eAAK,4DACZkJ,UAAS,CAAAnJ,GAAA,4CAAAC,eAAK,4KACdmJ,YAAW,CAAApJ,GAAA,8CAAAC,eAAI,yCACf+H,iBAAgB,CAAAhI,GAAA,mDAAAC,eAAG,kFAGLyH,MAAyB,CACvClE,UAAW,YACXK,UAAW,OACX+B,SCrBc,SAAkBxC,GAAyB,IAAlBwE,EAAkB1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAGrD,GAAsB,IAAjB9B,EAAM+B,OACV,OAAOyC,EAAYC,QAKpB,IAFmB,0DACUU,KAAKnF,GAEjC,OAAOwE,EAAYI,iBAGpB,IAAMqB,EAAcC,KAAKC,MAAMnG,GAC/B,GAAKoG,MAAMH,GACV,OAAOzB,EAAYI,iBAEpB,IAAMyB,EAAUH,KAAKI,MAIrB,OAAKL,EAAcI,EACX7B,EAAYwB,cAGfK,EAAUJ,EAAc,UACrBzB,EAAYuB,WDJpBlE,gBACAK,iBAAkB,CAACsC,GAAqBA,GAAuBA,GAAyBA,MErB1EF,MAAyB,CACvClE,UAAW,cACXK,UAAW,WCAL,IAIMoB,GAAenF,YAAe,CAC1CoI,WAAU,CAAAlI,GAAA,6CAAAC,eAAE,oDAGEyH,MAAyB,CACvClE,UAAW,YACXK,UAAW,WACX+B,SCfc,SAAkBxC,GACjC,IADwCwE,EACxC1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GADsD,GAGrD,QAAK9B,GAASA,EAAM+B,OAAS,MACrByC,EAAYM,YDYpBjD,kBEZM,IAIMA,GAAenF,YAAe,CAC1C6J,UAAS,CAAA3J,GAAA,gEAAAC,eAAE,sFAGGyH,MAAyB,CACvClE,UAAW,kCACXK,UAAW,WACX+B,SCfc,SAAkBxC,GAAyB,IAAlBwE,EAAkB1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GACrD,QAAO9B,GAEJwE,EAAY+B,WDaf1E,kBEuBcxF,WAnCF,SAAAf,GAAA,IAEX8E,EAFW9E,EAEX8E,UAAWoG,EAFAlL,EAEAkL,SAAUhG,EAFVlF,EAEUkF,MAAOS,EAFjB3F,EAEiB2F,QAAS1E,EAF1BjB,EAE0BiB,SACrCoE,EAHWrF,EAGXqF,WAAYK,EAHD1F,EAGC0F,MAAOH,EAHRvF,EAGQuF,SAAUC,EAHlBxF,EAGkBwF,SAE7BlD,EALWtC,EAKXsC,SALW,OAiCbhC,EAAAC,EAAAC,cAAA0C,EAAA,OAxBA5C,EAAAC,EAAAC,cAAA2C,EAAA,GAAAC,QAAA0B,GAAAI,GAEA5E,EAAAC,EAAAC,cAAAoH,EAAA,GAAAlH,KAAA,OAAA4C,KAAAwB,EAAAxD,GAAAwD,EAAAI,MAAAgG,EAAAxF,QAAAC,UAAA1F,SAAAoF,EAAA/C,aAWAhC,EAAAC,EAAAC,cAAA6C,EAAA,GAAA3C,KAAA,SAAAgF,QAAAC,YAMArF,EAAAC,EAAAC,cAAAoF,EAAA,GAAAF,OAAA,GAAAH,GAGAjF,EAAAC,EAAAC,cAAAoF,EAAA,GAAAF,OAAA,GAAApF,EAAAC,EAAAC,cAAA,WAAAS,IAEAuE,KC3Bae,GAAenF,YAAe,CAC1C+J,eAAc,CAAA7J,GAAA,6CAAAC,eAAG,2CACjB6J,kBAAiB,CAAA9J,GAAA,gDAAAC,eAAG,gDACpB8J,UAAS,CAAA/J,GAAA,wCAAAC,eAAK,qCAuBA+J,GApBG,SAAAtL,KAEhB8E,UAFgB9E,EAELuL,WAFK,IAEOnG,EAFPpF,EAEOoF,UAAWnE,EAFlBjB,EAEkBiB,SAClCoE,EAHgBrF,EAGhBqF,WAAYC,EAHItF,EAGJsF,QAASC,EAHLvF,EAGKuF,SAAU2F,EAHflL,EAGekL,SAAUhG,EAHzBlF,EAGyBkF,MAEzC5C,EALgBtC,EAKhBsC,SALgB,OAQlBhC,EAAAC,EAAAC,cAAAgL,GAAA,CAAA1G,UAAA,QAAAI,QAAAgG,WAAAvF,QAAAP,EAAAnE,WAAAoE,aAAAK,MAAAJ,EAAAC,WAAAjD,cChBA,IAEMnB,GAAWC,YAAe,CAC/BqK,yBAAwB,CAAAnK,GAAA,uDAAAC,eAAE,kBAGrB0G,GAAmBhB,ECdV,SAAkByE,GAAwB,IAAlBxC,EAAkB1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAEpD,IAAOkF,EACN,OAAOxC,EAAYiC,eAGpB,IAAMQ,EAAMD,EAAKpI,KAAKsI,MAAM,KAAKC,MAAMC,cAEvC,MADyB,CAAC,MAAO,OAAOhF,KAAM,SAAAiF,GAAW,OAAIA,IAAgBJ,MAKxED,EAAK/K,KAAO,UACTuI,EAAYmC,UAJZnC,EAAYkC,mBDKmC7E,IAwBpD2B,GAAYnE,YAtBQ,SAACC,EAAOmE,GAAa,IAAAC,EACVpE,EAAMqE,OAAOxD,KAAb,MAA1BE,EADoCqD,EACpCrD,eACFmG,EAFsC9C,EACpB1D,MACDpB,MAAQ6E,EAASjG,KAAKD,cAAcd,GAASsK,0BAC9DxK,EAAWkH,EAASlH,SACvBkH,EAASlH,SACToF,EAAa8B,EAASjG,KAAM6C,EAAgBwB,IAC/C,MAAO,CACNnB,YAAanE,EACbA,WACAiK,aAIyB,SAAAhH,GAAQ,MAAK,CACvC5B,SAAU,SAAA6B,GACT,IAAMuH,EAAOvH,EAAMG,OAAO0H,MAAM,GAChC,IAAON,EAAO,OAAO,EACrB,IAAM3G,EAAiBkD,GAAiByD,GACxCxH,EAAS5B,EA1BO,QA0BaoJ,EAAM3G,OAIrBhB,CAGduH,IAEatJ,eAAWkG,IEvCnB,IAOM3B,GAAenF,YAAe,CAC1C+H,QAAO,CAAA7H,GAAA,0CAAAC,eAAK,mDACZ6H,eAAc,CAAA9H,GAAA,iDAAAC,eAAG,2CACjB+H,iBAAgB,CAAAhI,GAAA,mDAAAC,eAAG,gFACnBiI,WAAU,CAAAlI,GAAA,6CAAAC,eAAI,yCAGAyH,MAAyB,CACvClE,UAAW,YACXK,UAAW,OACX+B,SCrBc,SAAkBxC,GACjC,IADwCwE,EACxC1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GADsD,GAGrD,GAAsB,IAAjB9B,EAAM+B,OACV,OAAOyC,EAAYC,QAGpB,GAAKzE,EAAM+B,OAAS,GACnB,OAAOyC,EAAYM,WAGpB,IACIlE,EADqB,6BACMuE,KAAKnF,EAAMoF,OAAO,IACjD,OAAOxE,KAMPA,EADkB,+BACEuE,KAAKnF,KAEjBwE,EAAYI,iBAPZJ,EAAYE,gBDQpB7C,gBACAK,iBAAkB,CAlBN,aEDN,IAAMsC,GACA,UADAA,GAKK,gBALLA,GAMK,iBAGL3C,GAAenF,YAAe,CAC1C+H,QAAO,CAAA7H,GAAA,yCAAAC,eAAK,0DACZ6H,eAAc,CAAA9H,GAAA,gDAAAC,eAAG,gDACjB+H,iBAAgB,CAAAhI,GAAA,kDAAAC,eAAG,oFACnBiI,WAAU,CAAAlI,GAAA,4CAAAC,eAAI,8CACd8H,cAAa,CAAA/H,GAAA,+CAAAC,eAAI,8CACjB0K,eAAc,CAAA3K,GAAA,gDAAAC,eAAG,sCAGHyH,MAAyB,CACvClE,UAAW,WACXK,UAAW,OACX+B,SCzBc,SAAkBxC,GACjC,IADwCwE,EACxC1C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GADsD,GAGrD,GAAsB,IAAjB9B,EAAM+B,OACV,OAAOyC,EAAYC,QAGpB,GAAKzE,EAAM+B,OAAS,GACnB,OAAOyC,EAAYM,WAGpB,IACIlE,EADqB,6BACMuE,KAAKnF,EAAMoF,OAAO,IACjD,OAAOxE,GAMPA,EADwB,6BACEuE,KAAKnF,EAAMoF,OAAOpF,EAAM+B,OAAO,MAOzDnB,EADoB,6BACEuE,KAAKnF,IAEnBwE,EAAY+C,kBAKpB3G,EADkB,uDACEuE,KAAKnF,KAEjBwE,EAAYI,iBAdZJ,EAAYG,cAPZH,EAAYE,gBDYpB7C,gBACAK,iBAAkB,CAACsC,GAAqBA,GAA2BA,MEnB9DgD,GAAiC,SAACC,GAAD,OAAYA,EAAOC,MAAM,SAAAC,GAAK,OAAyB,IAArBA,EAAM5D,cAGzE6D,GAA0B,SAACtI,GAChC,IAP0BmI,EAOpBI,EAAWvI,EAAMqE,OAAOxD,KAM9B,MALmB,EAROsH,EASP9E,OAAOmF,OAAOD,GATIJ,EAAOC,MAAM,SAAAC,GAAK,OAAIA,EAAMtH,iBAAmB8B,MAUnFqF,GAA+B7E,OAAOmF,OAAOD,IAC7CA,EAAS5H,SAASD,QAAU6H,EAASE,qBAAqB/H,OAEzC0H,MAAO,SAAAM,GAAI,OAAIA,KAQnB3I,eALS,SAACC,GAAD,MAAY,CACnC/D,UAAWqM,GAAwBtI,IAAUA,EAAMqE,OAAO/B,OAAOnG,UACjEA,UAAW6D,EAAMqE,OAAO/B,OAAOnG,YAGjB4D,CAAyBmE,gCCbzBnH,WAVF,SAAAf,GAAA,IACZ2M,EADY3M,EACZ2M,QAAStM,EADGL,EACHK,QADG,OAQbC,EAAAC,EAAAC,cAAA,OAAAc,GAAA,YAHAhB,EAAAC,EAAAC,cAAA,KAAAmM,WAAAtM,GAGAC,EAAAC,EAAAC,cAAA,OAAAN,UAAA,iBAAAI,EAAAC,EAAAC,cAAA,OAAAN,UAAA,SAAAI,EAAAC,EAAAC,cAAA,OAAAN,UAAA,8CCNO,SAAS0M,GAAQC,GACvB,OAAO,IAAIC,QAAQ,SAAAC,GAAO,OAAIC,WAAW,kBAAMD,KAAWF,KAI3D,IAAM1L,GAAWC,YAAe,CAC/B6L,sBAAqB,CAAA3L,GAAA,wBAAAC,eAAE,uKACvB2L,mBAAkB,CAAA5L,GAAA,qBAAAC,eAAE,0MAId,SAAS4L,GAAgBhH,EAAOjE,GACtC,IAAIkL,EACJ,GAAKjH,EAAMkH,SAAW,CAGrBC,QAAQC,IAAIrL,GACZ,IAAMsL,EAAerH,EAAMkH,SAASxI,KAAK4I,SACrCvL,EAAKD,cAAcd,GAAS+L,oBAEhCE,EAAG,GAAAnD,OAAMuD,EAAN,MAAAvD,OAAuB9D,EAAMkH,SAAS/G,OAAtC,KAAA2D,OAAgD9D,EAAMkH,SAASK,iBAMlEN,EAJSjH,EAAMwH,QAITzL,EAAKD,cACVd,GAAS8L,sBACT,CAAEhM,SAAUkF,EAAMyH,UAKbzH,EAAMyH,QAEb,OAAOR,EAID,SAASS,GAAoBC,GAEnC,IAAMC,EAAmBC,aAAaC,QAAQ,UAC9C,IAAOF,EAAmB,OAAO,KAHY,IAAAG,EAMAC,KAAKtD,MAAMkD,GAAxCK,EAN6BF,EAMrCG,OAAwBlN,EANa+M,EAMb/M,SAChC,OAAKiN,IAAmBN,EAChB,KAED3M,EClDD,SAAemN,GAAtBC,EAAAC,GAAA,OAAAC,GAAAC,MAAAC,KAAAnI,0DAAO,SAAAoI,EAAkCC,EAAWrM,GAA7C,IAAAsM,EAAA,OAAAC,GAAAxO,EAAAyO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAAAF,EAAAG,GAAAL,GAAAxO,EAAA6G,KACiByH,GADjB,WAAAI,EAAAI,GAAAJ,EAAAG,MAAAE,KAAA,CAAAL,EAAAE,KAAA,eACIL,EADJG,EAAAI,GAAA3K,MAAAuK,EAAAE,KAAA,EAECI,GAAYT,EAAWD,EAAUC,GAAYtM,GAF9C,cAAAyM,EAAAE,KAAA,EAGCvC,GAAQpK,EAAQgN,IAHjB,OAAAP,EAAAE,KAAA,gCAAAF,EAAAQ,SAAAb,6BASP,IAAMc,GAAa,IAAIC,MAAM,QAAS,CAACC,SAAS,IAC1CC,GAAY,IAAIF,MAAM,OAAQ,CAACC,SAAS,IACxCE,GAAa,IAAIH,MAAM,QAAS,CAACC,SAAS,IAC1CG,GAA2B,EAC3BP,GAAuB,GAG7B,SAASQ,GAAkBC,EAASvL,GACnCuL,EAAQvL,MAAQA,WAGFwL,yFAAf,SAAAC,EAAsCF,EAASG,EAAU5N,GAAzD,OAAAuM,GAAAxO,EAAAyO,KAAA,SAAAqB,GAAA,cAAAA,EAAAnB,KAAAmB,EAAAlB,MAAA,cAAAkB,EAAAC,OAAA,SACQC,GAAeP,GAAmBC,EAASG,EAAU5N,IAD7D,wBAAA6N,EAAAZ,SAAAU,sCAIeK,yFAAf,SAAAC,EAA2CR,EAASG,EAAU5N,GAA9D,OAAAuM,GAAAxO,EAAAyO,KAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAJ,OAAA,SACQC,GAAeI,GAAgBV,EAASG,EAAU5N,IAD1D,wBAAAkO,EAAAjB,SAAAgB,sCAIeF,2FAAf,SAAAK,EAA8BC,EAAUZ,EAASG,EAAU5N,GAA3D,IAAA8E,EAAA,OAAAyH,GAAAxO,EAAAyO,KAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,OACW7H,EAAI,EADf,YACkBA,EAAI8I,EAAS3J,QAD/B,CAAAqK,EAAA3B,KAAA,eAEE0B,EAASZ,EAASG,EAASW,MAAM,EAAGzJ,EAAE,IACtC2I,EAAQe,cAActB,IAHxBoB,EAAA3B,KAAA,EAIQvC,GAAQpK,GAJhB,OACuC8E,IADvCwJ,EAAA3B,KAAA,gCAAA2B,EAAArB,SAAAmB,6BAQA,SAASK,GAAahB,GACrBA,EAAQiB,QAGT,SAASC,GAAclB,EAASvL,GAC/BiM,GAAeV,EAASvL,GACxBuL,EAAQe,cAActB,aAGRH,yFAAf,SAAA6B,EAA2BtC,EAAWsB,EAAU5N,GAAhD,IAAAyN,EAAAY,EAAA,OAAA9B,GAAAxO,EAAAyO,KAAA,SAAAqC,GAAA,cAAAA,EAAAnC,KAAAmC,EAAAlC,MAAA,OACOc,EAAUqB,SAASC,eAAezC,GAEpC+B,EAAW,KAHhBQ,EAAAjC,GAIUgB,EAAS1P,KAJnB2Q,EAAAlC,KAKO,UALPkC,EAAAjC,GAAA,EAUO,YAVPiC,EAAAjC,GAAA,EAeO,aAfPiC,EAAAjC,GAAA,0BAMGyB,EAAWI,GACXb,EAAW,KAPdiB,EAAAf,OAAA,0BAWGO,EAAWM,GACXf,EAAWA,EAAS1L,MAZvB2M,EAAAf,OAAA,2BAgBGO,EAAWX,GACXE,EAAWA,EAAS1L,MAjBvB2M,EAAAf,OAAA,oBAqBGO,EAAWL,GArBd,eAwBCP,EAAQe,cAAclB,IACtBG,EAAQuB,QAzBTH,EAAAlC,KAAA,GA0BOvC,GAAQ,KA1Bf,eAAAyE,EAAAlC,KAAA,GA2BO0B,EAASZ,EAASG,EAAU5N,GA3BnC,eAAA6O,EAAAlC,KAAA,GA4BOvC,GAAQpK,EAAQuN,IA5BvB,QA6BCE,EAAQe,cAAcnB,IA7BvB,yBAAAwB,EAAA5B,SAAA2B,6BAgCA,SAAST,GAAeV,EAASvL,GAChC,IAAM+M,EAAcpK,OAAOqK,yBAAyBzB,EAAS,SAAS0B,IAChEC,EAAYvK,OAAOwK,eAAe5B,GAClC6B,EAAuBzK,OAAOqK,yBAAyBE,EAAW,SAASD,IAE5EF,GAAeA,IAAgBK,EACnCA,EAAqBC,KAAK9B,EAASvL,GAEnC+M,EAAYM,KAAK9B,EAASvL,GCrF5B,IAuCe4G,GAvCG,SAAAtL,GAEZ,IADLK,EACKL,EADLK,QAEM2R,EAAM,eAAArK,EAAAN,OAAA4K,GAAA,EAAA5K,CAAA0H,GAAAxO,EAAA2R,KAAG,SAAAtD,IAAA,IAAArC,EAAA,OAAAwC,GAAAxO,EAAAyO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAER5C,EAAW,CAChB4F,UAAa,QACbC,SAAY,WACZ5N,SAAY,iBACZG,SAAY,iBACZ8H,qBAAwB,iBACxB4F,MAAS,qBACTC,YAAe,CACd5R,KAAM,SAEP6R,MAAS,mBACTC,UAAa,CACZ9R,KAAM,UACNgE,MAAO,cAER+N,UAAa,CACZ/R,KAAM,WACNgE,MAAO,+DAnBKuK,EAAAE,KAAA,EAyBRb,GAAmB/B,EAFI,KAvBf,wBAAA0C,EAAAQ,SAAAb,MAAH,yBAAAjH,EAAA+G,MAAAC,KAAAnI,YAAA,GA4BZ,OAEDlG,EAAAC,EAAAC,cAAAkS,GAAA,CAAA/F,QAAAqF,EAAA3R,aCVMc,GAAWC,YAAe,CAC/BuR,gBAAe,CAAArR,GAAA,wCAAAC,eAAE,WACjBqR,eAAc,CAAAtR,GAAA,uCAAAC,eAAE,iFAChBsR,eAAc,CAAAvR,GAAA,uCAAAC,eAAE,cAChBuR,cAAa,CAAAxR,GAAA,sCAAAC,eAAE,eACfwR,YAAW,CAAAzR,GAAA,oCAAAC,eAAE,YACbyR,WAAU,CAAA1R,GAAA,mCAAAC,eAAE,mNACZG,cAAa,CAAAJ,GAAA,sCAAAC,eAAE,YACf0R,aAAY,CAAA3R,GAAA,qCAAAC,eAAE,2NACd2R,0BAAyB,CAAA5R,GAAA,kDAAAC,eAAE,yBAC3B4R,yBAAwB,CAAA7R,GAAA,iDAAAC,eAAE,8CAC1B6R,WAAU,CAAA9R,GAAA,mCAAAC,eAAE,SACZ8R,UAAS,CAAA/R,GAAA,kCAAAC,eAAE,oGACX+R,iBAAgB,CAAAhS,GAAA,yCAAAC,eAAE,eAClBgS,gBAAe,CAAAjS,GAAA,wCAAAC,eAAE,4CACjBiS,WAAU,CAAAlS,GAAA,mCAAAC,eAAE,gBACZkS,UAAS,CAAAnS,GAAA,kCAAAC,eAAE,sHACXmS,eAAc,CAAApS,GAAA,uCAAAC,eAAE,aAChBoS,cAAa,CAAArS,GAAA,sCAAAC,eAAE,mDACfqS,eAAc,CAAAtS,GAAA,uCAAAC,eAAE,mBAChBsS,WAAU,CAAAvS,GAAA,mCAAAC,eAAE,SACZuS,UAAS,CAAAxS,GAAA,kCAAAC,eAAE,gDACXwS,mCAAkC,CAAAzS,GAAA,2DAAAC,eAAE,iDACpCyS,kCAAiC,CAAA1S,GAAA,0DAAAC,eAAE,sFACnCI,oBAAmB,CAAAL,GAAA,4CAAAC,eAAE,WACrBK,8BAA6B,CAAAN,GAAA,sDAAAC,eAAE,WAC/B0S,iBAAgB,CAAA3S,GAAA,yCAAAC,eAAE,iBAClB2S,gBAAe,CAAA5S,GAAA,wCAAAC,eAAE,sBACjB4S,iBAAgB,CAAA7S,GAAA,yCAAAC,eAAE,UAClB6S,mBAAkB,CAAA9S,GAAA,2CAAAC,eAAE,2BACpB8S,qBAAoB,CAAA/S,GAAA,6CAAAC,eAAE,qDACtB+S,eAAc,CAAAhT,GAAA,uCAAAC,eAAE,UAiIFR,GA9HF,SAAAf,GAAA,IACJiC,EADIjC,EACZkC,KAAQD,cAAiBI,EADbrC,EACaqC,SAAqBF,GADlCnC,EACuBG,UADvBH,EACkCmC,eAAeoS,EADjDvU,EACiDuU,aAA4DC,GAD7GxU,EAC+DyU,qBAD/DzU,EACqF0U,uBADrF1U,EAC6GwU,OAAOG,EADpH3U,EACoH2U,QADpH,OA4HbrU,EAAAC,EAAAC,cAAA,OAAAc,GAAA,cAAAhB,EAAAC,EAAAC,cAAA+B,EAAAhC,EAAA,CAAAiC,MAAA,KAAAlC,EAAAC,EAAAC,cAAAiC,EAAA,OAAAnC,EAAAC,EAAAC,cAAAkC,EAAA,OAAApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAzC,UAAA,WAnHAqU,EAmHAjU,EAAAC,EAAAC,cAAAkC,EAAA,OAAApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,EAAAC,GAAA,EAAAC,GAAA,EAAA5U,UAAA,WAAAI,EAAAC,EAAAC,cAAAU,EAAA,GAAAN,MAAA,UAAAV,UAAA,OAJAI,EAAAC,EAAAC,cAAA,MAAAN,UAAA,iBAAA+B,EAAA8S,GAAAX,qBAEA9T,EAAAC,EAAAC,cAAA,SAAAyB,EAAA8S,GAAAV,uBAEA/T,EAAAC,EAAAC,cAAAkD,EAAA,GAAAC,GAAA,IAAAzD,UAAA,gCAAA+B,EAAA8S,GAAAZ,kBAAA,mBAVA7T,EAAAC,EAAAC,cAAAF,EAAAC,EAAAM,SAAA,KAxGAP,EAAAC,EAAAC,cAAAwU,GAAA,CAAA3U,QAAA4B,EAAA8S,GAAAT,kBAwGAhU,EAAAC,EAAAC,cAAAoC,EAAA,GAAAC,MAAA,GArGAvC,EAAAC,EAAAC,cAAAsC,EAAA,GAAA5C,UAAA,QAAA+B,EAAA8S,GAAApC,kBAEArS,EAAAC,EAAAC,cAAAwC,EAAA,GAAA9C,UAAA,gCAAA+B,EAAA8S,GAAAnC,iBAmGAtS,EAAAC,EAAAC,cAAAyC,EAAA,GAAAZ,YA3FA/B,EAAAC,EAAAC,cAAAkC,EAAA,OAHApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,EAAA1U,UAAA,gBAAAI,EAAAC,EAAAC,cAAAyU,GAAA,CAAA/P,MAAAjD,EAAA8S,GAAAlC,mBAGAvS,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,EAAAD,WAAArU,EAAAC,EAAAC,cAAA0U,GAAA,CAAAhQ,MAAAjD,EAAA8S,GAAAjC,mBAeAxS,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAAsU,EAAA,IAPAlU,EAAAC,EAAAC,cAAAkC,EAAA,OAHApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA2U,GAAA,CAAAjQ,MAAAjD,EAAA8S,GAAAhC,gBAGAzS,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAA+B,EAAA8S,GAAA/B,eAOA1S,EAAAC,EAAAC,cAAAkC,EAAA,OAHApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA4U,GAAA,CAAAlQ,MAAAjD,EAAA8S,GAAArT,kBAGApB,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAA+B,EAAA8S,GAAA9B,kBAQA3S,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAAsU,EAAA,IAAAlU,EAAAC,EAAAC,cAAAkC,EAAA,OAHApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA6U,GAAA,CAAAnQ,MAAAjD,EAAA8S,GAAA7B,8BAGA5S,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAA+B,EAAA8S,GAAA5B,8BAeA7S,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAAsU,EAAA,IAPAlU,EAAAC,EAAAC,cAAAkC,EAAA,GAAApB,GAAA,eAHAhB,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA8U,GAAA,CAAApQ,MAAAjD,EAAA8S,GAAA3B,eAGA9S,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAA+B,EAAA8S,GAAA1B,cAOA/S,EAAAC,EAAAC,cAAAkC,EAAA,GAAApB,GAAA,qBAHAhB,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA+U,GAAA,CAAArQ,MAAAjD,EAAA8S,GAAAzB,qBAGAhT,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAA+B,EAAA8S,GAAAxB,iBAAA,QAQAjT,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAAsU,EAAA,IAAAlU,EAAAC,EAAAC,cAAAkC,EAAA,OAHApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAAgV,GAAA,CAAAtQ,MAAAjD,EAAA8S,GAAAvB,eAGAlT,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAA+B,EAAA8S,GAAAtB,eAQAnT,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAAsU,EAAA,IAAAlU,EAAAC,EAAAC,cAAAkC,EAAA,OAHApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAAiV,GAAA,CAAAvQ,MAAAjD,EAAA8S,GAAArB,mBAGApT,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAA+B,EAAA8S,GAAApB,mBAKArT,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAAsU,EAAA,IAAAlU,EAAAC,EAAAC,cAAAkC,EAAA,OAAApC,EAAAC,EAAAC,cAAAmC,EAAA,OAAArC,EAAAC,EAAAC,cAAAkV,GAAA,CAAAxQ,MAAAjD,EAAA8S,GAAAnB,qBAkBAtT,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAAsU,EAAA,IAVAlU,EAAAC,EAAAC,cAAAkC,EAAA,OAHApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAAmV,GAAA,CAAAzQ,MAAAjD,EAAA8S,GAAAlB,eAGAvT,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAA+B,EAAA8S,GAAAjB,WAAA,OAOAxT,EAAAC,EAAAC,cAAAkC,EAAA,GAAApB,GAAA,yCAHAhB,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAAoV,GAAA,CAAA1Q,MAAAjD,EAAA8S,GAAAhB,uCAGAzT,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,GAAAtU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAA+B,EAAA8S,GAAAf,sCAGA1T,EAAAC,EAAAC,cAAA,OAAAc,GAAA,gBAAAhB,EAAAC,EAAAC,cAAAqV,GAAA,CAAA1V,WAAA,EAAAE,QAAA4B,EAAA8S,GAAApT,qBAAAvB,kBAAA6B,EAAA8S,GAAAnT,+BAAA1B,UAAA,oBAOAI,EAAAC,EAAAC,cAAA,OAAAN,UAAA,QAAAsU,EAAAsB,mBAAAxV,EAAAC,EAAAC,cAAA,OAAAN,UAAA,yBAEAiC,EACA7B,EAAAC,EAAAC,cAAAgD,EAAA,CAAAxC,MAAAiB,EAAA8S,GAAAd,kBAAAhT,SAAAkB,IAAA,KAIA7B,EAAAC,EAAAC,cAAAiD,EAAA,GAAAvD,UAAA,oBAFA+B,EAAA8S,GAAAb,iBACA,IACA5T,EAAAC,EAAAC,cAAAkD,EAAA,GAAAC,GAAA,WAAA1B,EAAA8S,GAAAZ,6BC5KApT,GAAK8E,UAAY,CAChB3D,KAAM6T,IAAU/P,YAGFhE,mBAAWjB,ICPb6C,GACI,cADJA,GAEW,uBAFXA,GAGU,sBAHVA,GAIG,aCAhB,SAASoS,GAAoBC,GAE5B,IADA,IAAIC,EAAS,GACH5O,EAAI,EAAGA,EAAI2O,EAAY3P,OAAO6P,KAAM7O,IAC7C4O,EAAOE,KAAK,YAEb,IAAMC,EAAkBJ,EAAYpR,KAAKoR,EAAY3P,OAAOgQ,yBACtDC,EAAwD,iBAAnCF,EAAgBtR,eACrCyR,GAAoD,KAA9BH,EAAgBlW,UACtCsW,GAAuBJ,EAAgB1P,iBAI7C,OAFAuP,EAAOJ,kBAAoBS,GAAsBC,GAAqBC,EAAqB,WAAa,GAEjGP,EAIR,IAcenS,eAdS,SAACC,GAAD,MAAY,CACnC7D,UAAW6D,EAAMqE,OAAO/B,OAAOnG,UAC/BoU,aAAcvQ,EAAMqE,OAAO/B,OAAOiO,aAClCpS,cAAe6B,EAAMqE,OAAO/B,OAAOnE,cACnCqS,MAAOwB,GAAoBhS,EAAMqE,UAGP,SAACnE,GAAD,MAAe,CACzC7B,SAAU,SAAC8B,GACVA,EAAMC,iBACNF,EDvB6B,CAC9BxD,KAAMkD,QC0BQG,CAA6Cd,ICtB7ClC,WARF,SAAAf,GAAA,IACZK,EADYL,EACZK,QADY,OAMbC,EAAAC,EAAAC,cAAA,OAAAc,GAAA,qBADAhB,EAAAC,EAAAC,cAAAM,EAAA,GAAAH,KAAA,KAAAC,MAAA,UAAAF,KAAA,SACAJ,EAAAC,EAAAC,cAAA,OAAAN,UAAA,0CAAAG,MCCeU,WAPF,SAAAf,GAAA,IACZ0W,EADY1W,EACZ0W,SAAUrW,EADEL,EACFK,QADE,OAKbC,EAAAC,EAAAC,cAAA,OAAAc,GAAA,gBAAAhB,EAAAC,EAAAC,cAAAC,EAAA,GAAAkM,QAAA+J,GAAArW,MCDe0D,eAAQ,KAJI,SAACG,GAAD,MAAe,CACzCwS,SAAU,kBAAMxS,E9CkBc,CAC9BxD,KAAMkD,O8ChBQG,CAAkChD,ICC3CI,WAAWC,YAAe,CAC/BuV,sBAAqB,CAAArV,GAAA,6CAAAC,eAAE,mBACvBqV,sBAAqB,CAAAtV,GAAA,6CAAAC,eAAE,8BACvBsV,oBAAmB,CAAAvV,GAAA,2CAAAC,eAAE,WACrBuV,gCAA+B,CAAAxV,GAAA,uDAAAC,eAAE,eACjCwV,oBAAmB,CAAAzV,GAAA,2CAAAC,eAAE,mBACrBiR,UAAS,CAAAlR,GAAA,iCAAAC,eAAE,uGAqDGS,eAlDF,SAAAhC,GAAA,IACJiC,EADIjC,EACZkC,KAAQD,cAAiB4C,EADb7E,EACa6E,KAAM1E,EADnBH,EACmBG,UAAWgC,EAD9BnC,EAC8BmC,cAD9B,OAgDb7B,EAAAC,EAAAC,cAAA,OAAAc,GAAA,aA3CAnB,EACAG,EAAAC,EAAAC,cAAAwW,GAAA,CAAA3W,QAAA4B,EAAAgV,GAAAN,yBAEAxU,EAIA7B,EAAAC,EAAAC,cAAAiC,EAAA,OAAAnC,EAAAC,EAAAC,cAAAkC,EAAA,OAAApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAuU,GAAA,EAAApC,GAAA,EAAA5U,UAAA,WAAAI,EAAAC,EAAAC,cAAAgD,EAAA,CAAAxC,MAAAiB,EAAAgV,GAAAL,uBAAA3V,SAAAkB,OAEA0C,EAkCAvE,EAAAC,EAAAC,cAAA+B,EAAAhC,EAAA,CAAAiC,MAAA,KAAAlC,EAAAC,EAAAC,cAAAiC,EAAA,OAAAnC,EAAAC,EAAAC,cAAAkC,EAAA,OAzBApC,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,EAAAC,GAAA,GAFAvU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,0CAAAI,EAAAC,EAAAC,cAAA,OAAAN,UAAA,qCAAAI,EAAAC,EAAAC,cAAA,OAAA2W,IAAAtS,EAAAuS,UAEA9W,EAAAC,EAAAC,cAAA6W,GAAA,CAAAhX,QAAA4B,EAAAgV,GAAAJ,wBAcAvW,EAAAC,EAAAC,cAAAmC,EAAA,GAAAiS,GAAA,EAAAC,GAAA,GAAAvU,EAAAC,EAAAC,cAAA,OAAAN,UAAA,aARAI,EAAAC,EAAAC,cAAAoC,EAAA,OADAtC,EAAAC,EAAAC,cAAAsC,EAAA,OAAA+B,EAAAsN,UAAA,IAAAtN,EAAAuN,UACA9R,EAAAC,EAAAC,cAAAwC,EAAA,OAAAf,EAAAgV,GAAAzE,UAAA,CAAAA,UAAA3N,EAAA2N,UAAA8E,IAAAzS,EAAAyS,QAGAhX,EAAAC,EAAAC,cAAAoC,EAAA,OAAAtC,EAAAC,EAAAC,cAAAwC,EAAA,OAAA6B,EAAA0N,QAKAjS,EAAAC,EAAAC,cAAAoC,EAAA,OAFAtC,EAAAC,EAAAC,cAAAwC,EAAA,OAAA6B,EAAAwN,OAEA/R,EAAAC,EAAAC,cAAA,WAAAF,EAAAC,EAAAC,cAAAoH,EAAA,GAAAtG,GAAA,QAAAZ,KAAA,SAAA6W,eAAA1S,EAAAyN,YAAArS,UAAA,EAAAiF,MAAAjD,EAAAgV,GAAAH,uCAOAjS,EAAA4N,UAIAnS,EAAAC,EAAAC,cAAAmC,EAAA,GAAAkS,GAAA,GAAAvU,EAAAC,EAAAC,cAAAoC,EAAA,GAAA1C,UAAA,uBADAI,EAAAC,EAAAC,cAAAsC,EAAA,OAAAb,EAAAgV,GAAAF,sBACAzW,EAAAC,EAAAC,cAAAwC,EAAA,OAAA6B,EAAA4N,aAAA,gBClEO,SAAS+E,GAAuBC,GAQtC,OALAA,EAAgBjF,UAAY,IAAI5H,KAAK6M,EAAgBjF,WAGrDiF,EAAgBH,IAKjB,SAAsB9E,GACrB,IAAMkF,EAAY9M,KAAKI,MAAQwH,EAAUmF,UACnCC,EAAU,IAAIhN,KAAK8M,GACzB,OAAOG,KAAKC,IAAIF,EAAQG,iBAAmB,MARrBC,CAAaP,EAAgBjF,WAE5CiF,ECJR,IAYe1T,eAZS,SAACC,GAAU,IAAAiU,EACoBjU,EAAMkU,YAAhDA,EADsBD,EAC5BpT,KAAmB1E,EADS8X,EACT9X,UAAWgC,EADF8V,EACE9V,cAIpC,OAHK+V,IACJA,EAAcV,GAAuBU,IAE/B,CACNrT,KAAMqT,EACN/X,YACAgC,kBAIa4B,CAAyBhD,ICDzBgD,eAXS,SAACC,GAAD,MAAY,CACnC5B,gBAAiB4B,EAAMC,KAAK7B,gBAC5B0B,MAAOE,EAAMC,KAAKH,QAGQ,SAACI,GAAD,MAAe,CACzCiU,qBAAsB,SAACrU,GACtBI,EAASL,EAAeC,OAIXC,CCbA,SAAA/D,GAGT,IAFLoC,EAEKpC,EAFLoC,gBAAiB0B,EAEZ9D,EAFY8D,MAEZ9D,EADLoY,sBAaA,OAXAC,oBAAU,WAEJjW,GAAmB0B,EACvBkK,aAAasK,QAAQ,MAAOxU,GAI5BkK,aAAauK,WAAW,QAEvB,CAACnW,EAAiB0B,IAEd,OCNO/C,WAPF,SAAAf,GAAA,IACZgB,EADYhB,EACZgB,MAAOwX,EADKxY,EACLwY,SAAU7L,EADL3M,EACK2M,QADL,OAKbrM,EAAAC,EAAAC,cAAA,OAAAc,GAAA,kBAAAhB,EAAAC,EAAAC,cAAAC,EAAA,GAAAC,KAAA,OAAAgE,MAAA8T,EAAA7L,WAAA3L,MCTa4C,GACY,wBADZA,GAEY,yBAFZA,GAGY,wBAHZA,GAIU,sBAGV6U,GAAwB,SAAC3K,GAAD,MAAe,CACnDpN,KAAMkD,GACNkK,aAGY4K,GAAyB,SAAC7T,GAAD,MAAW,CAChDnE,KAAMkD,GACNiB,SAGY8T,GAAwB,SAACxS,GAAD,MAAY,CAChDzF,KAAMkD,GACNuC,UAGYyS,GAAsB,iBAAO,CACzClY,KAAMkD,KCPQG,eAZS,SAAAC,GAAS,IACxBqK,EAAWrK,EAAK,KAAhBqK,OACR,MAAO,CACNrN,MAAkB,OAAXqN,EAAkB,0DAAe,oBACxCmK,SAAqB,OAAXnK,EAAkB,KAAO,OAIV,SAAAnK,GAAQ,MAAK,CACvCyI,QAAS,SAACkM,GAAD,OAAO3U,EAASuU,GAAsBI,EAAEvU,OAAOI,WAG1CX,CAA6ChD,ICHtDI,WAAWC,YAAe,CAC/B0X,uBAAsB,CAAAxX,GAAA,wCAAAC,eAAE,6BAqCVwX,GAlCC,SAAA/Y,GAAA,IACfkC,EADelC,EACfkC,KACAE,EAFepC,EAEfoC,gBACA4W,EAHehZ,EAGfgZ,sBACAC,EAJejZ,EAIfiZ,kBAJe,OAgChB3Y,EAAAC,EAAAC,cAAA,OAAAc,GAAA,OAxBAhB,EAAAC,EAAAC,cAAA0Y,GAAA,MAEAF,EACA1Y,EAAAC,EAAAC,cAAAwW,GAAA,MAqBA1W,EAAAC,EAAAC,cAAAF,EAAAC,EAAAM,SAAA,KATAP,EAAAC,EAAAC,cAAA,OAAAN,UAAA,uBAAAI,EAAAC,EAAAC,cAAAiC,EAAA,OAAAnC,EAAAC,EAAAC,cAAAkC,EAAA,OAAApC,EAAAC,EAAAC,cAAAmC,EAAA,OALAsW,EACA3Y,EAAAC,EAAAC,cAAAgD,EAAA,CAAAxC,MAAAkB,EAAAD,cAAAkX,GAAAL,wBAAA7X,SAAAgY,IAIA3Y,EAAAC,EAAAC,cAAA,OAAAN,UAAA,8BAAAI,EAAAC,EAAAC,cAAA4Y,GAAA,WASA9Y,EAAAC,EAAAC,cAAA6Y,EAAA,OANA/Y,EAAAC,EAAAC,cAAA8Y,GAAA,CAAAC,OAAA,EAAAC,KAAA,UAAApX,oBAEA9B,EAAAC,EAAAC,cAAA6Y,EAAA,GAAAE,OAAA,EAAAC,KAAA,WAAAC,UAAAC,KAEApZ,EAAAC,EAAAC,cAAAmZ,GAAA,CAAAJ,OAAA,EAAAC,KAAA,cAAAC,UAAAG,GAAAxX,kBAAAyX,WAAA,WAEAvZ,EAAAC,EAAAC,cAAAsZ,GAAA,CAAA1X,wBAIM2X,GAAiB,SAAApS,GAGjB,IAFMO,EAENP,EAFL8R,UACAF,EACK5R,EADL4R,MAAOC,EACF7R,EADE6R,KAAMpX,EACRuF,EADQvF,gBAAiByX,EACzBlS,EADyBkS,WAExBG,EAAkB5X,EACrB,kBACJ9B,EAAAC,EAAAC,cAAA0H,EAAA,OAAI,kBACJ5H,EAAAC,EAAAC,cAAA6Y,EAAA,GAAA1V,GAAAkW,KAAC,OAEDvZ,EAAAC,EAAAC,cAAA6Y,EAAA,GAAAE,QAAAC,OAAAS,OAAAD,KAGME,GAAe,SAAAjR,GAAuB,IACrC+Q,EADqC/Q,EAArB7G,gBAEnB,kBACJ9B,EAAAC,EAAAC,cAAA6Y,EAAA,GAAA1V,GAAA,gBAAI,kBACJrD,EAAAC,EAAAC,cAAA6Y,EAAA,GAAA1V,GAAA,YAAC,OAEDrD,EAAAC,EAAAC,cAAA6Y,EAAA,GAAAE,OAAA,EAAAC,KAAA,IAAAS,OAAAD,KAGMG,GAAa,SAAAC,GAEb,IADLhY,EACKgY,EADLhY,gBAAiBmX,EACZa,EADYb,MAAOC,EACnBY,EADmBZ,KAElBQ,EAAkB5X,EACrB,kBACJ9B,EAAAC,EAAAC,cAAA6Y,EAAA,GAAA1V,GAAA,gBAAI,kBACJrD,EAAAC,EAAAC,cAAA6Z,EAAA,OAAC,OAED/Z,EAAAC,EAAAC,cAAA6Y,EAAA,GAAAE,QAAAC,OAAAS,OAAAD,KChCehY,eAAWsY,YA7CR,SAAAta,GAUZ,IATLoC,EASKpC,EATLoC,gBACA4W,EAQKhZ,EARLgZ,sBACAC,EAOKjZ,EAPLiZ,kBACAsB,EAMKva,EANLua,iBACAC,EAKKxa,EALLwa,gBACAC,EAIKza,EAJLya,WACAvY,EAGKlC,EAHLkC,KACAwY,EAEK1a,EAFL0a,QACAC,EACK3a,EADL2a,QA0BA,OAxBAtC,oBAAU,WAITmC,EAAgBI,QAAQ,CAAEH,eAC1BA,EAAWvY,KAAOA,GAChB,CAACuY,EAAYvY,EAAMsY,IAEtBnC,oBAAU,WAEJjW,GACJmY,KAEC,CAACnY,EAAiBmY,IAErBlC,oBAAU,WAMT,OAHoBqC,EAAQG,OAAQ,SAACC,EAAUC,GAC9CJ,OAGC,CAACD,EAASC,IAIdra,EAAAC,EAAAC,cAAAwa,GAAA,CAAA5Y,kBAAA4W,wBAAAC,oBAAA/W,YC1Ca0B,GACU,qBADVA,GAEW,sBAFXA,GAGU,qBAHVA,GAIA,WCeEG,eAfS,SAACC,GAAD,MAAY,CACnC5B,gBAAiB4B,EAAMC,KAAK7B,gBAC5B4W,sBAAuBhV,EAAMiX,KAAK9a,UAClC8Y,kBAAmBjV,EAAMiX,KAAK9U,QAGJ,SAACjC,GAAD,MAAe,CACzCqW,iBAAkB,WACjBrW,EDLuC,CACxCxD,KAAMkD,MCMN+W,QAAS,WACRzW,EDM8B,CAC/BxD,KAAMkD,QCHQG,CAA6CmE,ICPxCgT,QACW,cAA7BC,OAAOL,SAASM,UAEe,UAA7BD,OAAOL,SAASM,UAEhBD,OAAOL,SAASM,SAASC,MACvB,gHCQSC,GAAA,CArBGC,aAAY,CAC7B7a,KAAMkD,EACN4X,eAAgB,CACfC,YAAc5X,EACd6X,S5DS2B,SAACvV,GAAD,MAAY,CACxCzF,KAAMkD,EACNuC,W4DTMwV,QANuB,eAAAC,EAAAvU,OAAA4K,GAAA,EAAA5K,CAAA0H,GAAAxO,EAAA2R,KAAA,SAAAtD,EAAA5O,GAAA,IAAA+a,EAAA7Y,EAAAmL,EAAA,OAAA0B,GAAAxO,EAAAyO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAMb4L,EANa/a,EAMb+a,OAAuB7Y,EANVlC,EAMJya,WAAcvY,KANV+M,EAAAE,KAAA,EAOtBvC,GAAQ,KAPc,cAAAqC,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EASJ0M,KAAM,CAC5BC,IAAK,YACLC,OAAQhB,EAAOlW,OAXW,cASrBwI,EATqB4B,EAAA+M,KAAA/M,EAAAqB,OAAA,SAapBjD,EAASxI,KAAKA,MAbM,eAAAoK,EAAAC,KAAA,GAAAD,EAAAG,GAAAH,EAAA,SAAAA,EAAAqB,OAAA,SAgBpBxD,QAAQmP,OAAO9O,GAAe8B,EAAAG,GAAQlN,KAhBlB,yBAAA+M,EAAAQ,SAAAb,EAAA,kCAAAL,GAAA,OAAAqN,EAAAlN,MAAAC,KAAAnI,YAAA,MC8Cf0V,GAAA,CA7CWX,aAAY,CACrC7a,KAAMkD,GACNsD,SAFqC,SAAAlH,EAEhBmc,EAAOF,GAAQ,IAAzBlB,EAAyB/a,EAAzB+a,OAGV,GAAyB,OAApBA,EAAOjN,SAGX,OAFAsO,KAAOzK,IAAI,SAAU,MACrB3D,aAAauK,WAAW,UACjB0D,EAAOvD,GAAuB,CAAErK,OAAQ,QAI/C,IAAMlN,EAAW0M,GAAoBkN,EAAOjN,UAC5C,GAAK3M,EAEJ,OADAib,KAAOzK,IAAI,SAAUoJ,EAAOjN,UACrBmO,EAAOvD,GAAuB,CAAErK,OAAQ0M,EAAOjN,SAAU3M,cAGlEgb,EAAMpB,IAEPS,eAAgB,CACfC,YAAc/C,GACdgD,SAAY/C,IAEPgD,QAxB+B,eAAAC,EAAAvU,OAAA4K,GAAA,EAAA5K,CAAA0H,GAAAxO,EAAA2R,KAAA,SAAAtD,EAAAjH,GAAA,IAAAoT,EAAA7Y,EAAAmL,EAAAxI,EAAAkJ,EAAA,OAAAgB,GAAAxO,EAAAyO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAwBrB4L,EAxBqBpT,EAwBrBoT,OAAsB7Y,EAxBDyF,EAwBb8S,WAAcvY,KAxBD+M,EAAAE,KAAA,EAyB9BvC,GAAQ,KAzBsB,cAAAqC,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EA2BZ0M,KAAM,CAC5BC,IAAK,kBACLC,OAAQ,CACPza,GAAIyZ,EAAOjN,YA9BsB,cA2B7BT,EA3B6B4B,EAAA+M,KAkC7BnX,EAAOwI,EAASxI,KAAKA,KACrBkJ,EAAmBI,KAAKkO,UAAUxX,GACxCmJ,aAAasK,QAAQ,SAAUvK,GApCIkB,EAAAqB,OAAA,SAqC5BxD,QAAQC,QAAQlI,IArCY,eAAAoK,EAAAC,KAAA,GAAAD,EAAAG,GAAAH,EAAA,SAAAA,EAAAqB,OAAA,SAwC5BxD,QAAQmP,OAAO9O,GAAe8B,EAAAG,GAAQlN,KAxCV,yBAAA+M,EAAAQ,SAAAb,EAAA,kCAAAL,GAAA,OAAAqN,EAAAlN,MAAAC,KAAAnI,YAAA,MCNzB5C,GAAc,CAC1B0Y,iBAAqB,mBACrBC,kBAAsB,oBACtBC,wBAA0B,2BCI3B,IAyDeC,GAzDYlB,aAAY,CACtC7a,KAAMgc,EACNxV,SAFsC,SAAAlH,EAEFmc,EAAOF,GAC3C,IADWU,EACX3c,EADW2c,SAAU5B,EACrB/a,EADqB+a,OAAQ6B,EAC7B5c,EAD6B4c,IAQtB9X,EAAYiW,EAAOjW,UACzB,IANyB,CACxB,WACA,QACA,SAGuBgC,KAAM,SAAAuF,GAAK,OAAIA,IAAUvH,IAChD,OAAOmX,EAAOlB,GAEf,IAXD3S,EAWeuU,IAC0BtU,OAAOxD,KAAKC,GAA5CC,EAZTqD,EAYSrD,eAAgBL,EAZzB0D,EAYyB1D,MAGxB,GAAKK,IAAmB8B,GACxB,KAAAmB,EDpBK,SAAoBlD,GAmB1B,MAAO,CACN+X,gBAlBuB,iBAAO,CAC9Bnc,KAAMkD,GAAY0Y,iBAClBxX,cAiBAgY,iBAdwB,SAAAzP,GAAQ,MAAK,CACrC3M,KAAMkD,GAAY2Y,kBAClBzX,YACAuI,aAYA0P,sBAT6B,SAAA9b,GAAQ,MAAK,CAC1CP,KAAMkD,GAAY4Y,wBAClB1X,YACA3C,cAAelB,KCQuDgE,CAAWH,GAAxE+X,EAJT7U,EAIS6U,gBAAiBC,EAJ1B9U,EAI0B8U,iBAAkBC,EAJ5C/U,EAI4C+U,sBAI3C1V,OAAO2V,OAAOJ,EAAK,CAAEC,kBAAiBC,mBAAkBC,wBAAuBjY,YAAWJ,UAG1FyX,EAAMpB,QAEFkB,EAAOlB,IAEPY,QAlCgC,eAAAC,EAAAvU,OAAA4K,GAAA,EAAA5K,CAAA0H,GAAAxO,EAAA2R,KAAA,SAAAtD,EAAAjH,EAkCOzD,EAAUoL,GAlCjB,IAAAsN,EAAA1a,EAAA+a,EAAA5P,EAAAD,EAAA,OAAA2B,GAAAxO,EAAAyO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAkCtByN,EAlCsBjV,EAkCtBiV,IAAmB1a,EAlCGyF,EAkCjB8S,WAAcvY,KAElCgC,EAAS0Y,EAAIC,mBACPI,EAAS,CACdnB,IAAK,wBACLC,OAAQ,CACPzY,KAAMsZ,EAAI9X,UACVJ,MAAOkY,EAAIlY,QAzCwBuK,EAAAE,KAAA,EA4C/BvC,GAAQ,KA5CuB,cAAAqC,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EA8Cb0M,KAAMoB,GA9CO,OA8C9B5P,EA9C8B4B,EAAA+M,KA+CpC9X,EAAS0Y,EAAIE,iBAAiBzP,EAASxI,OA/CHoK,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAG,GAAAH,EAAA,SAkD9B7B,EAAMD,GAAe8B,EAAAG,GAAQlN,GACnCgC,EAAS0Y,EAAIG,sBAAsB3P,IAnDC,QAqDrCkC,IArDqC,yBAAAL,EAAAQ,SAAAb,EAAA,kCAAAL,EAAAC,EAAA0O,GAAA,OAAAtB,EAAAlN,MAAAC,KAAAnI,YAAA,KC2CxB2W,GAAA,CA5C2B5B,aAAY,CACrD7a,KAAMgc,EACNxV,SAFqD,SAAAlH,EAEtBmc,EAAOF,GAAQ,IAAnCU,EAAmC3c,EAAnC2c,SAAU5B,EAAyB/a,EAAzB+a,OACpB,GAA0B,yBAArBA,EAAOjW,UAAuC,KAE1CJ,GAAUiY,IAAWtU,OAAOxD,KAAlB,sBAAkD,IAA5DH,MACHA,GAASA,EAAM+B,QACnB0V,EAAMpB,GAGRkB,EAAOlB,IAERY,QAZqD,SAAA1S,GAYvB,IAApB0T,EAAoB1T,EAApB0T,SACH3Y,GADuBiF,EAAV8R,OACL4B,KADerS,EAG4CtG,EAAMqE,OAAOxD,KAAb,SAAjDuY,EAHK9S,EAGrBvF,eAA+CsY,EAH1B/S,EAGmB5F,MAHnB0V,EAIoEpW,EAAMqE,OAAOxD,KAAb,sBAA6C,GAAtHyY,EAJKlD,EAIrBrV,eAA2DwY,EAJtCnD,EAI+B1V,MAE5D,OACE0Y,IAA2BvW,IAE3ByW,IAAuCzW,GCxBZ,SAAA2W,GAAQ,MAAK,CAC3C9c,KAJkC,oBAKlC8c,YDyBSC,CADUJ,IAAkBE,GCrBD,CACpC7c,KARoC,2BDmCF6a,aAAY,CAC9C7a,KAAMgc,EACNxV,SAF8C,SAAAwW,EAEfvB,EAAOF,GAAQyB,EAAnCf,SAAmC,IAAzB5B,EAAyB2C,EAAzB3C,OACC,aAArBA,EAAOjW,UACJqX,EAAMpB,GACNkB,EAAOlB,IAEXY,QAP8C,SAAAgC,EAOhBzZ,EAAUoL,GAAMqO,EAApChB,SAAoCgB,EAA1B5C,OAEnB7W,GAAS5B,EADY2C,EAAW,wBAAxB3C,UACU,GAAI4G,KACtBoG,QE1CK,SAASsO,GAAeC,GAG9B,IAaIC,EAAkB,IAAIC,SAbX,CACd,WACA,QACA,QACA,cACA,YACA,YACA,YACA,YAMM3R,MAAO,SAAAM,GAEb,OADAoR,EAAgBnM,IAAIjF,EAAMmR,EAAiBnR,GAAMhI,QAC1C,IAIRoZ,EAAgBnM,IAAI,WAAY/M,iBAAOiZ,EAAgB,SAAanZ,QAGpE,IAAM0S,EAAQyG,EAAgB,MAAUnZ,MAKxC,OAJK0S,GACJ0G,EAAgBnM,IAAI,QAASyF,GAGvB0G,EC1BR,IAsBcE,GAAA,CAtBczC,aAAY,CACvC7a,KAAMkD,GACN4X,eAAgB,CACfC,YzBD8B,SAACpO,GAAD,MAAe,CAC9C3M,KAAMkD,GACNyJ,SAAUA,EAASxI,OyBAlB6W,SzBG6B,SAACvV,GAAD,MAAY,CAC1CzF,KAAMkD,GACNzB,cAAegE,KyBHTwV,QANiC,eAAAC,EAAAvU,OAAA4K,GAAA,EAAA5K,CAAA0H,GAAAxO,EAAA2R,KAAA,SAAAtD,EAAA5O,GAAA,IAAA2c,EAAAza,EAAA2C,EAAA,OAAAkK,GAAAxO,EAAAyO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAMvBwN,EANuB3c,EAMvB2c,SAAwBza,EANDlC,EAMbya,WAAcvY,KACjC2C,EAAO+Y,GAAejB,IAAWtU,OAAOxD,MAPRoK,EAAAE,KAAA,EAQhCvC,GAAQ,KARwB,cAAAqC,EAAAqB,OAAA,SAS/BuL,KAAM,CACXoC,OAAQ,OACRnC,IAAK,wBACLjX,OACAqZ,QAAS,CACRC,eAAgB,uBAEjBC,QAAS,MAETC,MAAO,SAAAlY,GAAK,OAAI2G,QAAQmP,OAAO9O,GAAgBhH,EAAOjE,OAlBlB,wBAAA+M,EAAAQ,SAAAb,MAAA,gBAAAL,GAAA,OAAAqN,EAAAlN,MAAAC,KAAAnI,YAAA,KAwBvCiW,IAFDxS,OAAA5C,OAAAiX,GAAA,EAAAjX,CAGIkX,KCzBEpd,GAAWC,YAAe,CAC/Bod,uBAAsB,CAAAld,GAAA,wCAAAC,eAAE,gFAyCVkd,GAAA,CAtCQlD,aAAY,CAClC7a,KAAMkD,GACN4X,eAAgB,CACfC,YXLiC,SAAC5W,GAAD,MAAW,CAC7CnE,KAAMkD,GACNiB,SWIC6W,SXDgC,SAACvV,GAAD,MAAY,CAC7CzF,KAAMkD,GACNuC,WWCMwV,QAN4B,eAAAC,EAAAvU,OAAA4K,GAAA,EAAA5K,CAAA0H,GAAAxO,EAAA2R,KAAA,SAAAtD,EAAA5O,GAAA,IAAA2c,EAAAza,EAAA4B,EAAAuJ,EAAA,OAAA0B,GAAAxO,EAAAyO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAnP,EAMlB+a,OAAQ4B,EANU3c,EAMV2c,SAAwBza,EANdlC,EAMAya,WAAcvY,KAEvC4B,EAAU6Y,IAAW1Y,KAArBH,MARyB,CAAAmL,EAAAE,KAAA,eAAAF,EAAAqB,OAAA,SAUzBxD,QAAQmP,OAAO/Z,EAAKD,cAAcd,GAASqd,0BAVlB,cAAAvP,EAAAE,KAAA,EAY3BvC,GAAQ,KAZmB,cAAAqC,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAcT0M,KAAM,CAC5BC,IAAK,wBACLoC,QAAS,CACRQ,cAAA,UAAAzU,OAA2BnG,MAjBG,cAc1BuJ,EAd0B4B,EAAA+M,KAAA/M,EAAAqB,OAAA,SAoBzBxD,QAAQC,QAAQM,EAASxI,KAAKA,OApBL,eAAAoK,EAAAC,KAAA,GAAAD,EAAAG,GAAAH,EAAA,SAAAA,EAAAqB,OAAA,SAuBzBxD,QAAQmP,OAAO9O,GAAe8B,EAAAG,GAAQlN,KAvBb,yBAAA+M,EAAAQ,SAAAb,EAAA,kCAAAL,GAAA,OAAAqN,EAAAlN,MAAAC,KAAAnI,YAAA,KA4Bd+U,aAAY,CAChC7a,KAAMkD,GACN+X,QAFgC,SAExBgD,EAAMza,EAAUoL,GACvBpL,EpEjBgC,CACjCxD,KAAMkD,IoEiBLM,E1BxBsC,CACvCxD,KAAMkD,K0BwBLM,EAAS0U,MACTtJ,QC1CYsP,GAAA,GAAA3U,OAAA5C,OAAAiX,GAAA,EAAAjX,CACVwX,IADJxX,OAAAiX,GAAA,EAAAjX,CAEIyX,IAFJzX,OAAAiX,GAAA,EAAAjX,CAGI0X,IAHJ1X,OAAAiX,GAAA,EAAAjX,CAII2X,KCNExE,GAAkByE,aAAsBL,IAG9CpE,GAAgB0E,SAASC,UACxB,SAAAC,GAAC,OAAI9R,QAAQC,IAAI6R,KAIH5E,mBCTT6E,GAAe,CACpBhR,OAAQ,KACRlN,SAAU,KACVhB,UAAW,MCwCG8D,GA3CF,WAGC,IAHAD,EAGAwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAHQ,CACrBpE,kBAAmB4L,aAAaC,QAAQ,OACxCnK,MAAOkK,aAAaC,QAAQ,QAC1B8M,EAAWvU,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACb,OAASqU,EAAOra,MAEf,KAAKkD,EACJ,MAAO,CACNzD,WAAW,GAGb,KAAKyD,EACJ,MAAO,CACNzD,WAAW,EACXiC,iBAAiB,EACjB0B,MAAOiX,EAAOjX,OAGhB,KAAKF,EACJ,MAAO,CACNzD,WAAW,EACXiC,qBAAiBsE,EACjBvE,cAAe4Y,EAAO5U,MACtBrC,WAAO4C,GAGT,KAAK9C,EACJ,MAAO,CACNzD,WAAW,EACXiC,iBAAiB,GAGnB,KAAKwB,EACJ,OAAOyD,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7B,cAAe4Y,EAAO5U,QAGxB,QACC,OAAOnC,uBCDKa,GAVF,WAAwB,IAAvBb,EAAuBwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAf,GAAIuU,EAAWvU,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACpC,OAAMqU,EAAOjW,UAGNuC,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJqD,OAAAkY,GAAA,EAAAlY,CAAA,GAEE0T,EAAOjW,UAjCQ,WAAwB,IAAvBd,EAAuBwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAf,GAAIuU,EAAWvU,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACzC,OAASqU,EAAOra,MACf,KAAKkD,GAAY0Y,iBAChB,OAAOjV,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7D,WAAW,IAEb,KAAKyD,GAAY2Y,kBAChB,OAAOlV,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7D,WAAW,EACXsI,WAAuC,aAA3BsS,EAAO1N,SAAS/G,SAE9B,KAAK1C,GAAY4Y,wBAChB,OAAOnV,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7D,WAAW,EACXsI,gBAAY/B,EACZvE,cAAe4Y,EAAO5Y,gBAExB,QACC,OAAO6B,GAYYwb,CAAUxb,EAAM+W,EAAOjW,WAAYiW,KAJhD/W,GCEMa,GARF,WAAwB,IAAvBb,EAAuBwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAf,GAAIuU,EAAWvU,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACpC,OAAMqU,EAAOjW,UACNuC,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJqD,OAAAkY,GAAA,EAAAlY,CAAA,GAEE0T,EAAOjW,UA3BQ,WAAwB,IAAvBd,EAAuBwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAf,GAAIuU,EAAWvU,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACzC,OAASqU,EAAOra,MACf,KAAKkD,EACJ,OAAOyD,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC2C,kBAAkB,EAClBjC,MAAOqW,EAAOrW,MACdK,eAAgBgW,EAAOhW,eACvB0D,gBAAY/B,EACZvE,cAAe,KAEjB,KAAKyB,EACJ,OAAOyD,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC2C,kBAAkB,IAEpB,QACC,OAAO3C,GAUYwb,CAAUxb,EAAM+W,EAAOjW,WAAYiW,KAHxB/W,YCsElBqE,GAZAoX,aACdC,aAAgB,CACfpZ,OA3Ea,WAAwB,IAAvBtC,EAAuBwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAf,GAAIuU,EAAWvU,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACtC,OAASqU,EAAOra,MACf,KAAKkD,GACJ,OAAOyD,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7D,WAAW,EACXgC,mBAAeuE,IAEjB,KAAK9C,GACJ,OAAOyD,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7D,WAAW,EACXoU,aAAyC,YAA3BwG,EAAO1N,SAAS/G,SAEhC,KAAK1C,GACJ,OAAOyD,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7D,WAAW,EACXoU,kBAAc7N,EACdvE,cAAe4Y,EAAO5Y,gBAExB,KAAKwd,EACJ,IAAMC,EAAY,yEAAyEhU,MAAM,KACjG,OAAOvE,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7B,mBAAeuE,EAEf4P,wBAA0B,SAACuJ,GAC1B,IAAIC,EAAiBF,EAAUG,QAAQhF,EAAOjW,WAG9C,OAASgb,EAIJA,EAAiBF,EAAUG,QAAQF,GAChCA,EAGHC,GAAkBF,EAAUnZ,OAAS,EAClCsU,EAAOjW,UAGR8a,EAAUE,EAAiB,GAX1BD,EALiB,CAkBvB7b,EAAMsS,yBAITH,KAAMyJ,EAAUI,OAAQ,SAACH,EAAe/a,EAAWmb,GACjD,OAAKJ,EAAgBI,EAAeJ,EAC7B/a,IAAciW,EAAOjW,UACzBmb,EAAQ,EACRJ,GACD7b,EAAMmS,QAIZ,QACC,OAAOnS,IAiBRa,KAAM4a,aACLS,GACAC,GCtFY,SAACnc,EAAO+W,GACtB,OAAQA,EAAOra,MACd,IXNiC,oBWOhC,OAAO2G,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAECyI,qBAAqBpF,OAAAiY,GAAA,EAAAjY,CAAA,GACjBrD,EAAMyI,qBADU,CAEnBnH,QAASyV,EAAOyC,SAChBzY,eAAgBgW,EAAOyC,SAAW3W,GAAeqC,OAGpD,IXdmC,uBWelC,OAAO7B,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAECyI,qBAAqBpF,OAAAiY,GAAA,EAAAjY,CAAA,GACjBrD,EAAMyI,qBADU,CAEnBnH,aAASoB,EACT3B,eAAgBmE,OAGnB,QACC,OAAOlF,ODkDU,SAACA,EAAO+W,GAC3B,OAASA,EAAOra,MACf,KAAKkD,GACJ,OAAOyb,GAAahX,OAErB,QACC,OAAOrE,KEpDKkU,GA3BK,WAGN,IAHOlU,EAGPwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAHe,CAC5BrG,WAAW,EACX0E,UAAM6B,GACJqU,EAAWvU,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACb,OAASqU,EAAOra,MAEf,KAAKkD,GACJ,MAAO,CACNzD,WAAW,EACX0E,UAAM6B,GAER,KAAK9C,GACJ,MAAO,CACNzD,WAAW,EACX0E,KAAMkW,EAAOlW,MAEf,KAAKjB,GACJ,MAAO,CACNzD,WAAW,EACXgC,cAAe4Y,EAAO5U,MACtBtB,UAAM6B,GAER,QACC,OAAO1C,IClBK0b,gBAAgB,CAC9BzE,KPAc,WAAkC,IAAjCjX,EAAiCwC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAzB6Y,GAActE,EAAWvU,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAChD,OAASqU,EAAOra,MAEf,KAAKkD,GACJ,OAAOyD,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7D,WAAW,IAGb,KAAKyD,GACJ,OAAOyD,OAAAiY,GAAA,EAAAjY,CAAA,GACH0T,EAAOlW,KADX,CAEC1E,WAAW,IAGb,KAAKyD,GACL,KAAKA,GACJ,OAAOyD,OAAAiY,GAAA,EAAAjY,CAAA,GACHrD,EADJ,CAEC7D,WAAW,EACXgG,MAAO4U,EAAO5U,QAGhB,QACC,OAAOnC,IOvBTC,QACAoE,UACA6P,iBCPKkI,GAAmBjF,OAAOkF,sCAAwCC,KCDzDvc,mBAEb,SAAA/D,GAAA,IAAGib,EAAHjb,EAAGib,KAAH,OAAA5T,OAAAiY,GAAA,EAAAjY,CAAA,GAAoB4T,EAApB,CAA0BsF,IAAKtF,EAAK5M,UAFvBtK,CAGbyc,0BCUFC,YAAcC,MAGd,IFbuCrB,GAAcsB,GEa/CtB,G5CwCC,WAAoC,IAAnBA,EAAmB7Y,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAEhC6H,EAAS+N,KAAOwE,IAAI,WAAa,KACjCzf,EAAW0M,GAAoBQ,GAWrC,OARA+N,KAAOzK,IAAI,SAAUtD,GAErBgR,EAAapE,KAAb5T,OAAAiY,GAAA,EAAAjY,CAAA,GACIgY,EAAapE,KADjB,CAEC5M,SACAlN,aAGMke,E4CtDawB,CAAQC,IAGvBC,IFhBiC1B,GEgBVA,GFhBwBsB,GEgBVnG,GFZ1CmG,GAAaK,aAAgBL,IAI7BA,GAAaP,GAAiBO,IAIhBM,aAAYC,GAAa7B,GAAcsB,KEYtDQ,IAASlH,OACR3Z,EAAAC,EAAAC,cAAC4gB,EAAA,EAAD,CAAUL,MAAOA,IAChBzgB,EAAAC,EAAAC,cAAC6gB,GAAD,KACC/gB,EAAAC,EAAAC,cAACkD,EAAA,EAAD,KACCpD,EAAAC,EAAAC,cAAC8gB,GAAD,CAAK9G,gBAAiBA,GAAiBC,WAN1B,QAUhBnJ,SAASC,eAAe,StB2FnB,kBAAmBgQ,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.6142ea00.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Button, Spinner } from 'reactstrap';\r\nimport './SubmitButton.view.sass';\r\n\r\nexport default ({\r\n\tdisabled, className, isPending, inProgressCaption, caption\r\n}) => pug`\r\n\tButton.btn-submit(\r\n\t\ttype=\"submit\"\r\n\t\tdisabled=disabled\r\n\t\tsize=\"lg\"\r\n\t\tcolor=\"primary\"\r\n\t\tclassName=className\r\n\t)\r\n\t\tif isPending\r\n\t\t\t| #{inProgressCaption}\r\n\r\n\t\t\t.spinner-wrapper\r\n\t\t\t\tSpinner(size=\"lg\" color=\"light\" type=\"grow\")\r\n\r\n\t\telse\r\n\t\t\t| #{caption}\r\n`;","import React from 'react';\r\nimport { Alert } from 'reactstrap';\r\nimport './ErrorDisplay.view.sass';\r\n\r\nconst View = ({\r\n\ttitle, errorMsg\r\n}) => pug`\r\n\tAlert.error-display(color=\"danger\")\r\n\t\th6.alert-heading= title\r\n\t\tp.mb-0= errorMsg\r\n`;\r\n\r\nexport default View;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Container, Row, Col, Card, CardTitle, CardText, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\r\nimport SubmitButton from 'components/SubmitButton';\r\nimport ErrorDisplay from '../ErrorDisplay';\r\nimport FadeIn from 'react-fade-in';\r\nimport { defineMessages } from 'react-intl'; \r\nimport './LoginForm.view.sass';\r\n\r\nconst messages = defineMessages({\r\n\tformTitle: \"Log in\",\r\n\tformHint: \"Please, enter your user name and password to get access to your profile\",\r\n\tusernameLabel: \"Username\",\r\n\tpasswordLabel: \"Password\",\r\n\tsubmitButtonCaption: \"Log in\",\r\n\tsubmitButtonInProgressCaption: \"Sending\",\r\n\tauthErrorTitle: \"Authentication error\",\r\n\tmsgNoAccountQuestion: \"No account?\",\r\n\tsignupLinkCaption: \"Register\"\r\n});\r\n\r\nexport default ({\r\n\tintl: { formatMessage }, isPending, isAuthenticated, externalError, onSubmit, onChange\r\n}) => pug`\r\n\t#LoginForm\r\n\t\tFadeIn(delay=500)\r\n\t\t\tContainer\r\n\t\t\t\tRow.align-items-center\r\n\t\t\t\t\tCol.mx-auto\r\n\t\t\t\t\t\tCard(body)\r\n\t\t\t\t\t\t\tCardTitle.mb-1 #{formatMessage(messages.formTitle)}\r\n\r\n\t\t\t\t\t\t\tCardText.d-block.text-muted.mt-0 #{formatMessage(messages.formHint)}\r\n\r\n\t\t\t\t\t\t\tForm(onSubmit=onSubmit)\r\n\t\t\t\t\t\t\t\tFormGroup\r\n\t\t\t\t\t\t\t\t\tLabel(for=\"username\") #{formatMessage(messages.usernameLabel)}\r\n\t\t\t\t\t\t\t\t\tInput(type=\"text\" name=\"username\" id=\"username\" onChange=onChange defaultValue=\"linus-torvalds\")\r\n\r\n\t\t\t\t\t\t\t\tFormGroup\r\n\t\t\t\t\t\t\t\t\tLabel(for=\"password\") #{formatMessage(messages.passwordLabel)}\r\n\t\t\t\t\t\t\t\t\tInput(type=\"password\" name=\"password\" id=\"password\" onChange=onChange defaultValue=\"linus-torvalds\")\r\n\r\n\t\t\t\t\t\t\t\t//FormGroup\r\n\t\t\t\t\t\t\t\t//\tCustomInput(type=\"checkbox\" id=\"remember\" label=\"Запомнить меня\")\r\n\r\n\t\t\t\t\t\t\t\tSubmitButton.d-block.w-100.mt-4(\r\n\t\t\t\t\t\t\t\t\tcaption=formatMessage(messages.submitButtonCaption)\r\n\t\t\t\t\t\t\t\t\tinProgressCaption=formatMessage(messages.submitButtonInProgressCaption)\r\n\t\t\t\t\t\t\t\t\tdisabled=isPending\r\n\t\t\t\t\t\t\t\t\tisPending=isPending\r\n\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\tif externalError\r\n\t\t\t\t\t\t\t\t\tErrorDisplay(title=formatMessage(messages.authErrorTitle) errorMsg=externalError)\r\n\r\n\t\t\t\t\t\t\t\tFormText.mt-3 #{formatMessage(messages.msgNoAccountQuestion)}\r\n\t\t\t\t\t\t\t\t\t| \r\n\t\t\t\t\t\t\t\t\tLink(to=\"/signup/\") #{formatMessage(messages.signupLinkCaption)}\r\n`;","import View from './LoginForm.view';\r\nimport { injectIntl } from 'react-intl';\r\nexport default injectIntl(View);","export const actionTypes = {\r\n\tAUTH_REQUEST: \t'AUTH_REQUEST',\r\n\tAUTH_RESPONSE: \t'AUTH_RESPONSE',\r\n\tAUTH_FAILURE: \t'AUTH_FAILURE',\r\n\tAUTH_LOGOUT: \t'AUTH_LOGOUT',\r\n\tAUTH_RESET: \t'AUTH_RESET'\r\n}\r\n\r\nexport const onAuthRequest = (data) => ({\r\n\ttype: actionTypes.AUTH_REQUEST,\r\n\tdata\r\n});\r\n\r\nexport const onAuthResponse = (token) => ({\r\n\ttype: actionTypes.AUTH_RESPONSE,\r\n\ttoken\r\n});\r\n\r\nexport const onAuthFailure = (error) => ({\r\n\ttype: actionTypes.AUTH_FAILURE,\r\n\terror\r\n});\r\n\r\nexport const onLogout = () => ({\r\n\ttype: actionTypes.AUTH_LOGOUT\r\n});\r\n\r\nexport const onAuthReset = () => ({\r\n\ttype: actionTypes.AUTH_RESET\r\n})\r\n\r\n\r\n\r\n","import { connect } from 'react-redux';\r\nimport Form from './LoginForm.container';\r\nimport { onAuthRequest } from 'components/Auth/Auth.actions';\r\nimport { sha256 } from 'js-sha256';\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisPending: state.auth.isPending,\r\n\tisAuthenticated: state.auth.isAuthenticated,\r\n\texternalError: state.auth.externalError,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tonSubmit: (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst form = event.target;\r\n\t\tconst credentials = {\r\n\t\t\tusername: form.elements['username'].value,\r\n\t\t\tpassword: sha256(form.elements['password'].value)\r\n\t\t};\r\n\t\tdispatch(onAuthRequest(credentials));\r\n\t}\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Form);","export const actionTypes = {\r\n\tVALUE_CHANGED: \t\t'VALUE_CHANGED',\r\n\tFIELD_EDITED: \t\t'FIELD_EDITED'\r\n}\r\n\r\nexport const onChange = (fieldName, value, validityStatus) => ({\r\n\ttype: actionTypes.VALUE_CHANGED,\r\n\tfieldName,\r\n\tvalue,\r\n\tvalidityStatus\r\n});\r\n\r\nexport const onBlur = (fieldName) => ({\r\n\ttype: actionTypes.FIELD_EDITED,\r\n\tfieldName\r\n});\r\n\r\n// Action factory\r\nexport function getActions(fieldName) {\r\n\tconst onChangeFixed = (value, validityStatus) => onChange(fieldName, value, validityStatus);\r\n\tconst onBlurFixed = () => onBlur(fieldName);\r\n\treturn {\r\n\t\tonChange: onChangeFixed,\r\n\t\tonBlur: onBlurFixed\r\n\t}\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormGroup, FormFeedback } from 'reactstrap';\r\n\r\nconst View = ({\r\n\t/* values */\r\n\t\tfieldName, value, label, inputType, isInvalid, errorMsg,\r\n\t\tisDisabled, isValid, validMsg, children, InputComponent,\r\n\t/* handlers */\r\n\t\tonChange, onBlur\r\n}) => pug`\r\n\tFormGroup\r\n\t\tInputComponent(\r\n\t\t\ttype=inputType\r\n\t\t\tname=fieldName\r\n\t\t\tid=fieldName\r\n\t\t\tlabel=label\r\n\t\t\tvalue=value\r\n\t\t\tvalid=isValid\r\n\t\t\tinvalid=isInvalid\r\n\t\t\tdisabled=isDisabled\r\n\t\t\tonChange=onChange\r\n\t\t\tonBlur=onBlur\r\n\t\t)\r\n\t\t\tFormFeedback(valid=true) #{validMsg}\r\n\r\n\t\t\tFormFeedback(valid=false)\r\n\t\t\t\tdiv #{errorMsg}\r\n\r\n\t\t\t= children\r\n`;\r\n\r\nView.propTypes = {\r\n\tfieldName: PropTypes.string.isRequired,\r\n\tlabel: PropTypes.string.isRequired,\r\n\tinputType: PropTypes.oneOf(['text', 'textarea','email', 'password', 'tel', 'date', 'checkbox', 'switch']),\r\n\tisInvalid: PropTypes.bool,\r\n\terror: PropTypes.string,\r\n\tisValid: PropTypes.bool,\r\n\tvalidMsg: PropTypes.string,\r\n\tonChange: PropTypes.func,\r\n\tonBlur: PropTypes.func,\r\n}\r\n\r\nexport default View;","import { PROPER_VALUE } from './ValidateableInput.factory'; \r\n\r\n// Three distinct rules for controlling error display:\r\n// 1. If the value is correct, no error\r\n// 2. If the value is incorrect and typing is finished, show the error\r\n// 3. If the value is incorrect, but the user is still typing, we use filter\r\n//    to suppress showing errors that can be temporary due to incomplete typing\r\nconst shouldShowError = (status, isTypingFinished, inProgressFilter = []) => {\r\n\t\r\n\t// The value completely complies with the format\r\n\tif ( ! status || status === PROPER_VALUE ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// User finished editing, allow displaying the error\r\n\tif ( isTypingFinished )\r\n\t\treturn true\r\n\r\n\t// If the user is still typing, postpone showing the errors defined by the filter\r\n\treturn inProgressFilter.some( filteredStatus => filteredStatus === status )\r\n\t\t? false\r\n\t\t: true;\r\n}\r\n\r\n// Get translated error message or empty string if the value\r\n// is correct or the error was temporarily suppressed\r\nexport const getErrorIntl = (intl, status, errorStrings = {}, isTypingFinished = true, inProgressFilter = []) => {\r\n\treturn shouldShowError(status, isTypingFinished, inProgressFilter)\r\n\t\t? intl.formatMessage(errorStrings[status])\r\n\t\t: '';\r\n}\r\n\r\n// Extract error codes from keys in the error strings object\r\n// and represent them an identitiy array: x[code] = code\r\nexport function getErrorCodes(errorStrings) {\r\n\tconst keys = Object.keys(errorStrings);\r\n\tlet errorCodes = {};\r\n\tfor ( let i = 0; i < keys.length; i++ ) {\r\n\t\terrorCodes[keys[i]] = keys[i];\r\n\t}\r\n\treturn errorCodes;\r\n}\r\n\r\n// If the value is correct a validator will return true\r\n// or validation error code instead.\r\n// The function returns a validator that utilizes original validator\r\n// to return PROPER_VALUE if the value is correct.\r\n// It will also inject error codes extracted from the error strings object\r\nexport function getEnhancedValidator(validate, errorStrings = {}) {\r\n\tconst errorCodes = getErrorCodes(errorStrings);\r\n\treturn (value) => {\r\n\t\tconst validationResult = validate(value, errorCodes);\r\n\t\treturn validationResult === true\r\n\t\t\t? PROPER_VALUE\r\n\t\t\t: validationResult;\r\n\t}\r\n}","import React from 'react';\r\nimport { CustomInput, Input, Label } from 'reactstrap';\r\n\r\nconst DefaultInput = ({\r\n\ttype, name, label, value, valid, invalid, disabled, onChange, onBlur, children\r\n}) => pug`\r\n\tdiv\r\n\t\tLabel(for=name) #{label}\r\n\r\n\t\tInput(\r\n\t\t\ttype=type\r\n\t\t\tname=name\r\n\t\t\tid=name\r\n\t\t\tvalue=value\r\n\t\t\tvalid=valid\r\n\t\t\tinvalid=invalid\r\n\t\t\tdisabled=disabled\r\n\t\t\tonChange=onChange\r\n\t\t\tonBlur=onBlur\r\n\t\t)\r\n\r\n\t\t= children\r\n`;\r\n\r\nconst AlternativeInput = ({\r\n\ttype, name, label, value, valid, invalid, disabled, onChange, children\r\n}) => pug`\r\n\tCustomInput(\r\n\t\ttype=type\r\n\t\tname=name\r\n\t\tid=name\r\n\t\tlabel=label\r\n\t\tchecked=value\r\n\t\tvalid=valid\r\n\t\tinvalid=invalid\r\n\t\tdisabled=disabled\r\n\t\tonChange=onChange\r\n\t)\r\n\t\t= children\r\n`;\r\n\r\nexport { DefaultInput, AlternativeInput };","import React from 'react';\r\nimport { injectIntl } from 'react-intl';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux'; \r\nimport { getActions } from './ValidateableInput.actions';\r\nimport View from './ValidateableInput.view';\r\nimport { getErrorIntl, getEnhancedValidator } from './ValidateableInput.utils';\r\nimport { DefaultInput, AlternativeInput } from './ValidateableInput.inputs';\r\n\r\nexport const PROPER_VALUE = 'PROPER_VALUE';\r\n\r\nexport default ({\r\n\t/* values */\tfieldName, inputType, errorStrings, inProgressFilter, validMsg,\r\n\t/* handlers */ \tvalidate = () => true // by default the value is considered correct\r\n}) => {\r\n\tconst mapStateToProps = (state, ownProps) => {\r\n\t\tconst { validityStatus, isTypingFinished, value } = state.signup.data[fieldName];\r\n\t\tconst errorMsg = ownProps.errorMsg\r\n\t\t\t? ownProps.errorMsg\r\n\t\t\t: getErrorIntl(ownProps.intl, validityStatus, errorStrings, isTypingFinished, inProgressFilter);\r\n\t\treturn {\r\n\t\t\tisInvalid: !!errorMsg,\r\n\t\t\terrorMsg,\r\n\t\t\tvalue\r\n\t\t}\r\n\t};\r\n\r\n\t// Getting pre-configured action handlers for the input\r\n\tconst { onChange, onBlur } = getActions(fieldName);\r\n\r\n\t// Transforming supplied validation function and provided error strings object\r\n\t// into a function that utilizes both to return the correct result code\r\n\tconst enhancedValidate = getEnhancedValidator(validate, errorStrings);\r\n\r\n\t// Wrapping view component with Redux\r\n\tconst mapDispatchToProps = dispatch => ({\r\n\t\tonChange: event => {\r\n\t\t\tconst target = event.target;\r\n\t\t\tconst value = target.type === 'checkbox' ? target.checked : target.value;\r\n\t\t\tconst validityStatus = enhancedValidate(value);\r\n\t\t\tdispatch(onChange(value, validityStatus));\r\n\t\t},\r\n\t\tonBlur: () => dispatch(onBlur())\r\n\t});\r\n\r\n\tlet Component = connect(\r\n\t  mapStateToProps,\r\n\t  mapDispatchToProps\r\n\t)(View);\r\n\r\n\t// Setting properties' type contstraints\r\n\tComponent.propTypes = {\r\n\t\tfieldName: PropTypes.string.isRequired,\r\n\t\tinputType: PropTypes.oneOf(['text', 'textarea', 'email', 'password', 'tel', 'date', 'checkbox', 'switch']).isRequired\r\n\t}\r\n\r\n\t// Picking specific input component depending on the type\r\n\tlet InputComponent;\r\n\tswitch ( inputType ) {\r\n\t\tcase 'checkbox':\r\n\t\tcase 'switch':\r\n\t\t\tInputComponent = AlternativeInput\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tInputComponent = DefaultInput\r\n\t}\r\n\r\n\t// Finally, assemblying the configured input component\r\n\tconst Container = ({\r\n\t\tisDisabled, isInvalid = false, isValid = false, errorMsg, children, label, intl\r\n\t}) => {\r\n\t\tconst validMsgFormatted = validMsg\r\n\t\t\t? intl.formatMessage(validMsg)\r\n\t\t\t: null;\r\n\t\treturn pug`\r\n\t\t\tComponent(\r\n\t\t\t\tfieldName=fieldName\r\n\t\t\t\tinputType=inputType\r\n\t\t\t\tlabel=label\r\n\t\t\t\tisInvalid=isInvalid\r\n\t\t\t\terrorMsg=errorMsg\r\n\t\t\t\tisValid=isValid\r\n\t\t\t\tvalidMsg=validMsgFormatted\r\n\t\t\t\tInputComponent=InputComponent\r\n\t\t\t\tintl=intl\r\n\t\t\t)\r\n\t\t\t\t= children\r\n\t\t`;\r\n\t}\r\n\r\n\treturn injectIntl(Container);\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Spinner } from 'reactstrap';\r\n\r\nconst View = ({\r\n\t/* values */ \tisInvalid, isPending, isApproved, label,\r\n\t/* values */\terrorMsg, InputComponent\r\n}) => pug`\r\n\tInputComponent(\r\n\t\tisDisabled=isPending\r\n\t\tisInvalid=isInvalid\r\n\t\tisValid=isApproved\r\n\t\terrorMsg=errorMsg\r\n\t\tlabel=label\r\n\t)\r\n\t\tif isPending\r\n\t\t\tSpinner(size=\"sm\" color=\"primary\")\r\n`;\r\n\r\nView.propTypes = {\r\n\tisInvalid: PropTypes.bool,\r\n\tisPending: PropTypes.bool,\r\n\tisValid: PropTypes.oneOfType([\r\n\t\t\tPropTypes.bool,\r\n\t\t\tPropTypes.instanceOf('undefined')\r\n\t\t]),\r\n\terrorMsg: PropTypes.string,\r\n}\r\n\r\nexport default View;","import React from 'react';\r\nimport { connect } from 'react-redux'; \r\nimport { injectIntl } from 'react-intl';\r\nimport validateableInputFactory from '../ValidateableInput';\r\nimport View from './ApprovableInput.view';\r\n\r\nexport default ({\r\n\t/* values */\tfieldName, inputType, approvedMsg, rejectedMsg, children, externalError, errorStrings, inProgressFilter,\r\n\t/* handlers */ \tvalidate,\r\n}) => {\r\n\tconst mapStateToProps = (state, ownProps) => {\r\n\t\tconst { externalError, isTypingFinished, isPending, isApproved } = state.signup.data[fieldName] || {};\r\n\t\tlet errorMsg = '';\r\n\t\tif ( externalError )\r\n\t\t\terrorMsg = externalError;\r\n\t\telse if ( isTypingFinished && isApproved === false )\r\n\t\t\terrorMsg = ownProps.intl.formatMessage(rejectedMsg);\r\n\t\treturn {\r\n\t\t\tisInvalid: !!errorMsg,\r\n\t\t\terrorMsg,\r\n\t\t\tisPending,\r\n\t\t\t// isPending: isTypingFinished && !isApproved && !externalError && status === statusCodes.PROPER,\r\n\t\t\tisApproved: isApproved && isTypingFinished,\r\n\t\t\t// isDisapproved: isTypingFinished && isApproved === false,\r\n\t\t}\r\n\t};\r\n\r\n\tlet Component = connect(\r\n\t  mapStateToProps\r\n\t)(View);\r\n\r\n\tComponent = injectIntl(Component);\r\n\r\n\tconst ValidateableInput = validateableInputFactory({\r\n\t\tfieldName,\r\n\t\tinputType,\r\n\t\tvalidMsg: approvedMsg,\r\n\t\tvalidate,\r\n\t\terrorStrings,\r\n\t\tinProgressFilter\r\n\t});\r\n\r\n\treturn ({ label }) => pug`\r\n\t\tComponent(\r\n\t\t\tInputComponent=ValidateableInput\r\n\t\t\tlabel=label\r\n\t\t)\r\n\t`;\r\n}","import approvableInputFactory from '../ApprovableInput';\r\nimport validate from './Username.validator';\r\nimport { defineMessages } from 'react-intl'; \r\n\r\nexport const statusCodes = {\r\n\tE_EMPTY: \t\t\t'E_EMPTY',\r\n\tE_FIRST_LETTER: \t'E_FIRST_LETTER',\r\n\tE_LAST_SYMBOL: \t\t'E_LAST_SYMBOL',\r\n\tE_INVALID_FORMAT: \t'E_INVALID_FORMAT',\r\n\tE_TOO_SHORT: \t\t'E_TOO_SHORT',\r\n\tE_TOO_LONG: \t\t'E_TOO_LONG'\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_EMPTY: \t\t\t\"This field is required. Please, come up with a username\",\r\n\tE_FIRST_LETTER: \t\"Username should begin with a lowercase latin character\",\r\n\tE_LAST_SYMBOL: \t\t\"Name should end in a letter or a digit\",\r\n\tE_INVALID_FORMAT: \t\"The name contains illegal characters. Please, adhere to the specified format\",\r\n\tE_TOO_SHORT: \t\t\"Name should be at least 5 characters long\",\r\n\tE_TOO_LONG: \t\t\"Name shouldn't be longer than 30 characters\"\r\n})\r\n\r\nconst resultStrings = defineMessages({\r\n\trejected: \"Unfortunately, this name has already been taken. Please, come up with another one\",\r\n\tapproved: \"Great, this is a suitable name!\",\r\n})\r\n\r\nexport default approvableInputFactory({\r\n\tfieldName: \"username\",\r\n\tinputType: \"text\",\r\n\tvalidate,\r\n\tresultStrings,\r\n\terrorStrings,\r\n\tinProgressFilter: [statusCodes.E_EMPTY, statusCodes.E_TOO_SHORT, statusCodes.E_LAST_SYMBOL],\r\n\trejectedMsg: resultStrings.rejected,\r\n\tapprovedMsg: resultStrings.approved\r\n});","export default function validate(value, statusCodes = {}) {\r\n\r\n\t// Empty string\r\n\tif ( value.length === 0 )\r\n\t\treturn statusCodes.E_EMPTY;\r\n\r\n\t// Maximium 30 characters \r\n\tif ( value.length > 30 )\r\n\t\treturn statusCodes.E_TOO_LONG;\r\n\t\r\n\t// First character should be a letter\r\n\tconst firstLetterRegex = /^[a-z]$/;\r\n\tlet isValid = firstLetterRegex.test(value.charAt(0));\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_FIRST_LETTER;\r\n\t}\t\t\r\n\t\r\n\t// Name should comply with the format \r\n\tconst usernameRegex = /^[-a-z0-9]+$/;\r\n\tisValid = usernameRegex.test(value);\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_INVALID_FORMAT;\r\n\t}\r\n\r\n\t// Minimum 5 characters\r\n\tif ( value.length < 5 ) \r\n\t\treturn statusCodes.E_TOO_SHORT;\r\n\r\n\t// Last character must be a letter or a digit\r\n\tconst lastLetterRegex = /^[a-z0-9]$/;\r\n\tisValid = lastLetterRegex.test(value.charAt(value.length - 1));\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_LAST_SYMBOL;\r\n\t}\t\t\r\n\r\n\treturn true;\r\n}","import validateableInputFactory from '../ValidateableInput';\r\nimport validate from './Password.validator';\r\nimport { defineMessages } from 'react-intl';\r\n\r\nexport const statusCodes = {\r\n\tE_EMPTY: \t\t\t'E_EMPTY',\r\n\tE_INVALID_FORMAT: \t'E_INVALID_FORMAT',\r\n\tE_INSUFFICIENT: \t'E_INSUFFICIENT',\r\n\tE_TOO_SHORT: \t\t'E_TOO_SHORT',\r\n\tE_TOO_LONG: \t\t'E_TOO_LONG'\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_EMPTY: \t\t\t\"This is a requried field. Please, enter a password\",\r\n\tE_INVALID_FORMAT:\t\"The password contains illegal symbols. Please, adhere to the specified format\",\r\n\tE_INSUFFICIENT: \t\"Please, use at least 2 symbol groups: letters, digits or special characters\",\r\n\tE_TOO_SHORT:\t\t\"Password should be at least 8 symbols long\",\r\n\tE_TOO_LONG: \t\t\"Password should be less that 128 symbols long. Please, use a shorter password\"\r\n})\r\n\r\nexport default validateableInputFactory({\r\n\tfieldName: \"password\",\r\n\tinputType: \"password\",\r\n\tvalidate,\r\n\terrorStrings,\r\n\tinProgressFilter: [statusCodes.E_EMPTY, statusCodes.E_TOO_SHORT, statusCodes.E_INSUFFICIENT]\r\n})","export default function validate(value, statusCodes) {\r\n\r\n\t// Empty string\r\n\tif ( value.length === 0 )\r\n\t\treturn statusCodes.E_EMPTY;\r\n\r\n\t// Maximum 128 characters \r\n\tif ( value.length > 128 )\r\n\t\treturn statusCodes.E_TOO_LONG;\r\n\t\r\n\tconst grpLetters = \"[a-zA-Z]\";\r\n\tconst grpDigits = \"[0-9]\";\r\n\tconst grpSymbols = \"\";\r\n\tconst format = `(?:${grpLetters}?${grpDigits}?${grpSymbols}?)+`;\r\n\tlet regexp = new RegExp(format);\r\n\tregexp = /^(?:[a-zA-Z]|[0-9]|[-_,.'><=+&%$#@!* )(~\\]/\\\\{}])+$/;\r\n\tlet isValid = regexp.test(value);\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_INVALID_FORMAT;\r\n\t}\r\n\r\n\t// Password must contain at least two character groups\r\n\t// 1) Latin letters\r\n\t// 2) Digits\r\n\t// 3) Special characters\r\n\tregexp = /[a-zA-Z]/;\r\n\tconst hasLetters = regexp.test(value);\r\n\r\n\tregexp = /[0-9]/;\r\n\tconst hasDigits = regexp.test(value);\r\n\r\n\tregexp = /[-_,.'><=+&%$#@!* )(~\\]/\\\\{}]/;\r\n\tconst hasSymbols = regexp.test(value);\r\n\r\n\tif ( hasLetters + hasDigits + hasSymbols < 2 )\r\n\t\treturn statusCodes.E_INSUFFICIENT;\r\n\r\n\t// Minimum 8 characters\r\n\tif ( value.length < 8 )\r\n\t\treturn statusCodes.E_TOO_SHORT;\r\n\r\n\treturn true;\r\n}","import validateableInputFactory from '../ValidateableInput';\r\nimport validate from './PasswordConfirmation.validator';\r\nimport { defineMessages } from 'react-intl';\r\n\r\nexport const statusCodes = {\r\n\tE_EMPTY: \t\t\t\t'E_EMPTY',\r\n\tE_PASSWORD_NOT_VALID: \t'E_PASSWORD_NOT_VALID',\r\n\tE_PASSWORDS_MISMATCH: \t'E_PASSWORDS_MISMATCH'\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_EMPTY: \t\t\t\t\"This field is required. Please, confirm the above entered password\",\r\n\tE_PASSWORDS_MISMATCH: \t\"Passwords don't match\",\r\n\tE_PASSWORD_NOT_VALID: \t\"Please, make sure both passwords follow the specified format\"\r\n})\r\n\r\nconst resultMessages = defineMessages({\r\n\tvalid: \"Passwords match\"\r\n})\r\n\r\nconst Component = validateableInputFactory({\r\n\tfieldName: \"passwordConfirmation\",\r\n\tinputType: \"password\",\r\n\tvalidMsg: resultMessages.valid,\r\n\tvalidate,\r\n\terrorStrings,\r\n\tinProgressFilter: [statusCodes.E_EMPTY]\r\n});\r\n\r\nexport default Component;","export default function validate(value, statusCodes) {\r\n\t// Empty string\r\n\tif ( value.length === 0 )\r\n\t\treturn statusCodes.E_EMPTY;\r\n\r\n\treturn true;\r\n}","import Component from './PasswordConfirmation.container';\r\nimport { connect } from 'react-redux';\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\tconst { isValid, isTypingFinished } = state.signup.data['passwordConfirmation'];\r\n\treturn {\r\n\t\tisValid: isValid && isTypingFinished,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(Component);\r\n","import approvableInputFactory from '../ApprovableInput';\r\nimport validate from './Email.validator';\r\nimport { defineMessages } from 'react-intl';\r\n\r\nexport const statusCodes = {\r\n\tE_EMPTY: \t\t\t'E_EMPTY',\r\n\tE_INVALID_FORMAT: \t'E_INVALID_FORMAT',\r\n\tE_TOO_LONG: \t\t'E_TOO_LONG'\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_EMPTY: \t\t\t\"This field is required. Please, enter your email\",\r\n\tE_TOO_LONG: \t\t\"We don't accept emails longer than 128 symbols. PLease, use a shorter address\",\r\n\tE_INVALID_FORMAT: \t\"Email doesn't comply with the format. Please, make sure you typed the address correctly\"\r\n})\r\n\r\nconst resultMessages = defineMessages({\r\n\trejected: \"The address has already been taken by somebody. Please, use another one\",\r\n\tapproved: \"This email address is fine!\"\r\n})\r\n\r\nexport default approvableInputFactory({\r\n\tfieldName: \"email\",\r\n\tinputType: \"email\",\r\n\tvalidate,\r\n\terrorStrings,\r\n\tinProgressFilter: [statusCodes.E_EMPTY, statusCodes.E_INVALID_FORMAT],\r\n\trejectedMsg: resultMessages.rejected,\r\n\tapprovedMsg: resultMessages.approved\r\n})","export default function validate(value, statusCodes = {}) {\r\n\r\n\t// Empty string\r\n\tif ( value.length === 0 )\r\n\t\treturn statusCodes.E_EMPTY;\r\n\r\n\t// Maximum 128 characters\r\n\tif ( value.length > 128 )\r\n\t\treturn statusCodes.E_TOO_LONG;\r\n\r\n\t// Most sane addresses will comply to this format\t\r\n\t// https://stackoverflow.com/questions/46155/how-to-validate-an-email-address-in-javascript\r\n\tconst emailRegex = /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/;\r\n\tlet isValid = emailRegex.test(value);\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_INVALID_FORMAT;\r\n\t}\r\n\r\n\treturn true;\r\n}","import { defineMessages } from 'react-intl';\r\nimport approvableInputFactory from '../ApprovableInput';\r\nimport validate from './Phone.validator';\r\n\r\nexport const statusCodes = {\r\n\tE_EMPTY: \t\t\t'E_EMPTY',\r\n\tE_FIRST_SYMBOL: \t'E_FIRST_SYMBOL',\r\n\tE_INVALID_CHARS: \t'E_INVALID_CHARS',\r\n\tE_INVALID_FORMAT: \t'E_INVALID_FORMAT',\r\n\tE_TOO_SHORT: \t\t'E_TOO_SHORT',\r\n\tE_TOO_LONG: \t\t'E_TOO_LONG'\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_EMPTY: \t\t\t\"This field is required. Please, enter your phone number\",\r\n\tE_FIRST_SYMBOL: \t\"The first character should be a plus symbol (+)\",\r\n\tE_TOO_SHORT: \t\t\"Phone number should be more than 10 characters long. Please, make sure you entered it correctly\",\r\n\tE_TOO_LONG: \t\t\"The phone number is too long. Please, use a shorter number\",\r\n\tE_INVALID_CHARS: \t\"Phone number can only contain digits, spaces or hyphens and a plus sign. Please, check for typos\",\r\n\tE_INVALID_FORMAT: \t\"The phone number doesn't comply with the format. Please, check if you typed it correctly\"\r\n})\r\n\r\nconst resultMessages = defineMessages({\r\n\trejected: \"This phone number has already been in use. Please, choose another one\",\r\n\tapproved: \"This phone number will work!\"\r\n})\r\n\r\nexport default approvableInputFactory({\r\n\tfieldName: \"phone\",\r\n\tinputType: \"tel\",\r\n\tvalidate,\r\n\terrorStrings,\r\n\tinProgressFilter: [statusCodes.E_EMPTY, statusCodes.E_TOO_SHORT, statusCodes.E_INVALID_FORMAT],\r\n\trejectedMsg: resultMessages.rejected,\r\n\tapprovedMsg: resultMessages.approved,\r\n});","export default function validate(value, statusCodes = {}) {\r\n\r\n\t// Empty string\r\n\tif ( value.length === 0 )\r\n\t\treturn statusCodes.E_EMPTY;\r\n\r\n\t// Maximum 20 characters\r\n\tif ( value.length > 20 )\r\n\t\treturn statusCodes.E_TOO_LONG;\r\n\t\r\n\t// First character must be a letter\r\n\tconst firstSymbolRegex = /^\\+/;\r\n\tlet isValid = firstSymbolRegex.test(value.charAt(0));\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_FIRST_SYMBOL;\r\n\t}\r\n\r\n\t// Only valid characters\r\n\tconst phoneLexisRegex = /^[-+ 0-9]+$/;\r\n\tisValid = phoneLexisRegex.test(value);\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_INVALID_CHARS;\r\n\t}\r\n\t\r\n\t// Phone number should comply with the format\r\n\tconst phoneGrammarRegex = /^\\+[0-9]{1,3}(?:(?:[- ][0-9]{2,4}){3,4}|[- ]?[0-9]{5,10})$/;\r\n\tisValid = phoneGrammarRegex.test(value);\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_INVALID_FORMAT;\r\n\t}\r\n\r\n\t// Minimum 10 characters\r\n\tif ( value.length < 10 ) \r\n\t\treturn statusCodes.E_TOO_SHORT;\r\n\r\n\treturn true;\r\n}","import validateableInputFactory from '../ValidateableInput';\r\nimport validate from './Birthdate.validator';\r\nimport { defineMessages } from 'react-intl';\r\n\r\nexport const statusCodes = {\r\n\tE_EMPTY: \t\t\t'E_EMPTY',\r\n\tE_TOO_OLD: \t\t\t'E_TOO_OLD',\r\n\tE_TOO_EARLY: \t\t'E_TOO_EARLY',\r\n\tE_INVALID_FORMAT:  \t'E_INVALID_FORMAT'\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_EMPTY: \t\t\t\"This field is required. Please, enter your date of birth\",\r\n\tE_TOO_OLD: \t\t\t\"We accept that a human can live longer than 150 years. If that's your case, please contact us via phone or email. We will consider your application in exceptional order\",\r\n\tE_TOO_EARLY: \t\t\"Only dates from the past are accepted\",\r\n\tE_INVALID_FORMAT: \t\"Wrong data format. Please, make sure you enter the date in YYYY-MM-DD format\",\r\n})\r\n\r\nexport default validateableInputFactory({\r\n\tfieldName: \"birthdate\",\r\n\tinputType: \"date\",\r\n\tvalidate,\r\n\terrorStrings,\r\n\tinProgressFilter: [statusCodes.E_EMPTY, statusCodes.E_TOO_OLD, statusCodes.E_TOO_EARLY, statusCodes.E_INVALID_FORMAT]\r\n})","export default function validate(value, statusCodes = {}) {\r\n\r\n\t// Empty string\r\n\tif ( value.length === 0 )\r\n\t\treturn statusCodes.E_EMPTY;\r\n\r\n\t// Incorrect format\r\n\tconst dateFormat = /^[0-9]{4}-(?:0[1-9]|1[012])-(?:0[1-9]|[12][0-9]|3[01])$/;\r\n\tconst isCorrect = dateFormat.test(value);\r\n\tif ( !isCorrect )\r\n\t\treturn statusCodes.E_INVALID_FORMAT;\r\n\r\n\t// Still incorrect\r\n\tconst tsBirthdate = Date.parse(value);\r\n\tif ( isNaN(tsBirthdate) )\r\n\t\treturn statusCodes.E_INVALID_FORMAT;\r\n\r\n\tconst tsToday = Date.now();\r\n\t\r\n\r\n\t// Future date\r\n\tif ( tsBirthdate > tsToday )\r\n\t\treturn statusCodes.E_TOO_EARLY;\r\n\t\r\n\t// Maximum age: 150 years\r\n\tif ( tsToday - tsBirthdate > 150 * 365 * 24 * 60 * 60 * 1000 )\r\n\t\treturn statusCodes.E_TOO_OLD;\r\n\r\n\treturn true;\r\n}","import validateableInputFactory from '../ValidateableInput';\r\n\r\nexport default validateableInputFactory({\r\n\tfieldName: \"newsletters\",\r\n\tinputType: \"switch\"\r\n})","import validateableInputFactory from '../ValidateableInput';\r\nimport validate from './Biography.validator';\r\nimport { defineMessages } from 'react-intl';\r\n\r\nexport const statusCodes = {\r\n\tE_TOO_LONG: 'E_TOO_LONG',\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_TOO_LONG: \"Please, shorten your biography to 4000 symbols\",\r\n})\r\n\r\nexport default validateableInputFactory({\r\n\tfieldName: \"biography\",\r\n\tinputType: \"textarea\",\r\n\tvalidate,\r\n\terrorStrings\r\n});","export default function validate(value, statusCodes = {})\r\n{\r\n\t// No more than 4000 characters\r\n\tif ( value && value.length > 4000 )\r\n\t\treturn statusCodes.E_TOO_LONG;\r\n\r\n\treturn true;\r\n}","import validateableInputFactory from '../ValidateableInput';\r\nimport validate from './PersonalInformationProcessing.validator';\r\nimport { defineMessages } from 'react-intl';\r\n\r\nexport const statusCodes = {\r\n\tE_IMPOSED: 'E_IMPOSED',\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_IMPOSED: \"Consent to personal information processing is required to sign up to our serivce\",\r\n})\r\n\r\nexport default validateableInputFactory({\r\n\tfieldName: \"personal-information-processing\",\r\n\tinputType: \"checkbox\",\r\n\tvalidate,\r\n\terrorStrings\r\n})","export default function validate(value, statusCodes = {}) {\r\n\treturn value\r\n\t\t? true\r\n\t\t: statusCodes.E_IMPOSED;\r\n}","import React from 'react';\r\nimport { FormGroup, FormFeedback, CustomInput, Label, Input } from 'reactstrap';\r\nimport './Photo.view.sass';\r\n\r\nconst View = ({\r\n\t/* values */\r\n\t\tfieldName, fileName, label, invalid, errorMsg,\r\n\t\tisDisabled, valid, validMsg, children,\r\n\t/* handlers */\r\n\t\tonChange\r\n}) => pug`\r\n\tFormGroup\r\n\t\tLabel(for=fieldName) #{label}\r\n\r\n\t\tCustomInput(\r\n\t\t\ttype=\"file\"\r\n\t\t\tname=fieldName\r\n\t\t\tid=fieldName\r\n\t\t\tlabel=fileName\r\n\t\t\tvalid=valid\r\n\t\t\tinvalid=invalid\r\n\t\t\tdisabled=isDisabled\r\n\t\t\tonChange=onChange\r\n\t\t)\r\n\r\n\t\tInput(\r\n\t\t\ttype=\"hidden\"\r\n\t\t\tvalid=valid\r\n\t\t\tinvalid=invalid\r\n\t\t)\r\n\t\t\r\n\t\tFormFeedback(valid=true) #{validMsg}\r\n\r\n\t\tFormFeedback(valid=false)\r\n\t\t\tdiv #{errorMsg}\r\n\r\n\t\t= children\r\n`;\r\n\r\nexport default View;","import React from 'react';\r\nimport View from './Photo.view';\r\nimport { defineMessages } from 'react-intl';\r\n\r\nexport const statusCodes = {\r\n\tE_NOT_SELECTED: \t'E_NOT_SELECTED',\r\n\tE_WRONG_EXTENTION: \t'E_WRONG_EXTENTION',\r\n\tE_TOO_BIG: \t\t\t'E_TOO_BIG'\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_NOT_SELECTED: \t\"Please, choose a photo for your profile\",\r\n\tE_WRONG_EXTENTION: \t\"We only support files of JPG and PNG formats\",\r\n\tE_TOO_BIG: \t\t\t\"File size shouldn't exceed 5 MB\",\r\n})\r\n\r\nconst Container = ({\r\n\t/* values */\r\n\t\tfieldName, fieldLabel, isInvalid, errorMsg,\r\n\t\tisDisabled, isValid, validMsg, fileName, label,\r\n\t/* handlers */\r\n\t\tonChange\r\n}) => pug`\r\n\tView(\r\n\t\tfieldName=\"photo\"\r\n\t\tlabel=label\r\n\t\tfileName=fileName\r\n\t\tinvalid=isInvalid\r\n\t\terrorMsg=errorMsg\r\n\t\tisDisabled=isDisabled\r\n\t\tvalid=isValid\r\n\t\tvalidMsg=validMsg\r\n\t\tonChange=onChange\r\n\t)\r\n`;\r\n\r\nexport default Container;","import { connect } from 'react-redux'; \r\nimport { defineMessages, injectIntl } from 'react-intl';\r\nimport Container from './Photo.container';\r\nimport validate from './Photo.validator';\r\nimport { onChange } from '../ValidateableInput/ValidateableInput.actions';\r\nimport { getErrorIntl, getEnhancedValidator } from '../ValidateableInput/ValidateableInput.utils';\r\nimport { errorStrings } from './Photo.container';\r\n\r\nconst fieldName = 'photo';\r\n\r\nconst messages = defineMessages({\r\n\tphotoPickerButtonCaption: \"Pick a photo\"\r\n})\r\n\r\nconst enhancedValidate = getEnhancedValidator(validate, errorStrings);\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n\tconst { validityStatus, value } = state.signup.data[fieldName];\r\n\tconst fileName = value.name || ownProps.intl.formatMessage(messages.photoPickerButtonCaption);\r\n\tconst errorMsg = ownProps.errorMsg\r\n\t\t? ownProps.errorMsg\r\n\t\t: getErrorIntl(ownProps.intl, validityStatus, errorStrings);\r\n\treturn {\r\n\t\tisInvalid: !!errorMsg,\r\n\t\terrorMsg,\r\n\t\tfileName\r\n\t}\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\tonChange: event => {\r\n\t\tconst file = event.target.files[0];\r\n\t\tif ( ! file ) return false;\r\n\t\tconst validityStatus = enhancedValidate(file);\r\n\t\tdispatch(onChange(fieldName, file, validityStatus));\r\n\t}\r\n});\r\n\r\nlet Component = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Container);\r\n\r\nexport default injectIntl(Component);","export default function validate(file, statusCodes = {}) {\r\n\t// Empty string\r\n\tif ( ! file )\r\n\t\treturn statusCodes.E_NOT_SELECTED;\r\n\r\n\t// Only JPG and PNG\r\n\tconst ext = file.name.split('.').pop().toLowerCase();\r\n\tconst isValidExtention = ['jpg', 'png'].some( acceptedExt => acceptedExt === ext );\r\n\tif ( ! isValidExtention )\r\n\t\treturn statusCodes.E_WRONG_EXTENTION;\r\n\r\n\t// Maximum size: 5 MB\r\n\tif ( file.size > 5 * 1024 * 1024 )\r\n\t\treturn statusCodes.E_TOO_BIG;\r\n\r\n\treturn true;\r\n}","import validateableInputFactory from '../ValidateableInput';\r\nimport validate from './Firstname.validator';\r\nimport { defineMessages } from 'react-intl';\r\n\r\nexport const statusCodes = {\r\n\tE_EMPTY: \t\t\t'E_EMPTY',\r\n\tE_FIRST_LETTER: \t'E_FIRST_LETTER',\r\n\tE_INVALID_FORMAT: \t'E_INVALID_FORMAT',\r\n\tE_TOO_LONG: \t\t'E_TOO_LONG'\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_EMPTY: \t\t\t\"This field is required. Please, enter your name\",\r\n\tE_FIRST_LETTER: \t\"Name should begin with a captial letter\",\r\n\tE_INVALID_FORMAT: \t\"The name contains illegal characters. Please, adhere to the specified format\",\r\n\tE_TOO_LONG: \t\t\"Name shouldn't exceed 40 characters\"\r\n})\r\n\r\nexport default validateableInputFactory({\r\n\tfieldName: \"firstname\",\r\n\tinputType: \"text\",\r\n\tvalidate,\r\n\terrorStrings,\r\n\tinProgressFilter: [statusCodes.E_EMPTY]\r\n});","export default function validate(value, statusCodes = {})\r\n{\r\n\t// Empty string\r\n\tif ( value.length === 0 )\r\n\t\treturn statusCodes.E_EMPTY;\r\n\r\n\t// Maximum 40 characters\r\n\tif ( value.length > 40 )\r\n\t\treturn statusCodes.E_TOO_LONG;\r\n\t\r\n\t// First character must be a capital letter\r\n\tconst firstLetterRegex = /^[A-ZА-ЯЁ]$/;\r\n\tlet isValid = firstLetterRegex.test(value.charAt(0));\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_FIRST_LETTER;\r\n\t}\t\t\r\n\t\r\n\t// Name should comply with the format\r\n\tconst nameRegex = /^.[a-zа-яё]*$/;\r\n\tisValid = nameRegex.test(value);\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_INVALID_FORMAT;\r\n\t}\t\t\r\n\r\n\treturn true;\r\n}","import validateableInputFactory from '../ValidateableInput';\r\nimport validate from './Lastname.validator';\r\nimport { defineMessages } from 'react-intl';\r\n\r\nexport const statusCodes = {\r\n\tE_EMPTY: \t\t\t'E_EMPTY',\r\n\tE_FIRST_LETTER: \t'E_FIRST_LETTER',\r\n\tE_INVALID_FORMAT: \t'E_INVALID_FORMAT',\r\n\tE_TOO_LONG: \t\t'E_TOO_LONG',\r\n\tE_LAST_SYMBOL: \t\t'E_LAST_SYMBOL',\r\n\tE_WRONG_ENDING: \t'E_WRONG_ENDING'\r\n}\r\n\r\nexport const errorStrings = defineMessages({\r\n\tE_EMPTY: \t\t\t\"This field is required. Please, enter your family name\",\r\n\tE_FIRST_LETTER: \t\"Family name should start with captial letter\",\r\n\tE_INVALID_FORMAT: \t\"The family name doesn't follow the format. Please, use only letters and a hyphen\",\r\n\tE_TOO_LONG: \t\t\"Family name shouldn't exceed 50 characters\",\r\n\tE_LAST_SYMBOL: \t\t\"Family name should end in lowercase letter\",\r\n\tE_WRONG_ENDING: \t\"Minimum 2 letters after a hyphen\",\r\n})\r\n\r\nexport default validateableInputFactory({\r\n\tfieldName: \"lastname\",\r\n\tinputType: \"text\",\r\n\tvalidate,\r\n\terrorStrings,\r\n\tinProgressFilter: [statusCodes.E_EMPTY, statusCodes.E_LAST_SYMBOL, statusCodes.E_WRONG_ENDING]\r\n});","export default function validate(value, statusCodes = {})\r\n{\r\n\t// Empty string\r\n\tif ( value.length === 0 )\r\n\t\treturn statusCodes.E_EMPTY;\r\n\r\n\t// Maximum 50 characters \r\n\tif ( value.length > 50 )\r\n\t\treturn statusCodes.E_TOO_LONG;\r\n\t\r\n\t// First character must be a capital letter\r\n\tconst firstLetterRegex = /^[A-ZА-ЯЁ]$/;\r\n\tlet isValid = firstLetterRegex.test(value.charAt(0));\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_FIRST_LETTER;\r\n\t}\r\n\r\n\t// Last character must be a letter\r\n\tconst lastLetterRegex = /^[a-zа-яё]$/;\r\n\tisValid = lastLetterRegex.test(value.charAt(value.length-1));\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_LAST_SYMBOL;\r\n\t}\r\n\r\n\t// Minimum two letters after a hyphen\r\n\tconst endingRegex = /-[a-zа-яё]$/;\r\n\tisValid = endingRegex.test(value);\r\n\tif ( isValid ) {\r\n\t\treturn statusCodes.E_WRONG_ENDING;\r\n\t}\t\t\r\n\t\r\n\t// Surname should comply with the format\r\n\tconst nameRegex = /^[A-ZА-ЯЁ][-a-zа-яё]*$/;\r\n\tisValid = nameRegex.test(value);\r\n\tif ( ! isValid ) {\r\n\t\treturn statusCodes.E_INVALID_FORMAT;\r\n\t}\r\n\r\n\treturn true;\r\n}","import { connect } from 'react-redux';\r\nimport { PROPER_VALUE } from '../ValidateableInput/ValidateableInput.factory';\r\nimport Component from 'components/SubmitButton';\r\n\r\n// Field values are valid if they adhere to the field format\r\nconst areAllFieldsValid = (fields) => fields.every(field => field.validityStatus === PROPER_VALUE);\r\n\r\n// Field values approval is marked in 'isApproved' property\r\nconst areAllApprovableFieldsApproved = (fields) => fields.every(field => field.isApproved !== false );\r\n\r\n// Ultimate check of the form data\r\nconst isFormFilledInCorrectly = (state) => {\r\n\tconst formData = state.signup.data;\r\n\tconst indicators = [\r\n\t\tareAllFieldsValid(Object.values(formData)),\r\n\t\tareAllApprovableFieldsApproved(Object.values(formData)),\r\n\t\tformData.password.value === formData.passwordConfirmation.value\r\n\t]\r\n\treturn indicators.every( item => item );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tdisabled: !isFormFilledInCorrectly(state) || state.signup.status.isPending,\r\n\tisPending: state.signup.status.isPending\r\n});\r\n\r\nexport default connect(mapStateToProps)(Component);","import React from 'react';\r\nimport './Demo.view.sass';\r\n\r\nconst View = ({\r\n\tonClick, caption\r\n}) => pug`\r\n\t#FormDemo\r\n\t\ta(onClick=onClick) #{caption}\r\n\t\t.arrow-wrapper\r\n\t\t\t.arrow\r\n\t\t\t\t.pointer\r\n`;\r\n\r\nexport default View;","import { defineMessages } from 'react-intl';\r\nimport cookie from 'js-cookie';\r\n\r\n// Helper to delay execution to imitate long-running operations\r\n// like fetching data\r\nexport function sleeper(ms) {\r\n\treturn new Promise(resolve => setTimeout(() => resolve(), ms));\r\n}\r\n\r\n// Intl messages definition for ajaxErrorParser()\r\nconst messages = defineMessages({\r\n\tserverConnectionError: \"Couldn't connect to server: \\\"{errorMsg}\\\". Please, try again later. If you can't submit the form, please contact us. We bring our apologies for the inconvenience.\",\r\n\tsomethingWentWrong: \"Something went wrong. Probably, due to a server fault or connection problems. Please, try again later. If you can't submit the form, please contact us. We bring our apologies for the inconvenience\"\r\n});\r\n\r\n// A callback for parsing and formatting AJAX errors\r\nexport function ajaxErrorParser(error, intl) {\r\n\tlet err;\r\n\tif ( error.response ) {\r\n\t\t// The request was made and the server responded with a status code\r\n\t\t// that falls out of the range of 2xx\r\n\t\tconsole.log(intl);\r\n\t\tconst errorDetails = error.response.data.details\r\n\t\t\t|| intl.formatMessage(messages.somethingWentWrong);\r\n\r\n\t\terr = `${errorDetails}. ${error.response.status} ${error.response.statusText}`;\r\n\t}\r\n\telse if ( error.request ) {\r\n\t\t// The request was made but no response was received\r\n\t\t// `error.request` is an instance of XMLHttpRequest in the browser and an instance of\r\n\t\t// http.ClientRequest in node.js\r\n\t\terr = intl.formatMessage(\r\n\t\t\tmessages.serverConnectionError,\r\n\t\t\t{ errorMsg: error.message }\r\n\t\t);\r\n\t}\r\n\telse {\r\n\t\t// Something happened in setting up the request that triggered an Error\r\n\t\terr = error.message;\r\n\t}\r\n\treturn err;\r\n}\r\n\r\n// Fetch localized messages stored in localStorage\r\nexport function fetchStoredMessages(localeId) {\r\n\t// First, check if there's a 'locale' value in the local storage\r\n\tconst serializedLocale = localStorage.getItem('locale');\r\n\tif ( ! serializedLocale ) return null;\r\n\t\r\n\t// If it's there, check if the data is for the requested locale \r\n\tconst { locale: storedLocaleId, messages } = JSON.parse(serializedLocale);\r\n\tif ( storedLocaleId !== localeId )\r\n\t\treturn null;\r\n\r\n\treturn messages;\r\n}\r\n\r\n\r\n// Init Redux store with locally available data\r\nexport function hydrate(initialState = {}) {\r\n\t// Check if the localized messages are already in the storage\r\n\tconst locale = cookie.get('locale') || 'en';\r\n\tconst messages = fetchStoredMessages(locale);\r\n\r\n\t// Set the cookie for subsequent responses to server\r\n\tcookie.set('locale', locale);\r\n\r\n\tinitialState.i18n = {\r\n\t\t...initialState.i18n,\r\n\t\tlocale,\r\n\t\tmessages\r\n\t}\r\n\r\n\treturn initialState;\r\n}\r\n\r\n\r\n/*\r\n// Scrolls the viewport to put focused element in the middle\r\n// Probably, not the best idea to intervene in user scrolling contols\r\n// so I commented it out\r\n\r\nexport async function scrollIntoElement(e) {\r\n\tconst element = e.target;\r\n\tconst rect = element.getBoundingClientRect();\r\n\tconst viewportHeight = document.documentElement.clientHeight;\r\n\r\n\t// Required offset from the top for the element to be in the center\r\n\tconst offsetY = (viewportHeight - rect.height) / 2;\r\n\t\r\n\t// Difference between needed offset and actual relative position from the top\r\n\tconst deltaY = Math.floor(rect.top - offsetY);\r\n\r\n\tconst transitionTime = 500;\r\n\tconst stepDelay = 5;\r\n\tconst stepsTotal = transitionTime / stepDelay;\r\n\tconst stepSize = Math.ceil(deltaY / stepsTotal);\r\n\r\n\t// console.log(`Total: ${stepsTotal}. Size: ${stepSize}. Initial top: ${rect.top}. Target: ${offsetY}. Initial delta: ${deltaY}`);\r\n\r\n\tsetTimeout( function step(stepsLeft) {\r\n\t\tif ( stepsLeft === 0 ) return;\r\n\t\twindow.scrollBy(0, stepSize);\r\n\t\tsetTimeout(step, stepDelay, --stepsLeft);\r\n\r\n\t\t// const progress = Math.floor(element.getBoundingClientRect().top);\r\n\t\t// const target = Math.floor(offsetY);\r\n\t\t// const delta = Math.floor(element.getBoundingClientRect().top - offsetY);\r\n\t\t// console.log(`Top: ${progress}. Delta: ${delta} (${stepsLeft})`);\r\n\r\n\t}, 0, stepsTotal);\r\n}\r\n*/","import { sleeper } from 'utils'; \r\n\r\n// Fill in the form programmatically one-by-one, typing in\r\n// the characters with a delay\r\nexport async function simulateFormFillIn(sequences, delay) {\r\n\tfor ( let elementId in sequences ) {\r\n\t\tawait runSequence(elementId, sequences[elementId], delay);\r\n\t\tawait sleeper(delay * pauseDelayMultiplier);\r\n\t}\r\n}\r\n\r\n// --- Internals ---\r\n\r\nconst inputEvent = new Event('input', {bubbles: true});\r\nconst blurEvent = new Event('blur', {bubbles: true});\r\nconst focusEvent = new Event('focus', {bubbles: false});\r\nconst fieldBlurDelayMultiplier = 2;\r\nconst pauseDelayMultiplier = 10;\r\n\r\n\r\nfunction putTextInTextarea(element, value) {\r\n\telement.value = value;\r\n}\r\n\r\nasync function simulateTypingTextarea(element, sequence, delay) {\r\n\treturn simulateTyping(putTextInTextarea, element, sequence, delay);\r\n} \r\n\r\nasync function simulateTypingInputElements(element, sequence, delay) {\r\n\treturn simulateTyping(setNativeValue, element, sequence, delay);\r\n}\r\n\r\nasync function simulateTyping(strategy, element, sequence, delay) {\r\n\tfor ( let i = 0; i < sequence.length; i++ ) {\r\n\t\tstrategy(element, sequence.slice(0, i+1));\r\n\t\telement.dispatchEvent(inputEvent);\r\n\t\tawait sleeper(delay);\r\n\t}\r\n}\r\n\r\nfunction clickElement(element) {\r\n\telement.click();\r\n}\r\n\r\nfunction putTextAtOnce(element, value) {\r\n\tsetNativeValue(element, value);\r\n\telement.dispatchEvent(inputEvent);\r\n}\r\n\r\nasync function runSequence(elementId, sequence, delay) {\r\n\tconst element = document.getElementById(elementId);\r\n\r\n\tlet strategy = null;\r\n\tswitch ( sequence.type ) {\r\n\t\tcase \"click\":\r\n\t\t\tstrategy = clickElement;\r\n\t\t\tsequence = null;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"instant\":\r\n\t\t\tstrategy = putTextAtOnce;\r\n\t\t\tsequence = sequence.value;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"textarea\":\r\n\t\t\tstrategy = simulateTypingTextarea;\r\n\t\t\tsequence = sequence.value;\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\tstrategy = simulateTypingInputElements;\r\n\t}\r\n\r\n\telement.dispatchEvent(focusEvent);\r\n\telement.focus();\r\n\tawait sleeper(1000);\r\n\tawait strategy(element, sequence, delay);\r\n\tawait sleeper(delay * fieldBlurDelayMultiplier);\r\n\telement.dispatchEvent(blurEvent);\r\n}\r\n\r\nfunction setNativeValue(element, value) {\r\n\tconst valueSetter = Object.getOwnPropertyDescriptor(element, 'value').set;\r\n\tconst prototype = Object.getPrototypeOf(element);\r\n\tconst prototypeValueSetter = Object.getOwnPropertyDescriptor(prototype, 'value').set;\r\n\r\n\tif ( valueSetter && valueSetter !== prototypeValueSetter ) {\r\n\t\tprototypeValueSetter.call(element, value);\r\n\t} else {\r\n\t\tvalueSetter.call(element, value);\r\n\t}\r\n}\r\n\r\n","import React from 'react';\r\nimport View from './Demo.view';\r\nimport { simulateFormFillIn } from './Demo.utils';\r\n\r\nconst Container = ({\r\n\tcaption\r\n}) => {\r\n\tconst onDemo = async () => {\r\n\t\t// Data to fill in\r\n\t\tconst formData = {\r\n\t\t\t\"firstname\": \"Linus\",\r\n\t\t\t\"lastname\": \"Torvalds\",\r\n\t\t\t\"username\": \"linus-torvalds\",\r\n\t\t\t\"password\": \"linus-torvalds\",\r\n\t\t\t\"passwordConfirmation\": \"linus-torvalds\",\r\n\t\t\t\"email\": \"torvalds@linux.org\",\r\n\t\t\t\"newsletters\": {\r\n\t\t\t\ttype: \"click\"\r\n\t\t\t},\r\n\t\t\t\"phone\": \"+1 702-355-88-92\",\r\n\t\t\t\"birthdate\": {\r\n\t\t\t\ttype: \"instant\",\r\n\t\t\t\tvalue: \"1969-12-28\"\r\n\t\t\t},\r\n\t\t\t\"biography\": {\r\n\t\t\t\ttype: \"textarea\",\r\n\t\t\t\tvalue: \"That's interesting, how did you manage to make it do that?\"\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tconst characterTypingDelay = 100;\r\n\r\n\t\tawait simulateFormFillIn(formData, characterTypingDelay);\r\n\t}\r\n\r\n\treturn pug`\r\n\t\tView(\r\n\t\t\tonClick=onDemo\r\n\t\t\tcaption=caption\r\n\t\t)\r\n\t`;\r\n}\r\n\r\nexport default Container;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport FadeIn from 'react-fade-in';\r\nimport { Container, Row, Col, Card, CardTitle, CardText, Form, FormText, Alert } from 'reactstrap';\r\nimport './SignupForm.view.sass';\r\n\r\n// Form inputs\r\nimport Username from './Username';\r\nimport Password from './Password';\r\nimport PasswordConfirmation from './PasswordConfirmation';\r\nimport Email from './Email';\r\nimport Phone from './Phone';\r\nimport Birthdate from './Birthdate';\r\nimport Newsletters from './Newsletters';\r\nimport Biography from './Biography';\r\nimport PersonalInformationProcessing from './PersonalInformationProcessing';\r\nimport Photo from './Photo';\r\nimport Firstname from './Firstname';\r\nimport Lastname from './Lastname';\r\n\r\n// Other controls\r\nimport SubmitButton from './SubmitButton';\r\nimport ErrorDisplay from '../ErrorDisplay';\r\nimport Demo from './Demo';\r\n\r\nimport { defineMessages } from 'react-intl';\r\n\r\nconst messages = defineMessages({\r\n\tsignupFormTitle: \"Sign Up\",\r\n\tsignupFormHint: \"You need to provide some personal information. Please, fill in the form below\",\r\n\tfirstNameLabel: \"Given name\",\r\n\tlastNameLabel: \"Family name\",\r\n\tuserIdLabel: \"Username\",\r\n\tuserIdHint: \"User identifier. Has to be composed of lowercase latin letters and/or digits. Нyphen is allowed. Should start with a letter and end with a letter or a digit. Minimim - 5 symbols. For example, 'giant-66'\",\r\n\tpasswordLabel: \"Password\",\r\n\tpasswordHint: \"Only latin letters, digits and special characters (for example, :, ', >, <, =, +, ., &, %, $, #, @, !, *, ), (, -, ~, [, ], /, \\\\\\\\, \\\\{, \\\\}, _, ^). Minimum 8 characters. At least two character types should be used\",\r\n\tpasswordConfirmationLabel: \"Password confirmation\",\r\n\tpasswordConfirmationHint: \"Please, confirm the above entered password\",\r\n\temailLabel: \"Email\",\r\n\temailHint: \"We use the email for password restoration and critical notifications. No unnecessary newsletters\",\r\n\tnewslettersLabel: \"Newsletters\",\r\n\tnewslettersHint: \"Switch on if you want to keep up with us\",\r\n\tphoneLabel: \"Phone number\",\r\n\tphoneHint: \"Phone number in the following format: <country code> <number>, for example, +7 926-840-55-49. Minimum 5 characters\",\r\n\tbirthdateLabel: \"Birthdate\",\r\n\tbirthdateHint: \"Please, choose the date from the popup calendar\",\r\n\tbiographyLabel: \"Short biography\",\r\n\tphotoLabel: \"Photo\",\r\n\tphotoHint: \"PNG and JPEG files only. Maximum size - 5 MB\",\r\n\tpersonalInformationProcessingLabel: \"I give my consent to process my personal data\",\r\n\tpersonalInformationProcessingHint: \"According to Russia's federal law from 27/07/2006 number 152-FZ 'On personal data'\",\r\n\tsubmitButtonCaption: \"Sign up\",\r\n\tsubmitButtonInProgressCaption: \"Sending\",\r\n\tsignupErrorTitle: \"Sign up error\",\r\n\talreadySignedUp: \"Already signed up?\",\r\n\tloginLinkCaption: \"Log in\",\r\n\tsignupSuccessTitle: \"Signed up successfully!\",\r\n\tsignupSuccessMessage: \"You're registered. Please, log in to your account\",\r\n\tbtnDemoCaption: \"Demo\",\r\n});\r\n\r\nconst View = ({\r\n\tintl: { formatMessage }, onSubmit, isPending, externalError, isRegistered, onPopulateValidClick, onPopulateInvalidClick, steps, onFocus\r\n}) => pug`\r\n\t#SignupForm\r\n\t\tFadeIn(delay=500)\r\n\t\t\tContainer\r\n\t\t\t\tRow\r\n\t\t\t\t\tCol.mx-auto\r\n\t\t\t\t\t\tif ! isRegistered\r\n\t\t\t\t\t\t\tDemo(caption=formatMessage(messages.btnDemoCaption))\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tCard(body)\r\n\t\t\t\t\t\t\t\tCardTitle.mb-1 #{formatMessage(messages.signupFormTitle)}\r\n\r\n\t\t\t\t\t\t\t\tCardText.d-block.text-muted.mt-0.mb-5 #{formatMessage(messages.signupFormHint)}\r\n\r\n\t\t\t\t\t\t\t\tForm(onSubmit=onSubmit)\r\n\t\t\t\t\t\t\t\t\tRow\r\n\t\t\t\t\t\t\t\t\t\tCol(md=6).mb-5.mb-md-0\r\n\t\t\t\t\t\t\t\t\t\t\tFirstname(label=formatMessage(messages.firstNameLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t\tCol(md=6 onFocus=onFocus)\r\n\t\t\t\t\t\t\t\t\t\t\tLastname(label=formatMessage(messages.lastNameLabel))\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t.step(className=steps[0])\r\n\t\t\t\t\t\t\t\t\t\tRow\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\tUsername(label=formatMessage(messages.userIdLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.hint #{formatMessage(messages.userIdHint)}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tRow\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\tPassword(label=formatMessage(messages.passwordLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.hint #{formatMessage(messages.passwordHint)}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t.step(className=steps[1])\r\n\t\t\t\t\t\t\t\t\t\tRow\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\tPasswordConfirmation(label=formatMessage(messages.passwordConfirmationLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.hint #{formatMessage(messages.passwordConfirmationHint)}\r\n\r\n\t\t\t\t\t\t\t\t\t.step(className=steps[2])\r\n\t\t\t\t\t\t\t\t\t\tRow#field-email\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\tEmail(label=formatMessage(messages.emailLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.hint #{formatMessage(messages.emailHint)}\r\n\r\n\t\t\t\t\t\t\t\t\t\tRow#field-newsletters\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\tNewsletters(label=formatMessage(messages.newslettersLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.hint #{formatMessage(messages.newslettersHint)} \r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t.step(className=steps[3])\r\n\t\t\t\t\t\t\t\t\t\tRow\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\tPhone(label=formatMessage(messages.phoneLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.hint #{formatMessage(messages.phoneHint)}\r\n\r\n\t\t\t\t\t\t\t\t\t.step(className=steps[4])\r\n\t\t\t\t\t\t\t\t\t\tRow\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\tBirthdate(label=formatMessage(messages.birthdateLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.hint #{formatMessage(messages.birthdateHint)}\r\n\r\n\t\t\t\t\t\t\t\t\t.step(className=steps[5])\r\n\t\t\t\t\t\t\t\t\t\tRow\r\n\t\t\t\t\t\t\t\t\t\t\tCol\r\n\t\t\t\t\t\t\t\t\t\t\t\tBiography(label=formatMessage(messages.biographyLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t.step(className=steps[6])\r\n\t\t\t\t\t\t\t\t\t\tRow\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\tPhoto(label=formatMessage(messages.photoLabel))\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.hint #{formatMessage(messages.photoHint)} \r\n\r\n\t\t\t\t\t\t\t\t\t\tRow#field-personal-information-processing\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\tPersonalInformationProcessing(label=formatMessage(messages.personalInformationProcessingLabel))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tCol(md=6)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.hint #{formatMessage(messages.personalInformationProcessingHint)}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t#SubmitButton\r\n\t\t\t\t\t\t\t\t\t\t\tSubmitButton.d-block.w-100(\r\n\t\t\t\t\t\t\t\t\t\t\t\tisPending=true\r\n\t\t\t\t\t\t\t\t\t\t\t\tcaption=formatMessage(messages.submitButtonCaption)\r\n\t\t\t\t\t\t\t\t\t\t\t\tinProgressCaption=formatMessage(messages.submitButtonInProgressCaption)\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\t.step(className=steps.showProceedButton)\r\n\t\t\t\t\t\t\t\t\t\t.proceedBtn &darr;\r\n\r\n\t\t\t\t\t\t\t\t\tif externalError\r\n\t\t\t\t\t\t\t\t\t\tErrorDisplay(title=formatMessage(messages.signupErrorTitle) errorMsg=externalError)\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tFormText.mt-3.float-right #{formatMessage(messages.alreadySignedUp)}\r\n\t\t\t\t\t\t\t\t\t\t| \r\n\t\t\t\t\t\t\t\t\t\tLink(to=\"/login/\") #{formatMessage(messages.loginLinkCaption)}\r\n\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tRow\r\n\t\t\t\t\t\t\t\tCol(md=8 lg=6 xl=5).mx-auto\r\n\t\t\t\t\t\t\t\t\tAlert.p-5(color=\"primary\")\r\n\t\t\t\t\t\t\t\t\t\th4.alert-heading #{formatMessage(messages.signupSuccessTitle)}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tp #{formatMessage(messages.signupSuccessMessage)}\r\n\r\n\t\t\t\t\t\t\t\t\t\tLink.btn.btn-lg.btn-primary.w-100(to=\"/\") #{formatMessage(messages.loginLinkCaption)}\t\t\t\t\t\t\r\n`;\r\n\r\nexport default View;","import View from './SignupForm.view';\r\nimport { intlShape, injectIntl } from 'react-intl';\r\n\r\nView.propTypes = {\r\n\tintl: intlShape.isRequired\r\n}\r\n\r\nexport default injectIntl(View);\r\n\r\n","export const actionTypes = {\r\n\tFORM_SUBMIT: \t\t\t'FORM_SUBMIT',\r\n\tFORM_SUBMIT_RESPONSE: \t'FORM_SUBMIT_RESPONSE',\r\n\tFORM_SUBMIT_FAILURE: \t'FORM_SUBMIT_FAILURE',\r\n\tFORM_RESET: \t\t\t'FORM_RESET', \r\n}\r\n\r\nexport const onSubmit = () => ({\r\n\ttype: actionTypes.FORM_SUBMIT\r\n});\r\n\r\nexport const onSubmitResponse = (response) => ({\r\n\ttype: actionTypes.FORM_SUBMIT_RESPONSE,\r\n\tresponse: response.data\r\n});\r\n\r\nexport const onSubmitFailure = (error) => ({\r\n\ttype: actionTypes.FORM_SUBMIT_FAILURE,\r\n\texternalError: error\r\n});\r\n\r\nexport const onSubmitFormReset = () => ({\r\n\ttype: actionTypes.FORM_RESET\r\n});\r\n\r\n","import { connect } from 'react-redux';\r\nimport Form from './SignupForm.container';\r\nimport { onSubmit } from './SignupForm.actions';\r\n\r\nfunction setVisibilityFilter(signupState) {\r\n\tlet filter = [];\r\n\tfor ( let i = 0; i < signupState.status.step; i++ ) {\r\n\t\tfilter.push('revealed');\r\n\t}\r\n\tconst currentKeyField = signupState.data[signupState.status.currentAwaitingKeyField];\r\n\tconst fieldValueIsProper = currentKeyField.validityStatus === \"PROPER_VALUE\";\r\n\tconst fieldIsNotPending = ! currentKeyField.isPending === true;\r\n\tconst fieldIsBeingEdited = ! currentKeyField.isTypingFinished;\r\n\r\n\tfilter.showProceedButton = fieldValueIsProper && fieldIsNotPending && fieldIsBeingEdited ? 'revealed' : '';\r\n\r\n\treturn filter;\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisPending: state.signup.status.isPending,\r\n\tisRegistered: state.signup.status.isRegistered,\r\n\texternalError: state.signup.status.externalError,\r\n\tsteps: setVisibilityFilter(state.signup)\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tonSubmit: (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tdispatch(onSubmit());\r\n\t},\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Form);","import React from 'react';\r\nimport { Spinner } from 'reactstrap';\r\nimport './FullscreenSpinner.view.sass';\r\n\r\nconst View = ({\r\n\tcaption\r\n}) => pug`\r\n\t#FullscreenSpinner\r\n\t\tSpinner(size=\"lg\" color=\"primary\" type=\"grow\")\r\n\t\t.caption.w-100.text-center.text-primary #{caption}\r\n`;\r\n\r\nexport default View;","import React from 'react';\r\nimport { Button } from 'reactstrap';\r\nimport './LogoutButton.view.sass';\r\n\r\nconst View = ({\r\n\tonLogout, caption\r\n}) => pug`\r\n\t#LogoutButton\r\n\t\tButton(onClick=onLogout) #{caption}\r\n`;\r\n\r\nexport default View;","import { connect } from 'react-redux';\r\nimport View from './LogoutButton.view';\r\nimport { onLogout } from 'components/Auth/Auth.actions';\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tonLogout: () => dispatch(onLogout())\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(View);","import React from 'react';\r\nimport { Container, Row, Col, Card, CardTitle, CardText, CustomInput } from 'reactstrap';\r\nimport FadeIn from 'react-fade-in';\r\nimport FullscreenSpinner from 'components/FullscreenSpinner';\r\nimport ErrorDisplay from 'components/ErrorDisplay';\r\nimport LogoutButton from './LogoutButton';\r\nimport './Dashboard.view.sass';\r\nimport { injectIntl, defineMessages } from 'react-intl';\r\n\r\nconst messages = defineMessages({\r\n\tdataLoadingSpinnerMsg: \"Loading data...\",\r\n\tdataLoadingErrorTitle: \"Error loading profile data\",\r\n\tlogoutButtonCaption: \"Log out\",\r\n\tnewslettersStatusIndicatorLabel: \"Newsletters\",\r\n\tbiographyBlockTitle: \"Short biography\",\r\n\tbirthdate: \"{birthdate, date, medium} ({age, plural, offset: 1 =0 {infant} other {{age, number} years old}})\"\r\n});\r\n\r\nconst View = ({\r\n\tintl: { formatMessage }, data, isPending, externalError\r\n}) => pug`\r\n\t#Dashboard\r\n\t\tif isPending\r\n\t\t\tFullscreenSpinner(caption=formatMessage(messages.dataLoadingSpinnerMsg))\r\n\r\n\t\telse if externalError\r\n\t\t\tContainer\r\n\t\t\t\tRow\r\n\t\t\t\t\tCol(sm=8 xl=6).mx-auto\r\n\t\t\t\t\t\tErrorDisplay(title=formatMessage(messages.dataLoadingErrorTitle) errorMsg=externalError)\r\n\r\n\t\telse if data\r\n\t\t\tFadeIn(delay=500)\r\n\t\t\t\tContainer\r\n\t\t\t\t\tRow\r\n\t\t\t\t\t\tCol(md=6 lg=4)\r\n\t\t\t\t\t\t\t.photo.proportional.proportional-square\r\n\t\t\t\t\t\t\t\t.proportional-inner.rounded-circle\r\n\t\t\t\t\t\t\t\t\timg(src=data.photo)\r\n\r\n\t\t\t\t\t\t\tLogoutButton(caption=formatMessage(messages.logoutButtonCaption))\r\n\r\n\t\t\t\t\t\tCol(md=6 lg=4)\r\n\t\t\t\t\t\t\t.infoblock\r\n\t\t\t\t\t\t\t\tCard\r\n\t\t\t\t\t\t\t\t\tCardTitle #{data.firstname} #{data.lastname}\r\n\t\t\t\t\t\t\t\t\tCardText #{formatMessage(messages.birthdate, {birthdate: data.birthdate, age: data.age})}\r\n\r\n\t\t\t\t\t\t\t\tCard\r\n\t\t\t\t\t\t\t\t\tCardText #{data.phone}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tCard\r\n\t\t\t\t\t\t\t\t\tCardText #{data.email}\r\n\t\t\t\t\t\t\t\t\tdiv\r\n\t\t\t\t\t\t\t\t\t\tCustomInput(\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"switch\"\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultChecked=data.newsletters\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=formatMessage(messages.newslettersStatusIndicatorLabel))\r\n\r\n\t\t\t\t\t\tif data.biography\r\n\t\t\t\t\t\t\tCol(lg=4)\r\n\t\t\t\t\t\t\t\tCard.biography.infoblock\r\n\t\t\t\t\t\t\t\t\tCardTitle #{formatMessage(messages.biographyBlockTitle)}\r\n\t\t\t\t\t\t\t\t\tCardText #{data.biography}\r\n`;\r\n\r\nexport default injectIntl(View);","export function postProcessUserProfile(userProfileInfo)\r\n{\r\n\t// Create the Date object\r\n\tuserProfileInfo.birthdate = new Date(userProfileInfo.birthdate);\r\n\t\r\n\t// Calculate user's age\r\n\tuserProfileInfo.age = calculateAge(userProfileInfo.birthdate);\r\n\t\r\n\treturn userProfileInfo;\r\n}\r\n\r\nfunction calculateAge(birthdate) {\r\n\tconst ageDiffMs = Date.now() - birthdate.getTime();\r\n\tconst ageDate = new Date(ageDiffMs);\r\n\treturn Math.abs(ageDate.getUTCFullYear() - 1970);\r\n}","import { connect } from 'react-redux';\r\nimport View from './Dashboard.view';\r\nimport { postProcessUserProfile } from './Dashboard.utils';\r\n\r\nconst mapStateToProps = (state) => {\r\n\tlet { data: userProfile, isPending, externalError } = state.userProfile;\r\n\tif ( userProfile ) {\r\n\t\tuserProfile = postProcessUserProfile(userProfile);\r\n\t}\r\n\treturn {\r\n\t\tdata: userProfile,\r\n\t\tisPending,\r\n\t\texternalError\r\n\t};\r\n}\r\n\r\nexport default connect(mapStateToProps)(View);","import { connect } from 'react-redux';\r\nimport Component from './Auth.container';\r\nimport { onAuthResponse } from './Auth.actions';\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisAuthenticated: state.auth.isAuthenticated,\r\n\ttoken: state.auth.token\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tupdateReduxAuthState: (token) => {\r\n\t\tdispatch(onAuthResponse(token));\r\n\t}\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Component);","import { useEffect } from 'react';\r\n\r\nexport default ({\r\n\tisAuthenticated, token,\r\n\tupdateReduxAuthStatem\r\n}) => {\t\r\n\tuseEffect(() => {\r\n\t\t// Store the token locally when authenticated \r\n\t\tif ( isAuthenticated && token ) {\r\n\t\t\tlocalStorage.setItem('jwt', token);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Remove token otherwise (logout requested)\r\n\t\t\tlocalStorage.removeItem('jwt');\r\n\t\t}\r\n\t}, [isAuthenticated, token]);\r\n\r\n\treturn null;\r\n}","import React from 'react';\r\nimport { Button } from 'reactstrap';\r\nimport './LocaleSwitcher.view.sass';\r\n\r\nconst View = ({\r\n\ttitle, switchTo, onClick\r\n}) => pug`\r\n\t#LocaleSwitcher\r\n\t\tButton(type=\"text\" value=switchTo, onClick=onClick) #{title}\r\n`;\r\n\r\nexport default View;","export const actionTypes = {\r\n\tSWITCH_LOCALE_REQUEST: \t\"SWITCH_LOCALE_REQUEST\",\r\n\tSWITCH_LOCALE_RESPONSE: \"SWITCH_LOCALE_RESPONSE\",\r\n\tSWITCH_LOCALE_FAILURE: \t\"SWITCH_LOCALE_FAILURE\",\r\n\tSWITCH_LOCALE_RESET: \t\"SWITCH_LOCALE_RESET\"\r\n}\r\n\r\nexport const onSwitchLocaleRequest = (localeId) => ({\r\n\ttype: actionTypes.SWITCH_LOCALE_REQUEST,\r\n\tlocaleId\r\n});\r\n\r\nexport const onSwitchLocaleResponse = (data) => ({\r\n\ttype: actionTypes.SWITCH_LOCALE_RESPONSE,\r\n\tdata\r\n});\r\n\r\nexport const onSwitchLocaleFailure = (error) => ({\r\n\ttype: actionTypes.SWITCH_LOCALE_FAILURE,\r\n\terror\r\n});\r\n\r\nexport const onSwitchLocaleReset = () => ({\r\n\ttype: actionTypes.SWITCH_LOCALE_RESET\r\n});\r\n\r\nexport default {\r\n\tonSwitchLocaleRequest,\r\n\tonSwitchLocaleResponse,\r\n\tonSwitchLocaleFailure,\r\n\tonSwitchLocaleReset\r\n}\r\n","import { connect } from \"react-redux\";\r\nimport View from \"./LocaleSwitcher.view\";\r\nimport { onSwitchLocaleRequest } from 'components/IntlProvider/IntlProvider.actions';\r\n\r\nconst mapStateToProps = state => {\r\n\tconst { locale } = state['i18n'];\r\n\treturn {\r\n\t\ttitle: locale === 'en' ? 'На русском' : 'Switch to English',\r\n\t\tswitchTo: locale === 'en' ? 'ru' : 'en'\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\tonClick: (e) => dispatch(onSwitchLocaleRequest(e.target.value))\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(View);","import React from 'react';\nimport { defineMessages } from 'react-intl';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport LoginForm from \"components/LoginForm\";\nimport SignupForm from \"components/SignupForm\";\nimport Dashboard from \"components/Dashboard\";\nimport ErrorDisplay from 'components/ErrorDisplay';\nimport Auth from \"components/Auth\";\nimport LocaleSwitcher from \"components/LocaleSwitcher\";\nimport FullscreenSpinner from 'components/FullscreenSpinner';\nimport { Container, Row, Col } from \"reactstrap\";\nimport './App.view.sass';\n\nconst messages = defineMessages({\n\tlocaleSwitchErrorTitle: \"Couldn't switch locale\"\n});\n\nconst AppView = ({\n\tintl,\n\tisAuthenticated,\n\tisLocaleSwitchPending,\n\tlocaleSwitchError,\n}) => pug`\n\t#app\n\t\tAuth\n\n\t\tif isLocaleSwitchPending\n\t\t\tFullscreenSpinner\n\n\t\telse\n\t\t\t.localeSwitchWrapper\n\t\t\t\tContainer\n\t\t\t\t\tRow\n\t\t\t\t\t\tCol\n\t\t\t\t\t\t\tif localeSwitchError\n\t\t\t\t\t\t\t\tErrorDisplay(title=intl.formatMessage(messages.localeSwitchErrorTitle) errorMsg=localeSwitchError)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t.d-flex.justify-content-end\n\t\t\t\t\t\t\t\t\tLocaleSwitcher\n\n\t\t\tSwitch\n\t\t\t\tLoginRoute(exact=true path=\"/login/\" isAuthenticated=isAuthenticated)\n\n\t\t\t\tRoute(exact=true path=\"/signup/\" component=SignupForm)\n\t\t\t\t\n\t\t\t\tProtectedRoute(exact=true path=\"/dashboard/\" component=Dashboard isAuthenticated=isAuthenticated redirectTo=\"/login\")\n\t\t\t\t\n\t\t\t\tDefaultRoute(isAuthenticated=isAuthenticated)\n`;\n\nexport default AppView;\n\nconst ProtectedRoute = ({\n\tcomponent: Component,\n\texact, path, isAuthenticated, redirectTo\n}) => {\n\tconst actualComponent = isAuthenticated\n\t\t? () => pug`Component()`\n\t\t: () => pug`Redirect(to=redirectTo)`;\n\treturn pug`\n\t\tRoute(exact=exact path=path render=actualComponent)\n\t`\n};\n\nconst DefaultRoute = ({isAuthenticated}) => {\n\tconst actualComponent = isAuthenticated\n\t\t? () => pug`Redirect(to=\"/dashboard\")`\n\t\t: () => pug`Redirect(to=\"/login\")`;\n\treturn pug`\n\t\tRoute(exact=true path=\"/\" render=actualComponent)\n\t`;\n}\n\nconst LoginRoute = ({\n\tisAuthenticated, exact, path\n}) => {\n\tconst actualComponent = isAuthenticated\n\t\t? () => pug`Redirect(to=\"/dashboard\")`\n\t\t: () => pug`LoginForm`;\n\treturn pug`\n\t\tRoute(exact=exact path=path render=actualComponent)\n\t`;\n}","import React, { useEffect } from 'react';\r\nimport { injectIntl } from 'react-intl';\r\nimport { withRouter } from 'react-router';\r\nimport View from './App.view';\r\n\r\nconst Container = ({\r\n\tisAuthenticated,\r\n\tisLocaleSwitchPending,\r\n\tlocaleSwitchError,\r\n\tfetchUserProfile,\r\n\tlogicMiddleware,\r\n\tappContext,\r\n\tintl,\r\n\thistory,\r\n\tresetUI,\r\n}) => {\r\n\tuseEffect(() => {\r\n\t\t// Utilize the global 'appContext' variable from the root module\r\n\t\t// to pass changing 'intl' to redux-logic 'process()' handler\r\n\t\t// to enable translations in utility functions outside components\r\n\t\tlogicMiddleware.addDeps({ appContext });\r\n\t\tappContext.intl = intl;\r\n\t}, [appContext, intl, logicMiddleware]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// Pull out the user profile data right after the user authenticated\r\n\t\tif ( isAuthenticated ) {\r\n\t\t\tfetchUserProfile();\r\n\t\t}\r\n\t}, [isAuthenticated, fetchUserProfile]);\r\n\t\r\n\tuseEffect(() => {\r\n\t\t// Subscribe to URL change events to reset UI every time\r\n\t\t// user travels through screens\r\n\t\tconst unsubscribe = history.listen( (location, action) => {\r\n\t\t\tresetUI();\r\n\t\t});\r\n\t\treturn unsubscribe;\r\n\t}, [history, resetUI]);\r\n\t\r\n\treturn pug`\r\n\t\tView(\r\n\t\t\tisAuthenticated=isAuthenticated\r\n\t\t\tisLocaleSwitchPending=isLocaleSwitchPending\r\n\t\t\tlocaleSwitchError=localeSwitchError\r\n\t\t\tintl=intl\r\n\t\t)\r\n\t`;\r\n}\r\n\r\nexport default injectIntl(withRouter(Container));","export const actionTypes = {\r\n\t'DATA_FETCH_REQUEST': 'DATA_FETCH_REQUEST',\r\n\t'DATA_FETCH_RESPONSE': 'DATA_FETCH_RESPONSE',\r\n\t'DATA_FETCH_FAILURE': 'DATA_FETCH_FAILURE',\r\n\t'UI_RESET': 'UI_RESET'\r\n}\r\n\r\nexport const onDataFetchRequest = () => ({\r\n\ttype: actionTypes.DATA_FETCH_REQUEST,\r\n});\r\n\r\nexport const onDataFetchResponse = (data) => ({\r\n\ttype: actionTypes.DATA_FETCH_RESPONSE,\r\n\tdata\r\n});\r\n\r\nexport const onDataFetchFailure = (error) => ({\r\n\ttype: actionTypes.DATA_FETCH_FAILURE,\r\n\terror\r\n});\r\n\r\nexport const onUiReset = () => ({\r\n\ttype: actionTypes.UI_RESET,\r\n});","import { connect } from 'react-redux';\r\nimport Component from './App.container';\r\nimport { onDataFetchRequest, onUiReset } from './App.actions';\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisAuthenticated: state.auth.isAuthenticated,\r\n\tisLocaleSwitchPending: state.i18n.isPending,\r\n\tlocaleSwitchError: state.i18n.error,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tfetchUserProfile: () => {\r\n\t\tdispatch(onDataFetchRequest());\r\n\t},\r\n\tresetUI: () => {\r\n\t\tdispatch(onUiReset());\r\n\t}\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Component);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createLogic } from 'redux-logic';\r\nimport { actionTypes, onAuthResponse, onAuthFailure } from './Auth.actions';\r\nimport axios from 'axios';\r\nimport { sleeper, ajaxErrorParser } from 'utils.js';\r\n\r\nconst authLogic = createLogic({\r\n\ttype: actionTypes.AUTH_REQUEST,\r\n\tprocessOptions: {\r\n\t\tsuccessType: \tonAuthResponse,\r\n\t\tfailType: \t\tonAuthFailure\r\n\t},\r\n\tasync process({ action,  appContext: { intl } }) {\r\n\t\tawait sleeper(1000);\r\n\t\ttry {\r\n\t\t\tconst response = await axios({\r\n\t\t\t\turl: \"/api/auth\",\r\n\t\t\t\tparams: action.data\t\t\t\r\n\t\t\t});\r\n\t\t\treturn response.data.data;\r\n\t\t}\r\n\t\tcatch ( error ) {\r\n\t\t\treturn Promise.reject(ajaxErrorParser(error, intl));\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport default [\r\n\tauthLogic\r\n];","import { createLogic } from 'redux-logic';\r\nimport { actionTypes, onSwitchLocaleResponse, onSwitchLocaleFailure } from './IntlProvider.actions';\r\nimport { sleeper, ajaxErrorParser, fetchStoredMessages } from 'utils';\r\nimport axios from 'axios';\r\nimport cookie from 'js-cookie';\r\n\r\nconst localeSwitchLogic = createLogic({\r\n\ttype: actionTypes.SWITCH_LOCALE_REQUEST,\r\n\tvalidate({ action }, allow, reject) {\r\n\t\t// For English we just alter the locale value in cookies;\r\n\t\t// default messages will be used and locale data is built-in \r\n\t\tif ( action.localeId === 'en' ) {\r\n\t\t\tcookie.set('locale', 'en');\r\n\t\t\tlocalStorage.removeItem('locale');\r\n\t\t\treturn reject(onSwitchLocaleResponse({ locale: 'en' }));\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Also, check if messages are already stored locally\r\n\t\t\tconst messages = fetchStoredMessages(action.localeId);\r\n\t\t\tif ( messages ) {\r\n\t\t\t\tcookie.set('locale', action.localeId);\r\n\t\t\t\treturn reject(onSwitchLocaleResponse({ locale: action.localeId, messages }));\r\n\t\t\t}\r\n\t\t}\r\n\t\tallow(action);\r\n\t},\r\n\tprocessOptions: {\r\n\t\tsuccessType: \tonSwitchLocaleResponse,\r\n\t\tfailType: \t\tonSwitchLocaleFailure\r\n\t},\r\n\tasync process({ action, appContext: { intl } }) {\r\n\t\tawait sleeper(1000);\r\n\t\ttry {\r\n\t\t\tconst response = await axios({\r\n\t\t\t\turl: \"/api/get-locale\",\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tid: action.localeId\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// Save fetched locale locally and yield the data\r\n\t\t\tconst data = response.data.data;\r\n\t\t\tconst serializedLocale = JSON.stringify(data);\r\n\t\t\tlocalStorage.setItem('locale', serializedLocale);\r\n\t\t\treturn Promise.resolve(data);\r\n\t\t}\r\n\t\tcatch ( error ) {\r\n\t\t\treturn Promise.reject(ajaxErrorParser(error, intl));\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport default [\r\n\tlocaleSwitchLogic,\r\n];","export const actionTypes = {\r\n\tREQUEST_APPROVAL: \t\t\t'REQUEST_APPROVAL',\r\n\tRESPONSE_APPROVAL: \t\t\t'RESPONSE_APPROVAL',\r\n\tRESPONSE_APPROVAL_ERROR: \t'RESPONSE_APPROVAL_ERROR'\r\n}\r\n\r\nexport function getActions(fieldName)\r\n{\r\n\tconst requestApproval = () => ({\r\n\t\ttype: actionTypes.REQUEST_APPROVAL,\r\n\t\tfieldName\r\n\t});\r\n\r\n\tconst responseApproval = response => ({\r\n\t\ttype: actionTypes.RESPONSE_APPROVAL,\r\n\t\tfieldName,\r\n\t\tresponse\r\n\t});\r\n\r\n\tconst responseApprovalError = errorMsg => ({\r\n\t\ttype: actionTypes.RESPONSE_APPROVAL_ERROR,\r\n\t\tfieldName,\r\n\t\texternalError: errorMsg\r\n\t});\r\n\r\n\treturn {\r\n\t\trequestApproval,\r\n\t\tresponseApproval,\r\n\t\tresponseApprovalError,\r\n\t}\r\n}","import { createLogic } from 'redux-logic';\r\nimport { PROPER_VALUE } from '../ValidateableInput/ValidateableInput.factory';\r\nimport { getActions } from './ApprovableInput.actions';\r\nimport { actionTypes as validateableInputActionTypes } from '../ValidateableInput/ValidateableInput.actions';\r\nimport axios from 'axios';\r\nimport { sleeper, ajaxErrorParser } from 'utils';\r\n\r\nconst fieldApprovalLogic = createLogic({\r\n\ttype: validateableInputActionTypes.FIELD_EDITED,\r\n\tvalidate({ getState, action, ctx }, allow, reject)\r\n\t{\r\n\t\t// Only apply the logic for the following fields\r\n\t\tconst approvableFields = [\r\n\t\t\t'username',\r\n\t\t\t'email',\r\n\t\t\t'phone',\r\n\t\t];\r\n\t\tconst fieldName = action.fieldName;\r\n\t\tif ( ! approvableFields.some( field => field === fieldName ) ) {\r\n\t\t\treturn reject(action);\r\n\t\t}\r\n\t\tconst state = getState();\r\n\t\tconst { validityStatus, value } = state.signup.data[fieldName];\r\n\t\t\r\n\t\t// If the field is filled in properly:\t\t\r\n\t\tif ( validityStatus === PROPER_VALUE )\r\n\t\t{\r\n\t\t\t// 1. Get action creators for the field from a factory,\r\n\t\t\t//    because field's name needs to be sticked to\r\n\t\t\t//    the action by design\r\n\t\t\tconst { requestApproval, responseApproval, responseApprovalError } = getActions(fieldName);\r\n\t\t\t\r\n\t\t\t// 2. Pass that data to the 'ctx' variable to use it\r\n\t\t\t//    later in process() handler\r\n\t\t\tObject.assign(ctx, { requestApproval, responseApproval, responseApprovalError, fieldName, value });\r\n\t\t\t\r\n\t\t\t// Allow processing the action and forward it to the next middleware\r\n\t\t\tallow(action);\r\n\t\t}\r\n\t\telse reject(action); // bypass process() handler, skip to next middleware\r\n\t},\r\n\tasync process({ ctx, appContext: { intl } }, dispatch, done)\r\n\t{\r\n\t\tdispatch(ctx.requestApproval());\r\n\t\tconst config = {\r\n\t\t\turl: \"/api/check-uniqueness\",\r\n\t\t\tparams: {\r\n\t\t\t\tname: ctx.fieldName,\r\n\t\t\t\tvalue: ctx.value\r\n\t\t\t}\r\n\t\t};\r\n\t\tawait sleeper(1000);\r\n\t\ttry {\r\n\t\t\tconst response = await axios(config);\r\n\t\t\tdispatch(ctx.responseApproval(response.data));\r\n\t\t}\r\n\t\tcatch ( error ) {\r\n\t\t\tconst err = ajaxErrorParser(error, intl); \r\n\t\t\tdispatch(ctx.responseApprovalError(err));\r\n\t\t}\r\n\t\tdone();\r\n\t}\r\n});\r\n\r\nexport default fieldApprovalLogic;","import { createLogic } from 'redux-logic';\r\nimport { PROPER_VALUE } from '../ValidateableInput/ValidateableInput.factory';\r\nimport { statusCodes } from './PasswordConfirmation.container';\r\nimport { passwordsCheckedAction, passwordValidityError } from './PasswordConfirmation.actions';\r\nimport { actionTypes as validateableInputActionTypes, getActions } from '../ValidateableInput/ValidateableInput.actions';\r\n\r\nconst comparePasswordsOnFinishedEditing = createLogic({\r\n\ttype: validateableInputActionTypes.FIELD_EDITED,\r\n\tvalidate({ getState, action }, allow, reject) {\r\n\t\tif ( action.fieldName === 'passwordConfirmation' ) {\r\n\t\t\t// Don't touch an empty field\r\n\t\t\tconst { value } = getState().signup.data['passwordConfirmation'] || {};\r\n\t\t\tif ( value && value.length ) {\r\n\t\t\t\tallow(action);\r\n\t\t\t}\r\n\t\t}\r\n\t\treject(action);\r\n\t},\r\n\tprocess({ getState, action }) {\r\n\t\tconst state = getState();\r\n\t\t// Getting the values and statuses for password and its confirmation\r\n\t\tconst { validityStatus: passwordValidityStatus, value: passwordValue } = state.signup.data['password'];\r\n\t\tconst { validityStatus: passwordConfirmationValidityStatus, value: passwordConfirmationValue } = state.signup.data['passwordConfirmation'] || {};\r\n\t\t// If the both password fields are filled in correctly\r\n\t\tif \t(\r\n\t\t\t\tpasswordValidityStatus === PROPER_VALUE \r\n\t\t\t\t&&\r\n\t\t\t\tpasswordConfirmationValidityStatus === PROPER_VALUE\r\n\t\t\t) {\r\n\t\t\tconst areEqual = passwordValue === passwordConfirmationValue;\r\n\t\t\treturn passwordsCheckedAction(areEqual);\r\n\t\t}\r\n\t\telse return passwordValidityError();\r\n\t}\r\n});\r\n\r\nconst clearFieldOnPasswordChange = createLogic({\r\n\ttype: validateableInputActionTypes.VALUE_CHANGED,\r\n\tvalidate({ getState, action }, allow, reject) {\r\n\t\taction.fieldName === 'password'\r\n\t\t\t? allow(action)\r\n\t\t\t: reject(action);\r\n\t},\r\n\tprocess({ getState, action }, dispatch, done) {\r\n\t\tconst { onChange } = getActions('passwordConfirmation');\r\n\t\tdispatch(onChange('', statusCodes.E_EMPTY));\r\n\t\tdone();\r\n\t}\r\n});\r\n\r\nexport default [\r\n\tcomparePasswordsOnFinishedEditing,\r\n\tclearFieldOnPasswordChange\r\n];","export const PASSWORDS_CHECKED \t\t= 'PASSWORDS_CHECKED';\r\nexport const E_PASSWORD_NOT_VALID \t= 'E_PASSWORD_NOT_VALID';\r\n\r\nconst passwordsCheckedAction = areEqual => ({\r\n\ttype: PASSWORDS_CHECKED,\r\n\tareEqual\r\n});\r\n\r\nconst passwordValidityError = () => ({\r\n\ttype: E_PASSWORD_NOT_VALID\r\n});\r\n\r\nexport {\r\n\tpasswordsCheckedAction,\r\n\tpasswordValidityError\r\n}","import { sha256 } from 'js-sha256';\r\n\r\n// Preprocesses form data obtained from Redux store\r\n// to be submitted to the server\r\nexport function exractFormData(originalFormData)\r\n{\r\n\t// Fields to extract, except the 'photo' field\r\n\tconst fields = [\r\n\t\t'username',\r\n\t\t'email',\r\n\t\t'phone',\r\n\t\t'newsletters',\r\n\t\t'birthdate',\r\n\t\t'biography',\r\n\t\t'firstname',\r\n\t\t'lastname'\r\n\t];\r\n\r\n\t// Browser's native way to store form data in the \"multipart/form-data\" encoding\r\n\t// https://developer.mozilla.org/en-US/docs/Web/API/FormData\r\n\tlet refinedFormData = new FormData();\r\n\tfields.every( item => {\r\n\t\trefinedFormData.set(item, originalFormData[item].value);\r\n\t\treturn true;\r\n\t});\r\n\t\r\n\t// Hashing the password\r\n\trefinedFormData.set('password', sha256(originalFormData['password'].value));\r\n\t\r\n\t// If the user provided a photo, add it to FormData\r\n\tconst photo = originalFormData['photo'].value;\r\n\tif ( photo ) {\r\n\t\trefinedFormData.set('photo', photo);\r\n\t}\r\n\r\n\treturn refinedFormData;\r\n}","import fieldApprovalLogic from './ApprovableInput/ApprovableInput.logic';\r\nimport passwordConfirmationLogic from './PasswordConfirmation/PasswordConfirmation.logic';\r\n\r\nimport { createLogic } from 'redux-logic';\r\nimport { actionTypes, onSubmitResponse, onSubmitFailure } from './SignupForm.actions';\r\nimport axios from 'axios';\r\nimport { exractFormData } from './SignupForm.utils';\r\nimport { sleeper, ajaxErrorParser } from 'utils';\r\n\r\nconst formSubmissionLogic = createLogic({\r\n\ttype: actionTypes.FORM_SUBMIT,\r\n\tprocessOptions: {\r\n\t\tsuccessType: \tonSubmitResponse,\r\n\t\tfailType: \t\tonSubmitFailure\r\n\t},\r\n\tasync process({ getState, appContext: { intl } }) {\r\n\t\tconst data = exractFormData(getState().signup.data);\r\n\t\tawait sleeper(1000);\r\n\t\treturn axios({\r\n\t\t\t\tmethod: \"post\",\r\n\t\t\t\turl: \"/api/put-user-profile\",\r\n\t\t\t\tdata,\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'multipart/form-data',\r\n\t\t\t\t},\r\n\t\t\t\ttimeout: 30000\r\n\t\t\t})\r\n\t\t\t.catch( error => Promise.reject(ajaxErrorParser(error, intl)) );\r\n\t}\r\n});\r\n\r\nexport default [\r\n\tformSubmissionLogic,\r\n\tfieldApprovalLogic,\r\n\t...passwordConfirmationLogic\r\n];","import { createLogic } from 'redux-logic';\r\nimport { actionTypes, onDataFetchResponse, onDataFetchFailure } from './App.actions';\r\nimport { sleeper, ajaxErrorParser } from 'utils';\r\nimport { defineMessages } from 'react-intl';\r\nimport axios from 'axios';\r\nimport { onAuthReset } from 'components/Auth/Auth.actions';\r\nimport { onSubmitFormReset } from 'components/SignupForm/SignupForm.actions';\r\nimport { onSwitchLocaleReset } from 'components/IntlProvider/IntlProvider.actions';\r\n\r\nconst messages = defineMessages({\r\n\tnotAuthorizedException: \"Not authorized. Probably due to an application error. Try logging in again\"\r\n});\r\n\r\nconst dataFetchLogic = createLogic({\r\n\ttype: actionTypes.DATA_FETCH_REQUEST,\r\n\tprocessOptions: {\r\n\t\tsuccessType: \tonDataFetchResponse,\r\n\t\tfailType: \t\tonDataFetchFailure\r\n\t},\r\n\tasync process({ action, getState, appContext: { intl }}) \r\n\t{\r\n\t\tconst { token } = getState().auth;\r\n\t\tif ( ! token ) {\r\n\t\t\treturn Promise.reject(intl.formatMessage(messages.notAuthorizedException));\r\n\t\t}\r\n\t\tawait sleeper(3000);\r\n\t\ttry {\r\n\t\t\tconst response = await axios({\r\n\t\t\t\turl: \"/api/get-user-profile\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Authorization': `Bearer ${token}`\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn Promise.resolve(response.data.data);\r\n\t\t}\r\n\t\tcatch ( error ) {\r\n\t\t\treturn Promise.reject(ajaxErrorParser(error, intl));\r\n\t\t}\r\n\t}\r\n});\r\n\r\nconst uiResetLogic = createLogic({\r\n\ttype: actionTypes.UI_RESET,\r\n\tprocess(deps, dispatch, done) {\r\n\t\tdispatch(onAuthReset());\r\n\t\tdispatch(onSubmitFormReset());\r\n\t\tdispatch(onSwitchLocaleReset());\r\n\t\tdone();\r\n\t}\r\n});\r\n\r\nexport default [\r\n\tdataFetchLogic,\r\n\tuiResetLogic\r\n];","import authLogic from 'components/Auth/Auth.logic';\r\nimport switchLocaleLogic from 'components/IntlProvider/IntlProvider.logic';\r\nimport signupFormLogic from 'components/SignupForm/SignupForm.logic';\r\nimport dataFetchLogic from 'components/App/App.logic';\r\n\r\nexport default [\r\n\t...authLogic,\r\n\t...switchLocaleLogic,\r\n\t...signupFormLogic,\r\n\t...dataFetchLogic,\r\n];","import { createLogicMiddleware } from 'redux-logic';\r\nimport logic from './logic';\r\n\r\nconst logicMiddleware = createLogicMiddleware(logic);\r\n\r\n// Output events in the logic to browser's console\r\nlogicMiddleware.monitor$.subscribe(\r\n\tx => console.log(x)\r\n);\r\n\r\n\r\nexport default logicMiddleware;","import { actionTypes } from './IntlProvider.actions'; \r\n\r\nconst initialState = {\r\n\tlocale: 'en',\r\n\tmessages: null,\r\n\tisPending: null\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n\tswitch ( action.type )\r\n\t{\r\n\t\tcase actionTypes.SWITCH_LOCALE_REQUEST:\r\n\t\t\treturn { \r\n\t\t\t\t...state,\r\n\t\t\t\tisPending: true\r\n\t\t\t}\r\n\t\t\r\n\t\tcase actionTypes.SWITCH_LOCALE_RESPONSE:\r\n\t\t\treturn {\r\n\t\t\t\t...action.data,\r\n\t\t\t\tisPending: false\r\n\t\t\t}\r\n\t\t\r\n\t\tcase actionTypes.SWITCH_LOCALE_FAILURE:\r\n\t\tcase actionTypes.SWITCH_LOCALE_RESET:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisPending: false,\r\n\t\t\t\terror: action.error\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","import { actionTypes } from './Auth.actions';\r\n\r\nconst auth = (state = {\r\n\tisAuthenticated: !!localStorage.getItem('jwt'),\r\n\ttoken: localStorage.getItem('jwt')\r\n}, action) => {\r\n\tswitch ( action.type )\r\n\t{\r\n\t\tcase actionTypes.AUTH_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\tisPending: true\r\n\t\t\t}\r\n\r\n\t\tcase actionTypes.AUTH_RESPONSE:\r\n\t\t\treturn {\r\n\t\t\t\tisPending: false,\r\n\t\t\t\tisAuthenticated: true,\r\n\t\t\t\ttoken: action.token\r\n\t\t\t}\r\n\r\n\t\tcase actionTypes.AUTH_FAILURE:\t\t\r\n\t\t\treturn {\r\n\t\t\t\tisPending: false,\r\n\t\t\t\tisAuthenticated: undefined,\r\n\t\t\t\texternalError: action.error,\r\n\t\t\t\ttoken: undefined\r\n\t\t\t}\r\n\r\n\t\tcase actionTypes.AUTH_LOGOUT:\r\n\t\t\treturn {\r\n\t\t\t\tisPending: false,\r\n\t\t\t\tisAuthenticated: false\r\n\t\t\t}\r\n\r\n\t\tcase actionTypes.AUTH_RESET:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\texternalError: action.error\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport default auth;","import { actionTypes } from './ApprovableInput.actions';\r\n\r\n// Single field reducer\r\nconst fieldData = (state = {}, action) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase actionTypes.REQUEST_APPROVAL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisPending: true\r\n\t\t\t}\r\n\t\tcase actionTypes.RESPONSE_APPROVAL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisPending: false,\r\n\t\t\t\tisApproved: action.response.status === 'APPROVED'\r\n\t\t\t}\r\n\t\tcase actionTypes.RESPONSE_APPROVAL_ERROR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisPending: false,\r\n\t\t\t\tisApproved: undefined,\r\n\t\t\t\texternalError: action.externalError\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\t\t\r\n\t}\r\n}\r\n\r\n// Universal (any field) reducer that uses\r\n// previously defined single-field reducer\r\nconst data = (state = {}, action) => {\r\n\tif ( !action.fieldName )\r\n\t\treturn state;\r\n\t\r\n\treturn {\r\n\t\t...state,\r\n\t\t[action.fieldName]: fieldData(state[action.fieldName], action)\r\n\t}\t\r\n}\r\n\r\nexport default data;","import { actionTypes } from './ValidateableInput.actions';\r\n\r\n// Single field reducer\r\nconst fieldData = (state = {}, action) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase actionTypes.VALUE_CHANGED:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisTypingFinished: false,\r\n\t\t\t\tvalue: action.value,\r\n\t\t\t\tvalidityStatus: action.validityStatus,\r\n\t\t\t\tisApproved: undefined,\r\n\t\t\t\texternalError: ''\r\n\t\t\t}\r\n\t\tcase actionTypes.FIELD_EDITED:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisTypingFinished: true\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\t\t\r\n\t}\r\n}\r\n\r\n// Universal (any field) reducer that uses\r\n// previously defined single-field reducer\r\nconst data = (state = {}, action) => {\r\n\tif ( !action.fieldName ) return state;\r\n\treturn {\r\n\t\t...state,\r\n\t\t[action.fieldName]: fieldData(state[action.fieldName], action)\r\n\t}\t\r\n}\r\n\r\nexport default data;","import reduceReducers from 'reduce-reducers';\r\nimport { combineReducers } from 'redux';\r\n\r\nimport approvable from './ApprovableInput/ApprovableInput.reducer';\r\nimport validateable from './ValidateableInput/ValidateableInput.reducer';\r\nimport passwordConfirmation from './PasswordConfirmation/PasswordConfirmation.reducer';\r\n\r\nimport { actionTypes } from './SignupForm.actions';\r\nimport { actionTypes as inputActionTypes } from './ValidateableInput/ValidateableInput.actions';\r\n\r\nimport initialState from 'initialState.json';\r\n\r\nconst status = (state = {}, action) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase actionTypes.FORM_SUBMIT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisPending: true,\r\n\t\t\t\texternalError: undefined\r\n\t\t\t}\r\n\t\tcase actionTypes.FORM_SUBMIT_RESPONSE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisPending: false,\r\n\t\t\t\tisRegistered: action.response.status === 'SUCCESS'\r\n\t\t\t}\r\n\t\tcase actionTypes.FORM_SUBMIT_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisPending: false,\r\n\t\t\t\tisRegistered: undefined,\r\n\t\t\t\texternalError: action.externalError\r\n\t\t\t}\r\n\t\tcase inputActionTypes.FIELD_EDITED:\r\n\t\t\tconst keyFields = \"lastname password passwordConfirmation email phone birthdate biography\".split(\" \");\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\texternalError: undefined,\r\n\r\n\t\t\t\tcurrentAwaitingKeyField: ((previousValue) => {\r\n\t\t\t\t\tlet fieldNameIndex = keyFields.indexOf(action.fieldName);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Skip if the field is not a key field\r\n\t\t\t\t\tif ( ! ~ fieldNameIndex )\r\n\t\t\t\t\t\treturn previousValue;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Also skip if it's not the farthest\r\n\t\t\t\t\tif ( fieldNameIndex < keyFields.indexOf(previousValue) )\r\n\t\t\t\t\t\treturn previousValue;\r\n\r\n\t\t\t\t\t// If last edited key field is the final, return it\r\n\t\t\t\t\tif ( fieldNameIndex >= keyFields.length - 1 )\r\n\t\t\t\t\t\treturn action.fieldName;\r\n\r\n\t\t\t\t\t// Next key field in the list\r\n\t\t\t\t\treturn keyFields[fieldNameIndex + 1];\r\n\r\n\t\t\t\t})(state.currentAwaitingKeyField),\r\n\r\n\t\t\t\t// To determine the current step we check action.fieldName against an array of key fields\r\n\t\t\t\t// Step counter can only be increased, not the other way\r\n\t\t\t\tstep: keyFields.reduce( (previousValue, fieldName, index) => {\r\n\t\t\t\t\t\tif ( previousValue > index ) return previousValue;\r\n\t\t\t\t\t\treturn fieldName === action.fieldName\r\n\t\t\t\t\t\t\t? index + 1\r\n\t\t\t\t\t\t\t: previousValue\r\n\t\t\t\t\t}, state.step),\r\n\r\n\t\t\t}\r\n\t\t\r\n\t\tdefault:\r\n\t\t\treturn state;\t\t\r\n\t}\r\n}\r\n\r\nconst signupReset = (state, action) => {\r\n\tswitch ( action.type ) {\r\n\t\tcase actionTypes.FORM_RESET:\r\n\t\t\treturn initialState.signup;\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nconst signup = reduceReducers(\r\n\tcombineReducers({\r\n\t\tstatus,\r\n\t\tdata: reduceReducers(\r\n\t\t\tapprovable,\r\n\t\t\tvalidateable,\r\n\t\t\tpasswordConfirmation\r\n\t\t)\r\n\t}),\r\n\tsignupReset\r\n);\r\n\r\nexport default signup;","import { PASSWORDS_CHECKED, E_PASSWORD_NOT_VALID } from './PasswordConfirmation.actions';\r\nimport { statusCodes } from './PasswordConfirmation.container';\r\nimport { PROPER_VALUE } from '../ValidateableInput/ValidateableInput.factory';\r\n\r\nexport default (state, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase PASSWORDS_CHECKED:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpasswordConfirmation: {\r\n\t\t\t\t\t...state.passwordConfirmation,\r\n\t\t\t\t\tisValid: action.areEqual,\r\n\t\t\t\t\tvalidityStatus: action.areEqual ? PROPER_VALUE : statusCodes.E_PASSWORDS_MISMATCH\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tcase E_PASSWORD_NOT_VALID:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpasswordConfirmation: {\r\n\t\t\t\t\t...state.passwordConfirmation,\r\n\t\t\t\t\tisValid: undefined,\r\n\t\t\t\t\tvalidityStatus: statusCodes.E_PASSWORD_NOT_VALID\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import { actionTypes } from './App.actions';\r\n\r\nconst userProfile = (state = {\r\n\tisPending: false,\r\n\tdata: undefined\r\n}, action) => {\r\n\tswitch ( action.type )\r\n\t{\r\n\t\tcase actionTypes.DATA_FETCH_REQUEST:\r\n\t\t\treturn {\r\n\t\t\t\tisPending: true,\r\n\t\t\t\tdata: undefined\r\n\t\t\t}\r\n\t\tcase actionTypes.DATA_FETCH_RESPONSE:\r\n\t\t\treturn {\r\n\t\t\t\tisPending: false,\r\n\t\t\t\tdata: action.data\r\n\t\t\t}\r\n\t\tcase actionTypes.DATA_FETCH_FAILURE:\r\n\t\t\treturn {\r\n\t\t\t\tisPending: false,\r\n\t\t\t\texternalError: action.error,\r\n\t\t\t\tdata: undefined\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport default userProfile;","import { combineReducers } from 'redux';\r\n\r\nimport i18n from './components/IntlProvider/IntlProvider.reducers';\r\nimport auth from './components/Auth/Auth.reducers';\r\nimport signup from './components/SignupForm/SignupForm.reducers';\r\nimport userProfile from './components/App/App.reducers';\r\n\r\nexport default combineReducers({\r\n\ti18n,\r\n\tauth,\r\n\tsignup,\r\n\tuserProfile,\r\n});","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport rootReducer from './reducers';\r\n\r\n// To enable Redux DevTools Extension\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport default function configureStore(initialState, middleware)\r\n{\r\n\t// Get a store enhancer that applies the given middleware\r\n\t// https://redux.js.org/api/applymiddleware\r\n\tmiddleware = applyMiddleware(middleware);\r\n\r\n\t// Apply several store enhancers in a row\r\n\t// https://redux.js.org/api/compose#composefunctions\r\n\tmiddleware = composeEnhancers(middleware);\r\n\r\n\t// Finally, create the store\r\n\t// https://redux.js.org/api/createstore\r\n\tconst store = createStore(rootReducer, initialState, middleware);\r\n\treturn store;\r\n}","import { IntlProvider } from \"react-intl\";\r\nimport { connect } from \"react-redux\";\r\n\r\nexport default connect(\r\n  // Connect React Intl with Redux to inject current locale data\r\n  ({ i18n }) => ({ ...i18n, key: i18n.locale })\r\n)(IntlProvider);","import 'sass/index.sass';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from 'components/App';\nimport * as serviceWorker from './serviceWorker';\nimport logicMiddleware from 'configureLogic';\nimport configureStore from 'configureStore';\nimport IntlProvider from 'components/IntlProvider';\nimport { addLocaleData } from 'react-intl';\nimport ru from 'react-intl/locale-data/ru';\nimport { hydrate } from 'utils';\nimport externalState from 'initialState.json';\n\n// Adding localization functions for different languages\naddLocaleData(ru);\n\n// Hydrate the app with the data stored locally\nconst initialState = hydrate(externalState);\n\n// Create a store initialized with the state and middleware\nconst store = configureStore(initialState, logicMiddleware);\n\n// Since redux-logic doesn't allow changing dependencies in runtime\n// this object can be used as a dependency to pass 'intl' object\n// as its property. Value is assinged in App.container.js upon\n// changes in 'intl' (initially and after user changes locale)\nlet appContext = {};\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<IntlProvider>\n\t\t\t<Router>\n\t\t\t\t<App logicMiddleware={logicMiddleware} appContext={appContext} />\n\t\t\t</Router>\n\t\t</IntlProvider>\n\t</Provider>,\n\tdocument.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}